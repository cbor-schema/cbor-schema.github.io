"use strict";(self.webpackChunkcbor_site=self.webpackChunkcbor_site||[]).push([[906],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>m});var n=a(7294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var l=n.createContext({}),c=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},d=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},p="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,d=r(e,["components","mdxType","originalType","parentName"]),p=c(a),u=i,m=p["".concat(l,".").concat(u)]||p[u]||h[u]||o;return a?n.createElement(m,s(s({ref:t},d),{},{components:a})):n.createElement(m,s({ref:t},d))}));function m(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=a.length,s=new Array(o);s[0]=u;var r={};for(var l in t)hasOwnProperty.call(t,l)&&(r[l]=t[l]);r.originalType=e,r[p]="string"==typeof e?e:i,s[1]=r;for(var c=2;c<o;c++)s[c]=a[c];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},5713:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});var n=a(7462),i=(a(7294),a(3905));const o={sidebar_position:2},s="JSON Schema \u89c4\u8303",r={unversionedId:"json-schema",id:"json-schema",title:"JSON Schema \u89c4\u8303",description:"\u672c\u6587\u4f7f\u7528 GPT-4 \u7ffb\u8bd1\uff0c\u505a\u4e86\u4e00\u4e9b\u5fae\u8c03\u548c\u6392\u7248\u4f18\u5316\uff0c\u539f\u6587\uff1aJSON Schema: A Media Type for Describing JSON Documents.",source:"@site/docs/json-schema.md",sourceDirName:".",slug:"/json-schema",permalink:"/docs/json-schema",draft:!1,editUrl:"https://github.com/cbor-schema/cbor-site/tree/main/docs/json-schema.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"CBOR \u89c4\u8303\uff08WIP\uff09",permalink:"/docs/cbor"},next:{title:"CBOR Schema \u89c4\u8303\uff08WIP\uff09",permalink:"/docs/cbor-schema"}},l={},c=[{value:"1. \u5f15\u8a00\uff08Introduction\uff09",id:"1-\u5f15\u8a00introduction",level:2},{value:"2. \u7ea6\u5b9a\u548c\u672f\u8bed\uff08Conventions and Terminology\uff09",id:"2-\u7ea6\u5b9a\u548c\u672f\u8bedconventions-and-terminology",level:2},{value:"3. \u6982\u8ff0\uff08Overview\uff09",id:"3-\u6982\u8ff0overview",level:2},{value:"4. \u5b9a\u4e49\uff08Definitions\uff09",id:"4-\u5b9a\u4e49definitions",level:2},{value:"4.1 JSON \u6587\u6863",id:"41-json-\u6587\u6863",level:3},{value:"4.2 \u5b9e\u4f8b\uff08Instance\uff09",id:"42-\u5b9e\u4f8binstance",level:3},{value:"4.2.1 \u5b9e\u4f8b\u6570\u636e\u6a21\u578b\uff08Instance Data Model\uff09",id:"421-\u5b9e\u4f8b\u6570\u636e\u6a21\u578binstance-data-model",level:4},{value:"4.2.2 \u5b9e\u4f8b\u76f8\u7b49\uff08Instance Equality\uff09",id:"422-\u5b9e\u4f8b\u76f8\u7b49instance-equality",level:4},{value:"4.2.3 \u975e JSON \u5b9e\u4f8b\uff08Non-JSON Instances\uff09",id:"423-\u975e-json-\u5b9e\u4f8bnon-json-instances",level:4},{value:"4.3. JSON Schema \u6587\u6863",id:"43-json-schema-\u6587\u6863",level:3},{value:"4.3.1. JSON Schema \u5bf9\u8c61\uff08Objects\uff09\u548c\u5173\u952e\u5b57\uff08Keywords\uff09",id:"431-json-schema-\u5bf9\u8c61objects\u548c\u5173\u952e\u5b57keywords",level:4},{value:"4.3.2. \u5e03\u5c14 JSON Schemas",id:"432-\u5e03\u5c14-json-schemas",level:4},{value:"4.3.3. \u6a21\u5f0f\u8bcd\u6c47\u8868\uff08Schema Vocabularies\uff09",id:"433-\u6a21\u5f0f\u8bcd\u6c47\u8868schema-vocabularies",level:4},{value:"4.3.4. \u5143\u6a21\u5f0f\uff08Meta-Schemas\uff09",id:"434-\u5143\u6a21\u5f0fmeta-schemas",level:4},{value:"4.3.5. \u6839\u6a21\u5f0f\u3001\u5b50\u6a21\u5f0f\u548c\u8d44\u6e90\uff08Root Schema and Subschemas and Resources\uff09",id:"435-\u6839\u6a21\u5f0f\u5b50\u6a21\u5f0f\u548c\u8d44\u6e90root-schema-and-subschemas-and-resources",level:4},{value:"5. \u7247\u6bb5\u6807\u8bc6\u7b26\uff08Fragment Identifiers\uff09",id:"5-\u7247\u6bb5\u6807\u8bc6\u7b26fragment-identifiers",level:2},{value:"6. \u4e00\u822c\u8003\u8651\u56e0\u7d20\uff08General Considerations\uff09",id:"6-\u4e00\u822c\u8003\u8651\u56e0\u7d20general-considerations",level:2},{value:"6.1. JSON \u503c\u7684\u8303\u56f4\uff08Range of JSON Values\uff09",id:"61-json-\u503c\u7684\u8303\u56f4range-of-json-values",level:3},{value:"6.2. \u7f16\u7a0b\u8bed\u8a00\u72ec\u7acb\u6027\uff08Programming Language Independence\uff09",id:"62-\u7f16\u7a0b\u8bed\u8a00\u72ec\u7acb\u6027programming-language-independence",level:3},{value:"6.3. \u6570\u5b66\u6574\u6570\uff08Mathematical Integers\uff09",id:"63-\u6570\u5b66\u6574\u6570mathematical-integers",level:3},{value:"6.4. \u6b63\u5219\u8868\u8fbe\u5f0f\uff08Regular Expressions\uff09",id:"64-\u6b63\u5219\u8868\u8fbe\u5f0fregular-expressions",level:3},{value:"6.5. \u6269\u5c55 JSON Schema\uff08Extending JSON Schema\uff09",id:"65-\u6269\u5c55-json-schemaextending-json-schema",level:3},{value:"7. \u5173\u952e\u5b57\u884c\u4e3a\uff08Keyword Behaviors\uff09",id:"7-\u5173\u952e\u5b57\u884c\u4e3akeyword-behaviors",level:2},{value:"7.1. \u8bcd\u6c47\u8303\u56f4\u548c\u52a8\u6001\u8303\u56f4\uff08Lexical Scope and Dynamic Scope\uff09",id:"71-\u8bcd\u6c47\u8303\u56f4\u548c\u52a8\u6001\u8303\u56f4lexical-scope-and-dynamic-scope",level:3},{value:"7.2. \u5173\u952e\u5b57\u4ea4\u4e92\uff08Keyword Interactions\uff09",id:"72-\u5173\u952e\u5b57\u4ea4\u4e92keyword-interactions",level:3},{value:"7.3. \u9ed8\u8ba4\u884c\u4e3a\uff08Default Behaviors\uff09",id:"73-\u9ed8\u8ba4\u884c\u4e3adefault-behaviors",level:3},{value:"7.4. \u6807\u8bc6\u7b26\uff08Identifiers\uff09",id:"74-\u6807\u8bc6\u7b26identifiers",level:3},{value:"7.5. \u5e94\u7528\u5668\uff08Applicators\uff09",id:"75-\u5e94\u7528\u5668applicators",level:3},{value:"7.5.1. \u5f15\u7528\u548c\u5f15\u7528\u6a21\u5f0f\uff08Referenced and Referencing Schemas\uff09",id:"751-\u5f15\u7528\u548c\u5f15\u7528\u6a21\u5f0freferenced-and-referencing-schemas",level:4},{value:"7.6. \u65ad\u8a00\uff08Assertions\uff09",id:"76-\u65ad\u8a00assertions",level:3},{value:"7.6.1. \u65ad\u8a00\u548c\u5b9e\u4f8b\u57fa\u672c\u7c7b\u578b\uff08Assertions and Instance Primitive Types\uff09",id:"761-\u65ad\u8a00\u548c\u5b9e\u4f8b\u57fa\u672c\u7c7b\u578bassertions-and-instance-primitive-types",level:4},{value:"7.7. \u6ce8\u89e3\uff08Annotations\uff09",id:"77-\u6ce8\u89e3annotations",level:3},{value:"7.7.1. \u6536\u96c6\u6ce8\u89e3\uff08Collecting Annotations\uff09",id:"771-\u6536\u96c6\u6ce8\u89e3collecting-annotations",level:4},{value:"7.7.1.1. \u533a\u5206\u591a\u4e2a\u503c\uff08Distinguishing Among Multiple Values\uff09",id:"7711-\u533a\u5206\u591a\u4e2a\u503cdistinguishing-among-multiple-values",level:5},{value:"7.7.1.2. \u6ce8\u91ca\u548c\u65ad\u8a00\uff08Annotations and Assertions\uff09",id:"7712-\u6ce8\u91ca\u548c\u65ad\u8a00annotations-and-assertions",level:5},{value:"7.7.1.3. \u6ce8\u91ca\u548c\u5e94\u7528\u5668\uff08Annotations and Applicators\uff09",id:"7713-\u6ce8\u91ca\u548c\u5e94\u7528\u5668annotations-and-applicators",level:5},{value:"7.8. \u4fdd\u7559\u4f4d\u7f6e\uff08Reserved Locations\uff09",id:"78-\u4fdd\u7559\u4f4d\u7f6ereserved-locations",level:3},{value:"7.9. \u52a0\u8f7d\u5b9e\u4f8b\u6570\u636e\uff08Loading Instance Data\uff09",id:"79-\u52a0\u8f7d\u5b9e\u4f8b\u6570\u636eloading-instance-data",level:3},{value:"8. JSON Schema Core \u8bcd\u6c47\u8868\uff08The JSON Schema Core Vocabulary\uff09",id:"8-json-schema-core-\u8bcd\u6c47\u8868the-json-schema-core-vocabulary",level:2},{value:"8.1. \u5143\u6a21\u5f0f\u548c\u8bcd\u6c47\u8868\uff08Meta-Schemas and Vocabularies\uff09",id:"81-\u5143\u6a21\u5f0f\u548c\u8bcd\u6c47\u8868meta-schemas-and-vocabularies",level:3},{value:"8.1.1. &quot;$schema&quot; \u5173\u952e\u5b57\uff08The &quot;$schema&quot; Keyword\uff09",id:"811-schema-\u5173\u952e\u5b57the-schema-keyword",level:4},{value:"8.1.2. &quot;$vocabulary&quot; \u5173\u952e\u5b57\uff08The &quot;$vocabulary&quot; Keyword\uff09",id:"812-vocabulary-\u5173\u952e\u5b57the-vocabulary-keyword",level:4},{value:"8.1.2.1. \u9ed8\u8ba4\u8bcd\u6c47\u8868\uff08Default vocabularies\uff09",id:"8121-\u9ed8\u8ba4\u8bcd\u6c47\u8868default-vocabularies",level:5},{value:"8.1.2.2. \u8bcd\u6c47\u8868\u7684\u4e0d\u53ef\u7ee7\u627f\u6027\uff08Non-inheritability of vocabularies\uff09",id:"8122-\u8bcd\u6c47\u8868\u7684\u4e0d\u53ef\u7ee7\u627f\u6027non-inheritability-of-vocabularies",level:5},{value:"8.1.3. \u5143\u6a21\u5f0f\u548c\u8bcd\u6c47\u8868 URI \u7684\u66f4\u65b0\uff08Updates to Meta-Schema and Vocabulary URIs\uff09",id:"813-\u5143\u6a21\u5f0f\u548c\u8bcd\u6c47\u8868-uri-\u7684\u66f4\u65b0updates-to-meta-schema-and-vocabulary-uris",level:4},{value:"8.2. \u57fa\u672c URI\u3001\u951a\u70b9\u548c\u89e3\u5f15\u7528\uff08Base URI, Anchors, and Dereferencing\uff09",id:"82-\u57fa\u672c-uri\u951a\u70b9\u548c\u89e3\u5f15\u7528base-uri-anchors-and-dereferencing",level:3},{value:"8.2.1. &quot;$id&quot; \u5173\u952e\u5b57\uff08The &quot;$id&quot; Keyword\uff09",id:"821-id-\u5173\u952e\u5b57the-id-keyword",level:4},{value:"8.2.1.1. \u6807\u8bc6\u6839\u6a21\u5f0f\uff08Identifying the root schema\uff09",id:"8211-\u6807\u8bc6\u6839\u6a21\u5f0fidentifying-the-root-schema",level:5},{value:"8.2.2. \u5b9a\u4e49\u4e0e\u4f4d\u7f6e\u65e0\u5173\u7684\u6807\u8bc6\u7b26\uff08Defining location-independent identifiers\uff09",id:"822-\u5b9a\u4e49\u4e0e\u4f4d\u7f6e\u65e0\u5173\u7684\u6807\u8bc6\u7b26defining-location-independent-identifiers",level:4},{value:"8.2.3. \u6a21\u5f0f\u5f15\u7528\uff08Schema References\uff09",id:"823-\u6a21\u5f0f\u5f15\u7528schema-references",level:4},{value:"8.2.3.1. \u4f7f\u7528 &quot;$ref&quot; \u7684\u76f4\u63a5\u5f15\u7528\uff08Direct References with &quot;$ref&quot;\uff09",id:"8231-\u4f7f\u7528-ref-\u7684\u76f4\u63a5\u5f15\u7528direct-references-with-ref",level:5},{value:"8.2.3.2. \u4f7f\u7528 &quot;$dynamicRef&quot; \u7684\u52a8\u6001\u5f15\u7528\uff08Dynamic References with &quot;$dynamicRef&quot;\uff09",id:"8232-\u4f7f\u7528-dynamicref-\u7684\u52a8\u6001\u5f15\u7528dynamic-references-with-dynamicref",level:5},{value:"8.2.4. \u4f7f\u7528 &quot;$defs&quot; \u8fdb\u884c\u6a21\u5f0f\u91cd\u7528\uff08Schema Re-Use With &quot;$defs&quot;\uff09",id:"824-\u4f7f\u7528-defs-\u8fdb\u884c\u6a21\u5f0f\u91cd\u7528schema-re-use-with-defs",level:4},{value:"8.3. \u4f7f\u7528 &quot;$comment&quot; \u8fdb\u884c\u6ce8\u91ca\uff08Comments With &quot;$comment&quot;\uff09",id:"83-\u4f7f\u7528-comment-\u8fdb\u884c\u6ce8\u91cacomments-with-comment",level:3},{value:"9. \u52a0\u8f7d\u548c\u5904\u7406\u6a21\u5f0f\uff08Loading and Processing Schemas\uff09",id:"9-\u52a0\u8f7d\u548c\u5904\u7406\u6a21\u5f0floading-and-processing-schemas",level:2},{value:"9.1. \u52a0\u8f7d\u6a21\u5f0f\uff08Loading a Schema\uff09",id:"91-\u52a0\u8f7d\u6a21\u5f0floading-a-schema",level:3},{value:"9.1.1. \u521d\u59cb\u5316\u57fa\u672c URI\uff08Initial Base URI\uff09",id:"911-\u521d\u59cb\u5316\u57fa\u672c-uriinitial-base-uri",level:4},{value:"9.1.2. \u52a0\u8f7d\u5f15\u7528\u7684\u6a21\u5f0f\uff08Loading a referenced schema\uff09",id:"912-\u52a0\u8f7d\u5f15\u7528\u7684\u6a21\u5f0floading-a-referenced-schema",level:4},{value:"9.1.3. \u68c0\u6d4b\u5143\u6a21\u5f0f\uff08Detecting a Meta-Schema\uff09",id:"913-\u68c0\u6d4b\u5143\u6a21\u5f0fdetecting-a-meta-schema",level:4},{value:"9.2. \u53d6\u6d88\u5f15\u7528\uff08Dereferencing\uff09",id:"92-\u53d6\u6d88\u5f15\u7528dereferencing",level:3},{value:"9.2.1. JSON \u6307\u9488\u7247\u6bb5\u548c\u5d4c\u5165\u5f0f\u6a21\u5f0f\u8d44\u6e90\uff08JSON Pointer fragments and embedded schema resources\uff09",id:"921-json-\u6307\u9488\u7247\u6bb5\u548c\u5d4c\u5165\u5f0f\u6a21\u5f0f\u8d44\u6e90json-pointer-fragments-and-embedded-schema-resources",level:4},{value:"9.3. \u590d\u5408\u6587\u6863\uff08Compound Documents\uff09",id:"93-\u590d\u5408\u6587\u6863compound-documents",level:3},{value:"9.3.1. \u6253\u5305\uff08Bundling\uff09",id:"931-\u6253\u5305bundling",level:4},{value:"9.3.2. \u4e0d\u540c\u548c\u9ed8\u8ba4\u65b9\u8a00\uff08Differing and Default Dialects\uff09",id:"932-\u4e0d\u540c\u548c\u9ed8\u8ba4\u65b9\u8a00differing-and-default-dialects",level:4},{value:"9.3.3. \u9a8c\u8bc1\uff08Validating\uff09",id:"933-\u9a8c\u8bc1validating",level:4},{value:"9.4. \u6ce8\u610f\u4e8b\u9879\uff08Caveats\uff09",id:"94-\u6ce8\u610f\u4e8b\u9879caveats",level:3},{value:"9.4.1. \u9632\u6b62\u65e0\u9650\u9012\u5f52\uff08Guarding Against Infinite Recursion\uff09",id:"941-\u9632\u6b62\u65e0\u9650\u9012\u5f52guarding-against-infinite-recursion",level:4},{value:"9.4.2. \u53ef\u80fd\u975e\u6a21\u5f0f\u7684\u5f15\u7528\uff08References to Possible Non-Schemas\uff09",id:"942-\u53ef\u80fd\u975e\u6a21\u5f0f\u7684\u5f15\u7528references-to-possible-non-schemas",level:4},{value:"9.5. \u5173\u8054\u5b9e\u4f8b\u548c\u6a21\u5f0f\uff08Associating Instances and Schemas\uff09",id:"95-\u5173\u8054\u5b9e\u4f8b\u548c\u6a21\u5f0fassociating-instances-and-schemas",level:3},{value:"9.5.1. \u8d85\u5a92\u4f53\u4f7f\u7528\uff08Usage for Hypermedia\uff09",id:"951-\u8d85\u5a92\u4f53\u4f7f\u7528usage-for-hypermedia",level:4},{value:"9.5.1.1. \u94fe\u63a5\u5230\u6a21\u5f0f\uff08Linking to a Schema\uff09",id:"9511-\u94fe\u63a5\u5230\u6a21\u5f0flinking-to-a-schema",level:5},{value:"9.5.1.2. HTTP\u4f7f\u7528\uff08Usage Over HTTP\uff09",id:"9512-http\u4f7f\u7528usage-over-http",level:5},{value:"10. \u5e94\u7528\u5b50\u6a21\u5f0f\u7684\u8bcd\u6c47\u8868\uff08A Vocabulary for Applying Subschemas\uff09",id:"10-\u5e94\u7528\u5b50\u6a21\u5f0f\u7684\u8bcd\u6c47\u8868a-vocabulary-for-applying-subschemas",level:2},{value:"10.1. \u5173\u952e\u5b57\u72ec\u7acb\u6027\uff08Keyword Independence\uff09",id:"101-\u5173\u952e\u5b57\u72ec\u7acb\u6027keyword-independence",level:3},{value:"10.2. \u5e94\u7528\u5b50\u6a21\u5f0f\u7684\u5173\u952e\u5b57\uff08Keywords for Applying Subschemas in Place\uff09",id:"102-\u5e94\u7528\u5b50\u6a21\u5f0f\u7684\u5173\u952e\u5b57keywords-for-applying-subschemas-in-place",level:3},{value:"10.2.1. \u903b\u8f91\u5e94\u7528\u5b50\u6a21\u5f0f\u7684\u5173\u952e\u5b57\uff08Keywords for Applying Subschemas With Logic\uff09",id:"1021-\u903b\u8f91\u5e94\u7528\u5b50\u6a21\u5f0f\u7684\u5173\u952e\u5b57keywords-for-applying-subschemas-with-logic",level:4},{value:"10.2.1.1. allOf",id:"10211-allof",level:5},{value:"10.2.1.2. anyOf",id:"10212-anyof",level:5},{value:"10.2.1.3. oneOf",id:"10213-oneof",level:5},{value:"10.2.1.4. not",id:"10214-not",level:5},{value:"10.2.2. \u6839\u636e\u6761\u4ef6\u5e94\u7528\u5b50\u6a21\u5f0f\u7684\u5173\u952e\u5b57\uff08Keywords for Applying Subschemas Conditionally\uff09",id:"1022-\u6839\u636e\u6761\u4ef6\u5e94\u7528\u5b50\u6a21\u5f0f\u7684\u5173\u952e\u5b57keywords-for-applying-subschemas-conditionally",level:4},{value:"10.2.2.1. if",id:"10221-if",level:5},{value:"10.2.2.2. then",id:"10222-then",level:5},{value:"10.2.2.3. else",id:"10223-else",level:5},{value:"10.2.2.4. dependentSchemas",id:"10224-dependentschemas",level:5},{value:"10.3. \u5c06\u5b50\u6a21\u5f0f\u5e94\u7528\u4e8e\u5b50\u5b9e\u4f8b\u7684\u5173\u952e\u5b57\uff08Keywords for Applying Subschemas to Child Instances\uff09",id:"103-\u5c06\u5b50\u6a21\u5f0f\u5e94\u7528\u4e8e\u5b50\u5b9e\u4f8b\u7684\u5173\u952e\u5b57keywords-for-applying-subschemas-to-child-instances",level:3},{value:"10.3.1. \u5c06\u5b50\u6a21\u5f0f\u5e94\u7528\u4e8e\u6570\u7ec4\u7684\u5173\u952e\u5b57\uff08Keywords for Applying Subschemas to Arrays\uff09",id:"1031-\u5c06\u5b50\u6a21\u5f0f\u5e94\u7528\u4e8e\u6570\u7ec4\u7684\u5173\u952e\u5b57keywords-for-applying-subschemas-to-arrays",level:4},{value:"10.3.1.1. prefixItems",id:"10311-prefixitems",level:5},{value:"10.3.1.2. items",id:"10312-items",level:5},{value:"10.3.1.3. contains",id:"10313-contains",level:5},{value:"10.3.2. \u5e94\u7528\u5b50\u6a21\u5f0f\u5230\u5bf9\u8c61\u7684\u5173\u952e\u5b57\uff08Keywords for Applying Subschemas to Objects\uff09",id:"1032-\u5e94\u7528\u5b50\u6a21\u5f0f\u5230\u5bf9\u8c61\u7684\u5173\u952e\u5b57keywords-for-applying-subschemas-to-objects",level:4},{value:"10.3.2.1. properties",id:"10321-properties",level:5},{value:"10.3.2.2. patternProperties",id:"10322-patternproperties",level:5},{value:"10.3.2.3. additionalProperties",id:"10323-additionalproperties",level:5},{value:"10.3.2.4. propertyNames",id:"10324-propertynames",level:5},{value:"11. \u7528\u4e8e\u672a\u8bc4\u4f30\u4f4d\u7f6e\u7684\u8bcd\u6c47\u8868\uff08A Vocabulary for Unevaluated Locations\uff09",id:"11-\u7528\u4e8e\u672a\u8bc4\u4f30\u4f4d\u7f6e\u7684\u8bcd\u6c47\u8868a-vocabulary-for-unevaluated-locations",level:2},{value:"11.1. \u5173\u952e\u5b57\u72ec\u7acb\u6027\uff08Keyword Independence\uff09",id:"111-\u5173\u952e\u5b57\u72ec\u7acb\u6027keyword-independence",level:3},{value:"11.2. unevaluatedItems",id:"112-unevaluateditems",level:3},{value:"11.3. unevaluatedProperties",id:"113-unevaluatedproperties",level:3},{value:"12. \u8f93\u51fa\u683c\u5f0f\u5316\uff08Output Formatting\uff09",id:"12-\u8f93\u51fa\u683c\u5f0f\u5316output-formatting",level:2},{value:"12.1. \u683c\u5f0f\uff08Format\uff09",id:"121-\u683c\u5f0fformat",level:3},{value:"12.2. \u8f93\u51fa\u683c\u5f0f\uff08Output Formats\uff09",id:"122-\u8f93\u51fa\u683c\u5f0foutput-formats",level:3},{value:"12.3. \u6700\u4f4e\u4fe1\u606f\uff08Minimum Information\uff09",id:"123-\u6700\u4f4e\u4fe1\u606fminimum-information",level:3},{value:"12.3.1. \u5173\u952e\u5b57\u76f8\u5bf9\u4f4d\u7f6e\uff08Keyword Relative Location\uff09",id:"1231-\u5173\u952e\u5b57\u76f8\u5bf9\u4f4d\u7f6ekeyword-relative-location",level:4},{value:"12.3.2. \u5173\u952e\u5b57\u7edd\u5bf9\u4f4d\u7f6e\uff08Keyword Absolute Location\uff09",id:"1232-\u5173\u952e\u5b57\u7edd\u5bf9\u4f4d\u7f6ekeyword-absolute-location",level:4},{value:"12.3.3. \u5b9e\u4f8b\u4f4d\u7f6e\uff08Instance Location\uff09",id:"1233-\u5b9e\u4f8b\u4f4d\u7f6einstance-location",level:4},{value:"12.3.4. \u9519\u8bef\u6216\u6ce8\u89e3\uff08Error or Annotation\uff09",id:"1234-\u9519\u8bef\u6216\u6ce8\u89e3error-or-annotation",level:4},{value:"12.3.5. \u5d4c\u5957\u7ed3\u679c\uff08Nested Results\uff09",id:"1235-\u5d4c\u5957\u7ed3\u679cnested-results",level:4},{value:"12.4. \u8f93\u51fa\u7ed3\u6784\uff08Output Structure\uff09",id:"124-\u8f93\u51fa\u7ed3\u6784output-structure",level:3},{value:"12.4.1. \u6807\u5fd7\uff08Flag\uff09",id:"1241-\u6807\u5fd7flag",level:4},{value:"12.4.2. \u57fa\u672c\uff08Basic\uff09",id:"1242-\u57fa\u672cbasic",level:4},{value:"12.4.3. \u8be6\u7ec6\uff08Detailed\uff09",id:"1243-\u8be6\u7ec6detailed",level:4},{value:"12.4.4. \u8be6\u7ec6\uff08Verbose\uff09",id:"1244-\u8be6\u7ec6verbose",level:4},{value:"12.4.5. \u8f93\u51fa\u9a8c\u8bc1\u6a21\u5f0f\uff08Output validation schemas\uff09",id:"1245-\u8f93\u51fa\u9a8c\u8bc1\u6a21\u5f0foutput-validation-schemas",level:4},{value:"13. \u5b89\u5168\u6027\u8003\u8651\uff08Security Considerations\uff09",id:"13-\u5b89\u5168\u6027\u8003\u8651security-considerations",level:2},{value:"14. IANA Considerations\uff08\u7565\uff0c\u89c1\u539f\u6587\uff09",id:"14-iana-considerations\u7565\u89c1\u539f\u6587",level:2},{value:"15. References\uff08\u7565\uff0c\u89c1\u539f\u6587\uff09",id:"15-references\u7565\u89c1\u539f\u6587",level:2},{value:"Appendix\uff08\u7565\uff0c\u89c1\u539f\u6587\uff09",id:"appendix\u7565\u89c1\u539f\u6587",level:2}],d={toc:c},p="wrapper";function h(e){let{components:t,...a}=e;return(0,i.kt)(p,(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"json-schema-\u89c4\u8303"},"JSON Schema \u89c4\u8303"),(0,i.kt)("p",null,"\u672c\u6587\u4f7f\u7528 GPT-4 \u7ffb\u8bd1\uff0c\u505a\u4e86\u4e00\u4e9b\u5fae\u8c03\u548c\u6392\u7248\u4f18\u5316\uff0c\u539f\u6587\uff1a",(0,i.kt)("a",{parentName:"p",href:"https://json-schema.org/draft/2020-12/json-schema-core.html"},"JSON Schema: A Media Type for Describing JSON Documents"),"."),(0,i.kt)("h2",{id:"1-\u5f15\u8a00introduction"},"1. \u5f15\u8a00\uff08Introduction\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"JSON Schema is a JSON media type for defining the structure of JSON data. JSON Schema is intended to define validation, documentation, hyperlink navigation, and interaction control of JSON data."),(0,i.kt)("p",null,"This specification defines JSON Schema core terminology and mechanisms, including pointing to another JSON Schema by reference, dereferencing a JSON Schema reference, specifying the dialect being used, specifying a dialect's vocabulary requirements, and defining the expected output."),(0,i.kt)("p",null,"Other specifications define the vocabularies that perform assertions about validation, linking, annotation, navigation, and interaction.")),(0,i.kt)("p",null,"JSON \u6a21\u5f0f\uff08JSON Schema\uff09\u662f\u4e00\u79cd\u7528\u4e8e\u5b9a\u4e49 JSON \u6570\u636e\u7ed3\u6784\u7684 JSON \u5a92\u4f53\u7c7b\u578b\u3002JSON Schema \u65e8\u5728\u5b9a\u4e49 JSON \u6570\u636e\u7684\u9a8c\u8bc1\u3001\u6587\u6863\u3001\u8d85\u94fe\u63a5\u5bfc\u822a\u548c\u4ea4\u4e92\u63a7\u5236\u3002"),(0,i.kt)("p",null,"\u672c\u89c4\u8303\u5b9a\u4e49\u4e86 JSON Schema \u6838\u5fc3\u672f\u8bed\u548c\u673a\u5236\uff0c\u5305\u62ec\u901a\u8fc7\u5f15\u7528\u6307\u5411\u53e6\u4e00\u4e2a JSON Schema\u3001\u53d6\u6d88\u5f15\u7528 JSON Schema \u5f15\u7528\u3001\u6307\u5b9a\u6b63\u5728\u4f7f\u7528\u7684\u65b9\u8a00\uff08dialect\uff09\u3001\u6307\u5b9a\u65b9\u8a00\u7684\u8bcd\u6c47\u8868\uff08vocabulary\uff09\u8981\u6c42\u4ee5\u53ca\u5b9a\u4e49\u9884\u671f\u8f93\u51fa\u3002"),(0,i.kt)("p",null,"\u5176\u5b83\u89c4\u8303\u5b9a\u4e49\u4e86\u7528\u4e8e\u6267\u884c\u5173\u4e8e\u9a8c\u8bc1\uff08validation\uff09\u3001\u94fe\u63a5\uff08linking\uff09\u3001\u6ce8\u91ca\uff08annotation\uff09\u3001\u5bfc\u822a\uff08navigation\uff09\u548c\u4ea4\u4e92\uff08interaction\uff09\u7684\u65ad\u8a00\u7684\u8bcd\u6c47\u8868\u3002"),(0,i.kt)("h2",{id:"2-\u7ea6\u5b9a\u548c\u672f\u8bedconventions-and-terminology"},"2. \u7ea6\u5b9a\u548c\u672f\u8bed\uff08Conventions and Terminology\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in ',(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc2119"},"RFC 2119"),"."),(0,i.kt)("p",null,'The terms "JSON", "JSON text", "JSON value", "member", "element", "object", "array", "number", "string", "boolean", "true", "false", and "null" in this document are to be interpreted as defined in ',(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc8259"},"RFC 8259"),".")),(0,i.kt)("p",null,'\u672c\u6587\u6863\u4e2d\u7684\u5173\u952e\u8bcd "\u5fc5\u987b"\uff08MUST\uff09\uff0c"\u5fc5\u987b\u4e0d"\uff08MUST NOT\uff09\uff0c"\u8981\u6c42"\uff08REQUIRED\uff09\uff0c"\u5e94"\uff08SHALL\uff09\uff0c"\u4e0d\u5e94"\uff08SHALL NOT\uff09\uff0c"\u5e94\u8be5"\uff08SHOULD\uff09\uff0c"\u4e0d\u5e94\u8be5"\uff08SHOULD NOT\uff09\uff0c"\u5efa\u8bae"\uff08RECOMMENDED\uff09\uff0c"\u53ef\u4ee5"\uff08MAY\uff09\u548c "\u53ef\u9009"\uff08OPTIONAL\uff09\u5e94\u6309\u7167 ',(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc2119"},"RFC 2119")," \u4e2d\u7684\u63cf\u8ff0\u8fdb\u884c\u89e3\u91ca\u3002"),(0,i.kt)("p",null,'\u672c\u6587\u6863\u4e2d\u7684\u672f\u8bed "JSON"\u3001"JSON text"\u3001"JSON value"\u3001"member"\u3001"element"\u3001"object"\u3001"array"\u3001"number"\u3001"string"\u3001"boolean"\u3001"true"\u3001"false" \u548c "null" \u5e94\u6309\u7167 ',(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc8259"},"RFC 8259")," \u4e2d\u7684\u5b9a\u4e49\u8fdb\u884c\u89e3\u91ca\u3002"),(0,i.kt)("h2",{id:"3-\u6982\u8ff0overview"},"3. \u6982\u8ff0\uff08Overview\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'This document proposes a new media type "application/schema+json" to identify a JSON Schema for describing JSON data. It also proposes a further optional media type, "application/schema-instance+json", to provide additional integration features. JSON Schemas are themselves JSON documents. This, and related specifications, define keywords allowing authors to describe JSON data in several ways.'),(0,i.kt)("p",null,"JSON Schema uses keywords to assert constraints on JSON instances or annotate those instances with additional information. Additional keywords are used to apply assertions and annotations to more complex JSON data structures, or based on some sort of condition."),(0,i.kt)("p",null,"To facilitate re-use, keywords can be organized into vocabularies. A vocabulary consists of a list of keywords, together with their syntax and semantics. A dialect is defined as a set of vocabularies and their required support identified in a meta-schema."),(0,i.kt)("p",null,"JSON Schema can be extended either by defining additional vocabularies, or less formally by defining additional keywords outside of any vocabulary. Unrecognized individual keywords simply have their values collected as annotations, while the behavior with respect to an unrecognized vocabulary can be controlled when declaring which vocabularies are in use."),(0,i.kt)("p",null,'This document defines a core vocabulary that MUST be supported by any implementation, and cannot be disabled. Its keywords are each prefixed with a "$" character to emphasize their required nature. This vocabulary is essential to the functioning of the "application/schema+json" media type, and is used to bootstrap the loading of other vocabularies.'),(0,i.kt)("p",null,"Additionally, this document defines a RECOMMENDED vocabulary of keywords for applying subschemas conditionally, and for applying subschemas to the contents of objects and arrays. Either this vocabulary or one very much like it is required to write schemas for non-trivial JSON instances, whether those schemas are intended for assertion validation, annotation, or both. While not part of the required core vocabulary, for maximum interoperability this additional vocabulary is included in this document and its use is strongly encouraged."),(0,i.kt)("p",null,"Further vocabularies for purposes such as structural validation or hypermedia annotation are defined in other documents. These other documents each define a dialect collecting the standard sets of vocabularies needed to write schemas for that document's purpose.")),(0,i.kt)("p",null,"\u672c\u6587\u6863\u63d0\u8bae\u4e00\u79cd\u65b0\u7684\u5a92\u4f53\u7c7b\u578b ",(0,i.kt)("inlineCode",{parentName:"p"},"application/schema+json"),"\uff0c\u7528\u4e8e\u6807\u8bc6\u63cf\u8ff0 JSON \u6570\u636e\u7684 JSON Schema \u3002\u5b83\u8fd8\u63d0\u8bae\u4e86\u53e6\u4e00\u79cd\u53ef\u9009\u7684\u5a92\u4f53\u7c7b\u578b ",(0,i.kt)("inlineCode",{parentName:"p"},"application/schema-instance+json"),"\uff0c\u4ee5\u63d0\u4f9b\u5176\u5b83\u96c6\u6210\u529f\u80fd\u3002JSON Schema \u672c\u8eab\u662f JSON \u6587\u6863\u3002\u6b64\u7c7b\u53ca\u76f8\u5173\u89c4\u8303\u5b9a\u4e49\u4e86\u5141\u8bb8\u4f5c\u8005\u4ee5\u591a\u79cd\u65b9\u5f0f\u63cf\u8ff0 JSON \u6570\u636e\u7684\u5173\u952e\u5b57\u3002"),(0,i.kt)("p",null,"JSON Schema \u4f7f\u7528\u5173\u952e\u5b57\uff08keywords\uff09\u5bf9 JSON \u5b9e\u4f8b\u8fdb\u884c\u7ea6\u675f\u6216\u7528\u9644\u52a0\u4fe1\u606f\u5bf9\u8fd9\u4e9b\u5b9e\u4f8b\u8fdb\u884c\u6ce8\u91ca\u3002\u5176\u5b83\u5173\u952e\u5b57\u7528\u4e8e\u5bf9\u66f4\u590d\u6742\u7684 JSON \u6570\u636e\u7ed3\u6784\u5e94\u7528\u65ad\u8a00\uff08assertions\uff09\u548c\u6ce8\u91ca\uff08annotations\uff09\uff0c\u6216\u57fa\u4e8e\u67d0\u79cd\u6761\u4ef6\u3002"),(0,i.kt)("p",null,"\u4e3a\u4e86\u4fbf\u4e8e\u91cd\u7528\uff0c\u5173\u952e\u5b57\u53ef\u4ee5\u7ec4\u7ec7\u6210\u8bcd\u6c47\u8868\uff08vocabularies\uff09\u3002\u4e00\u4e2a\u8bcd\u6c47\u8868\u7531\u4e00\u7ec4\u5173\u952e\u5b57\u53ca\u5176\u8bed\u6cd5\u548c\u8bed\u4e49\u7ec4\u6210\u3002\u4e00\u79cd\u65b9\u8a00\uff08dialect\uff09\u88ab\u5b9a\u4e49\u4e3a\u4e00\u7ec4\u8bcd\u6c47\u8868\u53ca\u5176\u5728 meta-schema \u4e2d\u786e\u5b9a\u7684\u5fc5\u987b\u652f\u6301\u3002"),(0,i.kt)("p",null,"JSON Schema \u53ef\u4ee5\u901a\u8fc7\u5b9a\u4e49\u989d\u5916\u7684\u8bcd\u6c47\u8868\u6216\u8005\u5728\u8bcd\u6c47\u8868\u4e4b\u5916\u975e\u6b63\u5f0f\u5730\u5b9a\u4e49\u989d\u5916\u7684\u5173\u952e\u5b57\u6765\u6269\u5c55\u3002\u65e0\u6cd5\u8bc6\u522b\u7684\u5355\u4e2a\u5173\u952e\u5b57\u4f1a\u5c06\u5176\u503c\u4f5c\u4e3a\u6ce8\u91ca\u6536\u96c6\uff0c\u800c\u5728\u58f0\u660e\u6b63\u5728\u4f7f\u7528\u7684\u8bcd\u6c47\u8868\u65f6\uff0c\u53ef\u4ee5\u63a7\u5236\u5bf9\u65e0\u6cd5\u8bc6\u522b\u7684\u8bcd\u6c47\u8868\u7684\u884c\u4e3a\u3002"),(0,i.kt)("p",null,"\u672c\u6587\u6863\u5b9a\u4e49\u4e86\u4e00\u4e2a\u6838\u5fc3\u8bcd\u6c47\u8868\uff0c\u5fc5\u987b\uff08MUST\uff09\u7531\u4efb\u4f55\u5b9e\u73b0\uff08implementation\uff09\u652f\u6301\uff0c\u5e76\u4e14\u4e0d\u80fd\u88ab\u7981\u7528\u3002\u5176\u5173\u952e\u5b57\u90fd\u4ee5 ",(0,i.kt)("inlineCode",{parentName:"p"},"$")," \u5b57\u7b26\u4e3a\u524d\u7f00\uff0c\u4ee5\u5f3a\u8c03\u5176\u5fc5\u9700\u6027\u3002\u8fd9\u4e2a\u8bcd\u6c47\u8868\u5bf9\u4e8e ",(0,i.kt)("inlineCode",{parentName:"p"},"application/schema+json")," \u5a92\u4f53\u7c7b\u578b\u7684\u529f\u80fd\u81f3\u5173\u91cd\u8981\uff0c\u5e76\u7528\u4e8e\u5f15\u5bfc\u5176\u5b83\u8bcd\u6c47\u8868\u7684\u52a0\u8f7d\u3002"),(0,i.kt)("p",null,"\u6b64\u5916\uff0c\u672c\u6587\u6863\u5b9a\u4e49\u4e86\u4e00\u4e2a\u5efa\u8bae\uff08RECOMMENDED\uff09\u7684\u5173\u952e\u5b57\u8bcd\u6c47\u8868\uff0c\u7528\u4e8e\u6709\u6761\u4ef6\u5730\u5e94\u7528 subschemas\uff0c\u4ee5\u53ca\u5c06 subschemas \u5e94\u7528\u4e8e\u5bf9\u8c61\u548c\u6570\u7ec4\u7684\u5185\u5bb9\u3002\u4e3a\u4e86\u7f16\u5199\u7528\u4e8e\u65ad\u8a00\u9a8c\u8bc1\u3001\u6ce8\u91ca\u6216\u4e24\u8005\u517c\u800c\u6709\u4e4b\u7684\u975e\u5e73\u51e1 JSON \u5b9e\u4f8b\u7684 JSON Schema\uff0c\u9700\u8981\u4f7f\u7528\u8fd9\u4e2a\u8bcd\u6c47\u8868\u6216\u7c7b\u4f3c\u7684\u8bcd\u6c47\u8868\u3002\u867d\u7136\u4e0d\u662f\u5fc5\u9700\u7684\u6838\u5fc3\u8bcd\u6c47\u8868\u7684\u4e00\u90e8\u5206\uff0c\u4f46\u4e3a\u4e86\u6700\u5927\u7684\u4e92\u64cd\u4f5c\u6027\uff0c\u672c\u6587\u6863\u5305\u542b\u4e86\u8fd9\u4e2a\u9644\u52a0\u8bcd\u6c47\u8868\uff0c\u5e76\u5f3a\u70c8\u63a8\u8350\u4f7f\u7528\u3002"),(0,i.kt)("p",null,"\u5176\u5b83\u6587\u6863\u4e2d\u5b9a\u4e49\u4e86\u7528\u4e8e\u7ed3\u6784\u9a8c\u8bc1\u6216\u8d85\u5a92\u4f53\u6ce8\u91ca\u7b49\u76ee\u7684\u7684\u66f4\u591a\u8bcd\u6c47\u8868\u3002\u8fd9\u4e9b\u5176\u5b83\u6587\u6863\u4e2d\u7684\u6bcf\u4e00\u4e2a\u90fd\u5b9a\u4e49\u4e86\u4e00\u4e2a\u65b9\u8a00\uff0c\u6536\u96c6\u7f16\u5199\u7528\u4e8e\u8be5\u6587\u6863\u76ee\u7684\u7684 JSON Schema \u6240\u9700\u7684\u6807\u51c6\u8bcd\u6c47\u8868\u96c6\u5408\u3002"),(0,i.kt)("h2",{id:"4-\u5b9a\u4e49definitions"},"4. \u5b9a\u4e49\uff08Definitions\uff09"),(0,i.kt)("h3",{id:"41-json-\u6587\u6863"},"4.1 JSON \u6587\u6863"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"A JSON document is an information resource (series of octets) described by the application/json media type."),(0,i.kt)("p",null,'In JSON Schema, the terms "JSON document", "JSON text", and "JSON value" are interchangeable because of the data model it defines.'),(0,i.kt)("p",null,"JSON Schema is only defined over JSON documents. However, any document or memory structure that can be parsed into or processed according to the JSON Schema data model can be interpreted against a JSON Schema, including media types like ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc8949"},"CBOR"),".")),(0,i.kt)("p",null,"JSON \u6587\u6863\u662f\u4e00\u4e2a\u7531 ",(0,i.kt)("inlineCode",{parentName:"p"},"application/json")," \u5a92\u4f53\u7c7b\u578b\u63cf\u8ff0\u7684\u4fe1\u606f\u8d44\u6e90\uff08\u4e00\u4e32\u5b57\u8282\u6570\u636e\uff09\u3002"),(0,i.kt)("p",null,'\u5728 JSON Schema \u4e2d\uff0c\u672f\u8bed "JSON document"\u3001"JSON text" \u548c "JSON value" \u662f\u53ef\u4ee5\u4e92\u6362\u7684\uff0c\u56e0\u4e3a\u5b83\u5b9a\u4e49\u4e86\u6570\u636e\u6a21\u578b\uff08data model\uff09\u3002'),(0,i.kt)("p",null,"JSON Schema \u53ea\u9488\u5bf9 JSON \u6587\u6863\u8fdb\u884c\u5b9a\u4e49\u3002\u7136\u800c\uff0c\u4efb\u4f55\u53ef\u4ee5\u89e3\u6790\u4e3a JSON Schema \u6570\u636e\u6a21\u578b\u7684\u6587\u6863\u6216\u5185\u5b58\u7ed3\u6784\u90fd\u53ef\u4ee5\u6839\u636e JSON Schema \u8fdb\u884c\u89e3\u91ca\uff0c\u5305\u62ec\u50cf ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc8949"},"CBOR")," \u8fd9\u6837\u7684\u5a92\u4f53\u7c7b\u578b\u3002"),(0,i.kt)("h3",{id:"42-\u5b9e\u4f8binstance"},"4.2 \u5b9e\u4f8b\uff08Instance\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'A JSON document to which a schema is applied is known as an "instance".'),(0,i.kt)("p",null,'JSON Schema is defined over "application/json" or compatible documents, including media types with the "+json" structured syntax suffix.'),(0,i.kt)("p",null,'Among these, this specification defines the "application/schema-instance+json" media type which defines handling for fragments in the URI.')),(0,i.kt)("p",null,'\u5e94\u7528\u4e86\u4e00\u4e2a\u6a21\u5f0f\uff08schema\uff09\u7684 JSON \u6587\u6863\u88ab\u79f0\u4e3a "\u5b9e\u4f8b"\u3002'),(0,i.kt)("p",null,"JSON Schema \u662f\u9488\u5bf9 ",(0,i.kt)("inlineCode",{parentName:"p"},"application/json")," \u6216\u517c\u5bb9\u6587\u6863\u5b9a\u4e49\u7684\uff0c\u5305\u62ec\u5177\u6709 ",(0,i.kt)("inlineCode",{parentName:"p"},"+json")," \u7ed3\u6784\u5316\u8bed\u6cd5\u540e\u7f00\u7684\u5a92\u4f53\u7c7b\u578b\u3002"),(0,i.kt)("p",null,"\u5728\u8fd9\u4e9b\u5a92\u4f53\u7c7b\u578b\u4e2d\uff0c\u672c\u89c4\u8303\u5b9a\u4e49\u4e86 ",(0,i.kt)("inlineCode",{parentName:"p"},"application/schema-instance+json")," \u5a92\u4f53\u7c7b\u578b\uff0c\u5b83\u4e3a URI \u4e2d\u7684\u7247\u6bb5\u5b9a\u4e49\u4e86\u5904\u7406\u89c4\u5219\u3002"),(0,i.kt)("h4",{id:"421-\u5b9e\u4f8b\u6570\u636e\u6a21\u578binstance-data-model"},"4.2.1 \u5b9e\u4f8b\u6570\u636e\u6a21\u578b\uff08Instance Data Model\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'JSON Schema interprets documents according to a data model. A JSON value interpreted according to this data model is called an "instance".'),(0,i.kt)("p",null,"An instance has one of six primitive types, and a range of possible values depending on the type:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},'null: A JSON "null" value'),(0,i.kt)("li",{parentName:"ul"},'boolean: A "true" or "false" value, from the JSON "true" or "false" value'),(0,i.kt)("li",{parentName:"ul"},'object: An unordered set of properties mapping a string to an instance, from the JSON "object" value'),(0,i.kt)("li",{parentName:"ul"},'array: An ordered list of instances, from the JSON "array" value'),(0,i.kt)("li",{parentName:"ul"},'number: An arbitrary-precision, base-10 decimal number value, from the JSON "number" value'),(0,i.kt)("li",{parentName:"ul"},'string: A string of Unicode code points, from the JSON "string" value')),(0,i.kt)("p",null,"Whitespace and formatting concerns, including different lexical representations of numbers that are equal within the data model, are thus outside the scope of JSON Schema. JSON Schema vocabularies (Section 8.1) that wish to work with such differences in lexical representations SHOULD define keywords to precisely interpret formatted strings within the data model rather than relying on having the original JSON representation Unicode characters available."),(0,i.kt)("p",null,"Since an object cannot have two properties with the same key, behavior for a JSON document that tries to define two properties with the same key in a single object is undefined."),(0,i.kt)("p",null,'Note that JSON Schema vocabularies are free to define their own extended type system. This should not be confused with the core data model types defined here. As an example, "integer" is a reasonable type for a vocabulary to define as a value for a keyword, but the data model makes no distinction between integers and other numbers.')),(0,i.kt)("p",null,'JSON Schema \u6839\u636e\u6570\u636e\u6a21\u578b\u89e3\u91ca\u6587\u6863\u3002\u6839\u636e\u8fd9\u4e2a\u6570\u636e\u6a21\u578b\u89e3\u91ca\u7684 JSON \u503c\u88ab\u79f0\u4e3a "\u5b9e\u4f8b"\u3002'),(0,i.kt)("p",null,"\u5b9e\u4f8b\u6709\u516d\u79cd\u57fa\u672c\u7c7b\u578b\uff08primitive types\uff09\uff0c\u53d6\u51b3\u4e8e\u7c7b\u578b\uff0c\u53ef\u4ee5\u6709\u4e00\u7cfb\u5217\u53ef\u80fd\u7684\u503c\uff1a"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"null"),'\uff1aJSON "null" \u503c'),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"boolean"),'\uff1aJSON "true" \u6216 "false" \u503c\u7684 "true" \u6216 "false" \u503c'),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"object"),'\uff1a\u4e00\u4e2a\u5c06\u5b57\u7b26\u4e32\u6620\u5c04\u5230\u5b9e\u4f8b\u7684\u65e0\u5e8f\u5c5e\u6027\u96c6\uff0c\u6765\u81ea JSON "object" \u503c'),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"array"),'\uff1a\u5b9e\u4f8b\u7684\u6709\u5e8f\u5217\u8868\uff0c\u6765\u81ea JSON "array" \u503c'),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"number"),'\uff1a\u4efb\u610f\u7cbe\u5ea6\u3001\u57fa\u6570\u4e3a10\u7684\u5341\u8fdb\u5236\u6570\u5b57\u503c\uff0c\u6765\u81ea JSON "number" \u503c'),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"string"),'\uff1aUnicode \u5b57\u7b26\u4e32\uff0c\u6765\u81ea JSON "string" \u503c')),(0,i.kt)("p",null,"\u56e0\u6b64\uff0c\u7a7a\u767d\u548c\u683c\u5f0f\u95ee\u9898\uff08\u4f8b\u5982\uff0c\u6570\u636e\u6a21\u578b\u4e2d\u76f8\u7b49\u7684\u6570\u5b57\u7684\u4e0d\u540c\u8bcd\u6cd5\u8868\u793a\uff09\u4e0d\u5728 JSON Schema \u7684\u8303\u56f4\u5185\u3002\u5e0c\u671b\u5904\u7406\u8bcd\u6cd5\u8868\u793a\u5dee\u5f02\u7684 JSON Schema \u8bcd\u6c47\u8868\uff08\u7b2c 8.1 \u8282\uff09\u5e94\u8be5\u5b9a\u4e49\u5173\u952e\u5b57\uff0c\u4ee5\u4fbf\u5728\u6570\u636e\u6a21\u578b\u4e2d\u7cbe\u786e\u89e3\u91ca\u683c\u5f0f\u5316\u5b57\u7b26\u4e32\uff0c\u800c\u4e0d\u662f\u4f9d\u8d56\u4e8e\u539f\u59cb JSON \u8868\u793a\u7684 Unicode \u5b57\u7b26\u3002"),(0,i.kt)("p",null,"\u7531\u4e8e\u5bf9\u8c61\u4e0d\u80fd\u6709\u4e24\u4e2a\u5177\u6709\u76f8\u540c\u952e\u7684\u5c5e\u6027\uff0c\u6240\u4ee5\u5728\u5355\u4e2a\u5bf9\u8c61\u4e2d\u5c1d\u8bd5\u5b9a\u4e49\u4e24\u4e2a\u5177\u6709\u76f8\u540c\u952e\u7684\u5c5e\u6027\u7684 JSON \u6587\u6863\u7684\u884c\u4e3a\u662f\u672a\u5b9a\u4e49\u7684\u3002"),(0,i.kt)("p",null,'\u8bf7\u6ce8\u610f\uff0cJSON Schema \u8bcd\u6c47\u8868\u53ef\u4ee5\u81ea\u7531\u5730\u5b9a\u4e49\u81ea\u5df1\u7684\u6269\u5c55\u7c7b\u578b\u7cfb\u7edf\uff08type system\uff09\u3002\u8fd9\u4e0d\u5e94\u4e0e\u6b64\u5904\u5b9a\u4e49\u7684\u6838\u5fc3\u6570\u636e\u6a21\u578b\u7c7b\u578b\u6df7\u6dc6\u3002\u4f8b\u5982\uff0c"integer" \u662f\u4e00\u4e2a\u5408\u7406\u7684\u7c7b\u578b\uff0c\u8bcd\u6c47\u8868\u53ef\u4ee5\u5c06\u5176\u5b9a\u4e49\u4e3a\u5173\u952e\u5b57\u7684\u503c\uff0c\u4f46\u6570\u636e\u6a21\u578b\u4e0d\u533a\u5206\u6574\u6570\u548c\u5176\u5b83\u6570\u5b57\u3002'),(0,i.kt)("h4",{id:"422-\u5b9e\u4f8b\u76f8\u7b49instance-equality"},"4.2.2 \u5b9e\u4f8b\u76f8\u7b49\uff08Instance Equality\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"Two JSON instances are said to be equal if and only if they are of the same type and have the same value according to the data model. Specifically, this means:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"both are null; or\nboth are true; or\nboth are false; or\nboth are strings, and are the same codepoint-for-codepoint; or\nboth are numbers, and have the same mathematical value; or\nboth are arrays, and have an equal value item-for-item; or\nboth are objects, and each property in one has exactly one property with a key equal to the other's, and that other property has an equal value.\n")),(0,i.kt)("p",null,"Implied in this definition is that arrays must be the same length, objects must have the same number of members, properties in objects are unordered, there is no way to define multiple properties with the same key, and mere formatting differences (indentation, placement of commas, trailing zeros) are insignificant.")),(0,i.kt)("p",null,"\u5982\u679c\u4e24\u4e2a JSON \u5b9e\u4f8b\u5177\u6709\u76f8\u540c\u7684\u7c7b\u578b\uff0c\u5e76\u6839\u636e\u6570\u636e\u6a21\u578b\u5177\u6709\u76f8\u540c\u7684\u503c\uff0c\u5219\u5b83\u4eec\u88ab\u8ba4\u4e3a\u662f\u76f8\u7b49\u7684\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u8fd9\u610f\u5473\u7740\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"\u4e24\u8005\u90fd\u662f null\uff1b\u6216\n\u4e24\u8005\u90fd\u662f true\uff1b\u6216\n\u4e24\u8005\u90fd\u662f false\uff1b\u6216\n\u4e24\u8005\u90fd\u662f\u5b57\u7b26\u4e32\uff0c\u5e76\u4e14\u5728\u6bcf\u4e2a\u4ee3\u7801\u70b9\uff08codepoint\uff09\u4e0a\u76f8\u540c\uff1b\u6216\n\u4e24\u8005\u90fd\u662f\u6570\u5b57\uff0c\u5e76\u5177\u6709\u76f8\u540c\u7684\u6570\u5b66\u503c\uff1b\u6216\n\u4e24\u8005\u90fd\u662f\u6570\u7ec4\uff0c\u5e76\u4e14\u6309\u9879\u5177\u6709\u76f8\u7b49\u7684\u503c\uff1b\u6216\n\u4e24\u8005\u90fd\u662f\u5bf9\u8c61\uff0c\u5e76\u4e14\u5176\u4e2d\u4e00\u4e2a\u5bf9\u8c61\u7684\u6bcf\u4e2a\u5c5e\u6027\u90fd\u6709\u4e00\u4e2a\u952e\u7b49\u4e8e\u53e6\u4e00\u4e2a\u5bf9\u8c61\u7684\u5c5e\u6027\uff0c\u4e14\u53e6\u4e00\u4e2a\u5c5e\u6027\u5177\u6709\u76f8\u7b49\u7684\u503c\n")),(0,i.kt)("p",null,"\u8fd9\u4e2a\u5b9a\u4e49\u6697\u793a\uff0c\u6570\u7ec4\u5fc5\u987b\u5177\u6709\u76f8\u540c\u7684\u957f\u5ea6\uff0c\u5bf9\u8c61\u5fc5\u987b\u5177\u6709\u76f8\u540c\u6570\u91cf\u7684\u6210\u5458\uff0c\u5bf9\u8c61\u4e2d\u7684\u5c5e\u6027\u662f\u65e0\u5e8f\u7684\uff0c\u4e0d\u80fd\u5b9a\u4e49\u5177\u6709\u76f8\u540c\u952e\u7684\u591a\u4e2a\u5c5e\u6027\uff0c\u4ec5\u683c\u5f0f\u5dee\u5f02\uff08\u7f29\u8fdb\u3001\u9017\u53f7\u4f4d\u7f6e\u3001\u5c3e\u968f\u96f6\uff09\u662f\u65e0\u5173\u7d27\u8981\u7684\u3002"),(0,i.kt)("h4",{id:"423-\u975e-json-\u5b9e\u4f8bnon-json-instances"},"4.2.3 \u975e JSON \u5b9e\u4f8b\uff08Non-JSON Instances\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"It is possible to use JSON Schema with a superset of the JSON Schema data model, where an instance may be outside any of the six JSON data types."),(0,i.kt)("p",null,"In this case, annotations still apply; but most validation keywords will not be useful, as they will always pass or always fail."),(0,i.kt)("p",null,'A custom vocabulary may define support for a superset of the core data model. The schema itself may only be expressible in this superset; for example, to make use of the "const" keyword.')),(0,i.kt)("p",null,"\u53ef\u4ee5\u5728 JSON Schema \u6570\u636e\u6a21\u578b\u7684\u8d85\u96c6\uff08superset\uff09\u4e2d\u4f7f\u7528 JSON Schema\uff0c\u5176\u4e2d\u5b9e\u4f8b\u53ef\u80fd\u8d85\u51fa JSON \u7684\u516d\u79cd\u6570\u636e\u7c7b\u578b\u4e4b\u5916\u3002"),(0,i.kt)("p",null,"\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6ce8\u91ca\u4ecd\u7136\u9002\u7528\uff1b\u4f46\u5927\u591a\u6570\u9a8c\u8bc1\u5173\u952e\u5b57\u53ef\u80fd\u6ca1\u6709\u7528\u5904\uff0c\u56e0\u4e3a\u5b83\u4eec\u603b\u662f\u901a\u8fc7\u6216\u603b\u662f\u5931\u8d25\u3002"),(0,i.kt)("p",null,"\u81ea\u5b9a\u4e49\u8bcd\u6c47\u8868\u53ef\u4ee5\u5b9a\u4e49\u5bf9\u6838\u5fc3\u6570\u636e\u6a21\u578b\u7684\u8d85\u96c6\u7684\u652f\u6301\u3002\u6a21\u5f0f\u672c\u8eab\u53ef\u80fd\u53ea\u80fd\u5728\u8fd9\u4e2a\u8d85\u96c6\u4e2d\u8868\u793a\uff1b\u4f8b\u5982\uff0c\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"const")," \u5173\u952e\u5b57\u3002"),(0,i.kt)("h3",{id:"43-json-schema-\u6587\u6863"},"4.3. JSON Schema \u6587\u6863"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'A JSON Schema document, or simply a schema, is a JSON document used to describe an instance. A schema can itself be interpreted as an instance, but SHOULD always be given the media type "application/schema+json" rather than "application/schema-instance+json". The "application/schema+json" media type is defined to offer a superset of the fragment identifier syntax and semantics provided by "application/schema-instance+json".'),(0,i.kt)("p",null,"A JSON Schema MUST be an object or a boolean.")),(0,i.kt)("p",null,"JSON Schema \u6587\u6863\uff0c\u6216\u7b80\u79f0\u4e3a\u6a21\u5f0f\uff0c\u662f\u7528\u4e8e\u63cf\u8ff0\u5b9e\u4f8b\u7684 JSON \u6587\u6863\u3002\u6a21\u5f0f\u672c\u8eab\u53ef\u4ee5\u88ab\u89e3\u91ca\u4e3a\u5b9e\u4f8b\uff0c\u4f46\u5e94\u59cb\u7ec8\u4f7f\u7528\u5a92\u4f53\u7c7b\u578b ",(0,i.kt)("inlineCode",{parentName:"p"},"application/schema+json")," \u800c\u4e0d\u662f ",(0,i.kt)("inlineCode",{parentName:"p"},"application/schema-instance+json"),"\u3002",(0,i.kt)("inlineCode",{parentName:"p"},"application/schema+json")," \u5a92\u4f53\u7c7b\u578b\u88ab\u5b9a\u4e49\u4e3a\u63d0\u4f9b\u8d85\u8fc7 ",(0,i.kt)("inlineCode",{parentName:"p"},"application/schema-instance+json")," \u63d0\u4f9b\u7684\u7247\u6bb5\u6807\u8bc6\u7b26\u8bed\u6cd5\u548c\u8bed\u4e49\u7684\u8d85\u96c6\u3002"),(0,i.kt)("p",null,"JSON Schema \u5fc5\u987b\u662f\u4e00\u4e2a\u5bf9\u8c61\uff08object\uff09\u6216\u5e03\u5c14\u503c\uff08boolean\uff09\u3002"),(0,i.kt)("h4",{id:"431-json-schema-\u5bf9\u8c61objects\u548c\u5173\u952e\u5b57keywords"},"4.3.1. JSON Schema \u5bf9\u8c61\uff08Objects\uff09\u548c\u5173\u952e\u5b57\uff08Keywords\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"Object properties that are applied to the instance are called keywords, or schema keywords. Broadly speaking, keywords fall into one of five categories:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"identifiers: control schema identification through setting a URI for the schema and/or changing how the base URI is determined\nassertions: produce a boolean result when applied to an instance\nannotations: attach information to an instance for application use\napplicators: apply one or more subschemas to a particular location in the instance, and combine or modify their results\nreserved locations: do not directly affect results, but reserve a place for a specific purpose to ensure interoperability\n")),(0,i.kt)("p",null,"Keywords may fall into multiple categories, although applicators SHOULD only produce assertion results based on their subschemas' results. They should not define additional constraints independent of their subschemas."),(0,i.kt)("p",null,"Keywords which are properties within the same schema object are referred to as adjacent keywords."),(0,i.kt)("p",null,"Extension keywords, meaning those defined outside of this document and its companions, are free to define other behaviors as well."),(0,i.kt)("p",null,"A JSON Schema MAY contain properties which are not schema keywords. Unknown keywords SHOULD be treated as annotations, where the value of the keyword is the value of the annotation."),(0,i.kt)("p",null,"An empty schema is a JSON Schema with no properties, or only unknown properties.")),(0,i.kt)("p",null,"\u5e94\u7528\u4e8e\u5b9e\u4f8b\u7684\u5bf9\u8c61\u5c5e\u6027\u79f0\u4e3a\u5173\u952e\u5b57\uff08keywords\uff09\u6216\u6a21\u5f0f\u5173\u952e\u5b57\uff08schema keywords\uff09\u3002\u5927\u81f4\u4e0a\uff0c\u5173\u952e\u5b57\u53ef\u5206\u4e3a\u4e94\u7c7b\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"\u6807\u8bc6\u7b26\uff08identifiers\uff09\uff1a\u901a\u8fc7\u4e3a\u6a21\u5f0f\u8bbe\u7f6e URI \u548c/\u6216\u66f4\u6539 base URI \u7684\u786e\u5b9a\u65b9\u5f0f\u6765\u63a7\u5236\u6a21\u5f0f\u8bc6\u522b\n\u65ad\u8a00\uff08assertions\uff09\uff1a\u5728\u5e94\u7528\u4e8e\u5b9e\u4f8b\u65f6\u4ea7\u751f\u5e03\u5c14\u7ed3\u679c\n\u6ce8\u89e3\uff08annotations\uff09\uff1a\u4e3a\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u9644\u52a0\u4fe1\u606f\u5230\u5b9e\u4f8b\n\u5e94\u7528\u5668\uff08applicators\uff09\uff1a\u5c06\u4e00\u4e2a\u6216\u591a\u4e2a\u5b50\u6a21\u5f0f\uff08subschemas\uff09\u5e94\u7528\u4e8e\u5b9e\u4f8b\u4e2d\u7684\u7279\u5b9a\u4f4d\u7f6e\uff0c\u5e76\u7ec4\u5408\u6216\u4fee\u6539\u5b83\u4eec\u7684\u7ed3\u679c\n\u4fdd\u7559\u4f4d\u7f6e\uff08reserved locations\uff09\uff1a\u4e0d\u76f4\u63a5\u5f71\u54cd\u7ed3\u679c\uff0c\u4f46\u4e3a\u786e\u4fdd\u4e92\u64cd\u4f5c\u6027\u4fdd\u7559\u4e00\u4e2a\u7279\u5b9a\u76ee\u7684\u7684\u4f4d\u7f6e\n")),(0,i.kt)("p",null,"\u5173\u952e\u5b57\u53ef\u80fd\u5c5e\u4e8e\u591a\u4e2a\u7c7b\u522b\uff0c\u5c3d\u7ba1\u5e94\u7528\u7a0b\u5e8f\u5e94\uff08SHOULD\uff09\u4ec5\u6839\u636e\u5176\u5b50\u6a21\u5f0f\u7684\u7ed3\u679c\u4ea7\u751f\u65ad\u8a00\u7ed3\u679c\u3002\u5b83\u4eec\u4e0d\u5e94\u5b9a\u4e49\u4e0e\u5176\u5b50\u6a21\u5f0f\u65e0\u5173\u7684\u5176\u5b83\u7ea6\u675f\u3002"),(0,i.kt)("p",null,"\u5728\u540c\u4e00\u6a21\u5f0f\u5bf9\u8c61\u4e2d\u7684\u5c5e\u6027\u7684\u5173\u952e\u5b57\u88ab\u79f0\u4e3a\u76f8\u90bb\u5173\u952e\u5b57\u3002"),(0,i.kt)("p",null,"\u6269\u5c55\u5173\u952e\u5b57\uff0c\u5373\u5728\u672c\u6587\u6863\u53ca\u5176\u9644\u4ef6\u4e4b\u5916\u5b9a\u4e49\u7684\u5173\u952e\u5b57\uff0c\u4e5f\u53ef\u4ee5\u81ea\u7531\u5b9a\u4e49\u5176\u5b83\u884c\u4e3a\u3002"),(0,i.kt)("p",null,"JSON Schema \u53ef\u80fd\uff08MAY\uff09\u5305\u542b\u975e\u6a21\u5f0f\u5173\u952e\u5b57\u7684\u5c5e\u6027\u3002\u672a\u77e5\u5173\u952e\u5b57\u5e94\uff08SHOULD\uff09\u88ab\u89c6\u4e3a\u6ce8\u89e3\uff0c\u5176\u4e2d\u5173\u952e\u5b57\u7684\u503c\u662f\u6ce8\u89e3\u7684\u503c\u3002"),(0,i.kt)("p",null,"\u7a7a\u6a21\u5f0f\u662f\u4e00\u4e2a\u6ca1\u6709\u5c5e\u6027\u6216\u53ea\u6709\u672a\u77e5\u5c5e\u6027\u7684 JSON Schema\u3002"),(0,i.kt)("h4",{id:"432-\u5e03\u5c14-json-schemas"},"4.3.2. \u5e03\u5c14 JSON Schemas"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'The boolean schema values "true" and "false" are trivial schemas that always produce themselves as assertion results, regardless of the instance value. They never produce annotation results.'),(0,i.kt)("p",null,'These boolean schemas exist to clarify schema author intent and facilitate schema processing optimizations. They behave identically to the following schema objects (where "not" is part of the subschema application vocabulary defined in this document).'),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"true: Always passes validation, as if the empty schema {}"),(0,i.kt)("li",{parentName:"ul"},'false: Always fails validation, as if the schema { "not": {} }')),(0,i.kt)("p",null,'While the empty schema object is unambiguous, there are many possible equivalents to the "false" schema. Using the boolean values ensures that the intent is clear to both human readers and implementations.')),(0,i.kt)("p",null,"\u5e03\u5c14\u6a21\u5f0f\u503c ",(0,i.kt)("inlineCode",{parentName:"p"},"true")," \u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"false")," \u662f\u59cb\u7ec8\u4ea7\u751f\u5b83\u4eec\u81ea\u8eab\u4f5c\u4e3a\u65ad\u8a00\u7ed3\u679c\u7684\u7b80\u5355\u6a21\u5f0f\uff0c\u65e0\u8bba\u5b9e\u4f8b\u503c\u5982\u4f55\u3002\u5b83\u4eec\u4ece\u4e0d\u4ea7\u751f\u6ce8\u89e3\u7ed3\u679c\u3002"),(0,i.kt)("p",null,"\u8fd9\u4e9b\u5e03\u5c14\u6a21\u5f0f\u5b58\u5728\u662f\u4e3a\u4e86\u6f84\u6e05\u6a21\u5f0f\u4f5c\u8005\u7684\u610f\u56fe\u5e76\u4fc3\u8fdb\u6a21\u5f0f\u5904\u7406\u4f18\u5316\u3002\u5b83\u4eec\u7684\u884c\u4e3a\u4e0e\u4ee5\u4e0b\u6a21\u5f0f\u5bf9\u8c61\u5b8c\u5168\u76f8\u540c\uff08\u5176\u4e2d ",(0,i.kt)("inlineCode",{parentName:"p"},"not")," \u662f\u672c\u6587\u6863\u4e2d\u5b9a\u4e49\u7684\u5b50\u6a21\u5f0f\u5e94\u7528\u8bcd\u6c47\u7684\u4e00\u90e8\u5206\uff09\u3002"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"true"),"\uff1a\u59cb\u7ec8\u901a\u8fc7\u9a8c\u8bc1\uff0c\u5c31\u50cf\u7a7a\u6a21\u5f0f ",(0,i.kt)("inlineCode",{parentName:"li"},"{}")," \u4e00\u6837"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"false"),"\uff1a\u59cb\u7ec8\u65e0\u6cd5\u901a\u8fc7\u9a8c\u8bc1\uff0c\u5c31\u50cf\u6a21\u5f0f ",(0,i.kt)("inlineCode",{parentName:"li"},'{ "not": {} }')," \u4e00\u6837")),(0,i.kt)("p",null,'\u867d\u7136\u7a7a\u6a21\u5f0f\u5bf9\u8c61\u662f\u660e\u786e\u7684\uff0c\u4f46\u4e0e "false" \u6a21\u5f0f\u7b49\u4ef7\u7684\u53ef\u80fd\u6709\u5f88\u591a\u3002\u4f7f\u7528\u5e03\u5c14\u503c\u786e\u4fdd\u610f\u56fe\u5bf9\u4eba\u7c7b\u9605\u8bfb\u8005\u548c\u5b9e\u73b0\u90fd\u662f\u6e05\u6670\u7684\u3002'),(0,i.kt)("h4",{id:"433-\u6a21\u5f0f\u8bcd\u6c47\u8868schema-vocabularies"},"4.3.3. \u6a21\u5f0f\u8bcd\u6c47\u8868\uff08Schema Vocabularies\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"A schema vocabulary, or simply a vocabulary, is a set of keywords, their syntax, and their semantics. A vocabulary is generally organized around a particular purpose. Different uses of JSON Schema, such as validation, hypermedia, or user interface generation, will involve different sets of vocabularies."),(0,i.kt)("p",null,"Vocabularies are the primary unit of re-use in JSON Schema, as schema authors can indicate what vocabularies are required or optional in order to process the schema. Since vocabularies are identified by URIs in the meta-schema, generic implementations can load extensions to support previously unknown vocabularies. While keywords can be supported outside of any vocabulary, there is no analogous mechanism to indicate individual keyword usage."),(0,i.kt)("p",null,"A schema vocabulary can be defined by anything from an informal description to a standards proposal, depending on the audience and interoperability expectations. In particular, in order to facilitate vocabulary use within non-public organizations, a vocabulary specification need not be published outside of its scope of use.")),(0,i.kt)("p",null,"\u6a21\u5f0f\u8bcd\u6c47\u8868\uff0c\u6216\u7b80\u79f0\u4e3a\u8bcd\u6c47\u8868\uff0c\u662f\u4e00\u7ec4\u5173\u952e\u5b57\u3001\u5b83\u4eec\u7684\u8bed\u6cd5\u548c\u8bed\u4e49\u3002\u8bcd\u6c47\u8868\u901a\u5e38\u56f4\u7ed5\u7279\u5b9a\u76ee\u7684\u7ec4\u7ec7\u3002JSON Schema \u7684\u4e0d\u540c\u7528\u9014\uff0c\u5982\u9a8c\u8bc1\u3001\u8d85\u5a92\u4f53\u6216\u7528\u6237\u754c\u9762\u751f\u6210\uff0c\u5c06\u6d89\u53ca\u4e0d\u540c\u7684\u8bcd\u6c47\u8868\u96c6\u5408\u3002"),(0,i.kt)("p",null,"\u8bcd\u6c47\u8868\u662f JSON Schema \u4e2d\u4e3b\u8981\u7684\u53ef\u91cd\u7528\u5355\u5143\uff0c\u56e0\u4e3a\u6a21\u5f0f\u4f5c\u8005\u53ef\u4ee5\u6307\u793a\u5904\u7406\u6a21\u5f0f\u6240\u9700\u6216\u53ef\u9009\u7684\u8bcd\u6c47\u8868\u3002\u7531\u4e8e\u5143\u6a21\u5f0f\uff08meta-schema\uff09\u4e2d\u7684\u8bcd\u6c47\u8868\u7531 URI \u6807\u8bc6\uff0c\u901a\u7528\u5b9e\u73b0\u53ef\u4ee5\u52a0\u8f7d\u6269\u5c55\u4ee5\u652f\u6301\u4ee5\u524d\u672a\u77e5\u7684\u8bcd\u6c47\u8868\u3002\u867d\u7136\u5173\u952e\u5b57\u53ef\u4ee5\u5728\u4efb\u4f55\u8bcd\u6c47\u8868\u4e4b\u5916\u5f97\u5230\u652f\u6301\uff0c\u4f46\u6ca1\u6709\u7c7b\u4f3c\u7684\u673a\u5236\u6765\u6307\u793a\u5355\u4e2a\u5173\u952e\u5b57\u7684\u4f7f\u7528\u3002"),(0,i.kt)("p",null,"\u6a21\u5f0f\u8bcd\u6c47\u8868\u53ef\u4ee5\u7531\u4ece\u975e\u6b63\u5f0f\u63cf\u8ff0\u5230\u6807\u51c6\u63d0\u6848\u7684\u4efb\u4f55\u5185\u5bb9\u5b9a\u4e49\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u53d7\u4f17\u548c\u4e92\u64cd\u4f5c\u6027\uff08interoperability\uff09\u671f\u671b\u3002\u7279\u522b\u662f\u4e3a\u4e86\u4fc3\u8fdb\u975e\u516c\u5171\u7ec4\u7ec7\uff08non-public organizations\uff09\u5185\u7684\u8bcd\u6c47\u8868\u4f7f\u7528\uff0c\u8bcd\u6c47\u8868\u89c4\u8303\u4e0d\u9700\u8981\u5728\u5176\u4f7f\u7528\u8303\u56f4\u4e4b\u5916\u53d1\u5e03\u3002"),(0,i.kt)("h4",{id:"434-\u5143\u6a21\u5f0fmeta-schemas"},"4.3.4. \u5143\u6a21\u5f0f\uff08Meta-Schemas\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"A schema that itself describes a schema is called a meta-schema. Meta-schemas are used to validate JSON Schemas and specify which vocabularies they are using."),(0,i.kt)("p",null,"Typically, a meta-schema will specify a set of vocabularies, and validate schemas that conform to the syntax of those vocabularies. However, meta-schemas and vocabularies are separate in order to allow meta-schemas to validate schema conformance more strictly or more loosely than the vocabularies' specifications call for. Meta-schemas may also describe and validate additional keywords that are not part of a formal vocabulary.")),(0,i.kt)("p",null,"\u7528\u6765\u63cf\u8ff0\u6a21\u5f0f\u7684\u6a21\u5f0f\u88ab\u79f0\u4e3a\u5143\u6a21\u5f0f\u3002\u5143\u6a21\u5f0f\u7528\u4e8e\u9a8c\u8bc1 JSON Schema \u5e76\u6307\u5b9a\u5b83\u4eec\u6b63\u5728\u4f7f\u7528\u7684\u8bcd\u6c47\u8868\u3002"),(0,i.kt)("p",null,"\u901a\u5e38\uff0c\u5143\u6a21\u5f0f\u4f1a\u6307\u5b9a\u4e00\u7ec4\u8bcd\u6c47\u8868\uff0c\u5e76\u9a8c\u8bc1\u7b26\u5408\u8fd9\u4e9b\u8bcd\u6c47\u8868\u8bed\u6cd5\u7684\u6a21\u5f0f\u3002\u7136\u800c\uff0c\u5143\u6a21\u5f0f\u548c\u8bcd\u6c47\u8868\u662f\u5206\u5f00\u7684\uff0c\u4ee5\u4fbf\u5141\u8bb8\u5143\u6a21\u5f0f\u6bd4\u8bcd\u6c47\u8868\u7684\u89c4\u8303\u8981\u6c42\u66f4\u4e25\u683c\u6216\u66f4\u5bbd\u677e\u5730\u9a8c\u8bc1\u6a21\u5f0f\u4e00\u81f4\u6027\u3002\u5143\u6a21\u5f0f\u8fd8\u53ef\u4ee5\u63cf\u8ff0\u548c\u9a8c\u8bc1\u4e0d\u5c5e\u4e8e\u6b63\u5f0f\u8bcd\u6c47\u8868\u7684\u989d\u5916\u5173\u952e\u5b57\u3002"),(0,i.kt)("h4",{id:"435-\u6839\u6a21\u5f0f\u5b50\u6a21\u5f0f\u548c\u8d44\u6e90root-schema-and-subschemas-and-resources"},"4.3.5. \u6839\u6a21\u5f0f\u3001\u5b50\u6a21\u5f0f\u548c\u8d44\u6e90\uff08Root Schema and Subschemas and Resources\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"A JSON Schema resource is a schema which is canonically ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc6596"},"RFC 6596")," identified by an absolute ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc3986"},"RFC 3986"),". Schema resources MAY also be identified by URIs, including URIs with fragments, if the resulting secondary resource (as defined by section 3.5 of ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc3986"},"RFC 3986"),") is identical to the primary resource. This can occur with the empty fragment, or when one schema resource is embedded in another. Any such URIs with fragments are considered to be non-canonical."),(0,i.kt)("p",null,"The root schema is the schema that comprises the entire JSON document in question. The root schema is always a schema resource, where the URI is determined as described in section 9.1.1. Note that documents that embed schemas in another format will not have a root schema resource in this sense. Exactly how such usages fit with the JSON Schema document and resource concepts will be clarified in a future draft."),(0,i.kt)("p",null,"Some keywords take schemas themselves, allowing JSON Schemas to be nested:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "title": "root",\n    "items": {\n        "title": "array item"\n    }\n}\n')),(0,i.kt)("p",null,'In this example document, the schema titled "array item" is a subschema, and the schema titled "root" is the root schema.'),(0,i.kt)("p",null,"As with the root schema, a subschema is either an object or a boolean."),(0,i.kt)("p",null,"As discussed in section 8.2.1, a JSON Schema document can contain multiple JSON Schema resources. When used without qualification, the term \"root schema\" refers to the document's root schema. In some cases, resource root schemas are discussed. A resource's root schema is its top-level schema object, which would also be a document root schema if the resource were to be extracted to a standalone JSON Schema document."),(0,i.kt)("p",null,"Whether multiple schema resources are embedded or linked with a reference, they are processed in the same way, with the same available behaviors.")),(0,i.kt)("p",null,"JSON Schema \u8d44\u6e90\u662f\u7531\u7edd\u5bf9 URI ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc3986"},"RFC 3986")," \u89c4\u8303\u5316 ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc6596"},"RFC 6596")," \u6807\u8bc6\u7684\u6a21\u5f0f\u3002\u6a21\u5f0f\u8d44\u6e90\u8fd8\u53ef\u4ee5\u901a\u8fc7 URI \u6807\u8bc6\uff0c\u5305\u62ec\u5e26\u6709\u7247\u6bb5\u7684 URI\uff0c\u5982\u679c\u7531\u6b64\u4ea7\u751f\u7684\u8f85\u52a9\u8d44\u6e90\uff08\u5982 ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc3986"},"RFC 3986")," \u7b2c 3.5 \u8282\u5b9a\u4e49\u7684\uff09\u4e0e\u4e3b\u8d44\u6e90\u76f8\u540c\u3002\u8fd9\u53ef\u4ee5\u53d1\u751f\u5728\u7a7a\u7247\u6bb5\u4e2d\uff0c\u6216\u8005\u5f53\u4e00\u4e2a\u6a21\u5f0f\u8d44\u6e90\u5d4c\u5165\u5230\u53e6\u4e00\u4e2a\u6a21\u5f0f\u8d44\u6e90\u4e2d\u3002\u4efb\u4f55\u8fd9\u6837\u7684\u5e26\u6709\u7247\u6bb5\u7684 URI \u90fd\u88ab\u8ba4\u4e3a\u662f\u975e\u89c4\u8303\u7684\u3002"),(0,i.kt)("p",null,"\u6839\u6a21\u5f0f\uff08root schema\uff09\u662f\u7ec4\u6210\u6574\u4e2a JSON \u6587\u6863\u7684\u6a21\u5f0f\u3002\u6839\u6a21\u5f0f\u59cb\u7ec8\u662f\u4e00\u4e2a\u6a21\u5f0f\u8d44\u6e90\uff08schema resource\uff09\uff0cURI \u662f\u6309\u7167\u7b2c 9.1.1 \u8282\u7684\u63cf\u8ff0\u786e\u5b9a\u7684\u3002\u8bf7\u6ce8\u610f\uff0c\u5c06\u6a21\u5f0f\u5d4c\u5165\u5230\u5176\u5b83\u683c\u5f0f\u7684\u6587\u6863\u5728\u8fd9\u4e2a\u610f\u4e49\u4e0a\u4e0d\u4f1a\u6709\u4e00\u4e2a\u6839\u6a21\u5f0f\u8d44\u6e90\u3002\u8fd9\u79cd\u7528\u6cd5\u4e0e JSON Schema \u6587\u6863\u548c\u8d44\u6e90\u6982\u5ff5\u5982\u4f55\u9002\u5e94\u5c06\u5728\u672a\u6765\u7684\u8349\u6848\u4e2d\u5f97\u5230\u6f84\u6e05\u3002"),(0,i.kt)("p",null,"\u67d0\u4e9b\u5173\u952e\u5b57\u672c\u8eab\u91c7\u7528\u6a21\u5f0f\uff0c\u5141\u8bb8 JSON Schema \u5d4c\u5957\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "title": "root",\n    "items": {\n        "title": "array item"\n    }\n}\n')),(0,i.kt)("p",null,'\u5728\u8fd9\u4e2a\u793a\u4f8b\u6587\u6863\u4e2d\uff0c\u6807\u9898\u4e3a "array item" \u7684\u6a21\u5f0f\u662f\u4e00\u4e2a\u5b50\u6a21\u5f0f\uff0c\u6807\u9898\u4e3a "root" \u7684\u6a21\u5f0f\u662f\u6839\u6a21\u5f0f\u3002'),(0,i.kt)("p",null,"\u4e0e\u6839\u6a21\u5f0f\u4e00\u6837\uff0c\u5b50\u6a21\u5f0f\u53ef\u4ee5\u662f\u5bf9\u8c61\u6216\u5e03\u5c14\u503c\u3002"),(0,i.kt)("p",null,"\u5982\u7b2c 8.2.1 \u8282\u6240\u8ba8\u8bba\u7684\uff0c\u4e00\u4e2a JSON Schema \u6587\u6863\u53ef\u4ee5\u5305\u542b\u591a\u4e2a JSON Schema \u8d44\u6e90\u3002\u5728\u672a\u7ecf\u9650\u5b9a\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528\u672f\u8bed\u201c\u6839\u6a21\u5f0f\u201d\u662f\u6307\u6587\u6863\u7684\u6839\u6a21\u5f0f\u3002\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u8ba8\u8bba\u4e86\u8d44\u6e90\u7684\u6839\u6a21\u5f0f\u3002\u8d44\u6e90\u7684\u6839\u6a21\u5f0f\u662f\u5176\u9876\u7ea7\u6a21\u5f0f\u5bf9\u8c61\uff0c\u5982\u679c\u8d44\u6e90\u88ab\u63d0\u53d6\u5230\u4e00\u4e2a\u72ec\u7acb\u7684 JSON Schema \u6587\u6863\u4e2d\uff0c\u5b83\u4e5f\u5c06\u6210\u4e3a\u4e00\u4e2a\u6587\u6863\u6839\u6a21\u5f0f\u3002"),(0,i.kt)("p",null,"\u65e0\u8bba\u662f\u5d4c\u5165\u591a\u4e2a\u6a21\u5f0f\u8d44\u6e90\u8fd8\u662f\u901a\u8fc7\u5f15\u7528\u94fe\u63a5\u5b83\u4eec\uff0c\u5b83\u4eec\u90fd\u4ee5\u76f8\u540c\u7684\u65b9\u5f0f\u8fdb\u884c\u5904\u7406\uff0c\u5177\u6709\u76f8\u540c\u7684\u53ef\u7528\u884c\u4e3a\u3002"),(0,i.kt)("h2",{id:"5-\u7247\u6bb5\u6807\u8bc6\u7b26fragment-identifiers"},"5. \u7247\u6bb5\u6807\u8bc6\u7b26\uff08Fragment Identifiers\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"In accordance with section 3.1 of ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc6839"},"RFC 6839"),', the syntax and semantics of fragment identifiers specified for any +json media type SHOULD be as specified for "application/json". (At publication of this document, there is no fragment identification syntax defined for "application/json".)'),(0,i.kt)("p",null,'Additionally, the "application/schema+json" media type supports two fragment identifier structures: plain names and JSON Pointers. The "application/schema-instance+json" media type supports one fragment identifier structure: JSON Pointers.'),(0,i.kt)("p",null,"The use of JSON Pointers as URI fragment identifiers is described in ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc6901"},"RFC 6901"),'. For "application/schema+json", which supports two fragment identifier syntaxes, fragment identifiers matching the JSON Pointer syntax, including the empty string, MUST be interpreted as JSON Pointer fragment identifiers.'),(0,i.kt)("p",null,"Per the W3C's best practices for fragment identifiers ",(0,i.kt)("a",{parentName:"p",href:"https://www.w3.org/TR/2012/WD-fragid-best-practices-20121025"},"W3C.WD-fragid-best-practices-20121025"),', plain name fragment identifiers in "application/schema+json" are reserved for referencing locally named schemas. All fragment identifiers that do not match the JSON Pointer syntax MUST be interpreted as plain name fragment identifiers.'),(0,i.kt)("p",null,'Defining and referencing a plain name fragment identifier within an "application/schema+json" document are specified in the "$anchor" keyword (Section 8.2.2) section.')),(0,i.kt)("p",null,"\u6839\u636e ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc6839"},"RFC 6839")," \u7b2c 3.1 \u8282\u7684\u89c4\u5b9a\uff0c\u4efb\u4f55 ",(0,i.kt)("inlineCode",{parentName:"p"},"+json")," \u5a92\u4f53\u7c7b\u578b\u7684\u7247\u6bb5\u6807\u8bc6\u7b26\u7684\u8bed\u6cd5\u548c\u8bed\u4e49\u5e94\u4e0e ",(0,i.kt)("inlineCode",{parentName:"p"},"application/json")," \u7684\u89c4\u5b9a\u76f8\u540c\u3002\uff08\u5728\u672c\u6587\u6863\u53d1\u5e03\u65f6\uff0c\u5c1a\u672a\u4e3a ",(0,i.kt)("inlineCode",{parentName:"p"},"application/json")," \u5b9a\u4e49\u7247\u6bb5\u6807\u8bc6\u7b26\u8bed\u6cd5\u3002\uff09\n\u6b64\u5916\uff0c",(0,i.kt)("inlineCode",{parentName:"p"},"application/schema+json")," \u5a92\u4f53\u7c7b\u578b\u652f\u6301\u4e24\u79cd\u7247\u6bb5\u6807\u8bc6\u7b26\u7ed3\u6784\uff1a\u7eaf\u540d\u79f0\uff08plain names\uff09\u548c JSON \u6307\u9488\uff08JSON Pointers\uff09\u3002",(0,i.kt)("inlineCode",{parentName:"p"},"application/schema-instance+json")," \u5a92\u4f53\u7c7b\u578b\u652f\u6301\u4e00\u79cd\u7247\u6bb5\u6807\u8bc6\u7b26\u7ed3\u6784\uff1aJSON \u6307\u9488\u3002"),(0,i.kt)("p",null,"\u5728 ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc6901"},"RFC 6901")," \u4e2d\u63cf\u8ff0\u4e86\u5c06 JSON \u6307\u9488\u7528\u4f5c URI \u7247\u6bb5\u6807\u8bc6\u7b26\u3002\u5bf9\u4e8e ",(0,i.kt)("inlineCode",{parentName:"p"},"application/schema+json"),"\uff0c\u5b83\u652f\u6301\u4e24\u79cd\u7247\u6bb5\u6807\u8bc6\u7b26\u8bed\u6cd5\uff0c\u5339\u914d JSON \u6307\u9488\u8bed\u6cd5\u7684\u7247\u6bb5\u6807\u8bc6\u7b26\uff08\u5305\u62ec\u7a7a\u5b57\u7b26\u4e32\uff09\u5fc5\u987b\uff08MUST\uff09\u88ab\u89e3\u91ca\u4e3a JSON \u6307\u9488\u7247\u6bb5\u6807\u8bc6\u7b26\u3002"),(0,i.kt)("p",null,"\u6839\u636e W3C \u5173\u4e8e\u7247\u6bb5\u6807\u8bc6\u7b26\u7684\u6700\u4f73\u5b9e\u8df5 ",(0,i.kt)("a",{parentName:"p",href:"https://www.w3.org/TR/2012/WD-fragid-best-practices-20121025"},"W3C.WD-fragid-best-practices-20121025"),"\uff0c",(0,i.kt)("inlineCode",{parentName:"p"},"application/schema+json")," \u4e2d\u7684\u7eaf\u540d\u79f0\u7247\u6bb5\u6807\u8bc6\u7b26\u4fdd\u7559\u7528\u4e8e\u5f15\u7528\u672c\u5730\u547d\u540d\u7684\u6a21\u5f0f\u3002\u6240\u6709\u4e0d\u7b26\u5408 JSON \u6307\u9488\u8bed\u6cd5\u7684\u7247\u6bb5\u6807\u8bc6\u7b26\u5fc5\u987b\u88ab\u89e3\u91ca\u4e3a\u7eaf\u540d\u79f0\u7247\u6bb5\u6807\u8bc6\u7b26\u3002"),(0,i.kt)("p",null,"\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"application/schema+json")," \u6587\u6863\u4e2d\u5b9a\u4e49\u548c\u5f15\u7528\u7eaf\u540d\u79f0\u7247\u6bb5\u6807\u8bc6\u7b26\u7684\u89c4\u5b9a\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"$anchor")," \u5173\u952e\u5b57\uff08\u7b2c 8.2.2 \u8282\uff09\u90e8\u5206\u3002"),(0,i.kt)("h2",{id:"6-\u4e00\u822c\u8003\u8651\u56e0\u7d20general-considerations"},"6. \u4e00\u822c\u8003\u8651\u56e0\u7d20\uff08General Considerations\uff09"),(0,i.kt)("h3",{id:"61-json-\u503c\u7684\u8303\u56f4range-of-json-values"},"6.1. JSON \u503c\u7684\u8303\u56f4\uff08Range of JSON Values\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"An instance may be any valid JSON value as defined by JSON ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc8259"},"RFC 8259"),". JSON Schema imposes no restrictions on type: JSON Schema can describe any JSON value, including, for example, null.")),(0,i.kt)("p",null,"\u5b9e\u4f8b\u53ef\u4ee5\u662f\u7531 JSON ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc8259"},"RFC 8259")," \u5b9a\u4e49\u7684\u4efb\u4f55\u6709\u6548 JSON \u503c\u3002JSON Schema \u5bf9\u7c7b\u578b\u6ca1\u6709\u9650\u5236\uff1aJSON Schema \u53ef\u4ee5\u63cf\u8ff0\u4efb\u4f55 JSON \u503c\uff0c\u5305\u62ec\u4f8b\u5982 ",(0,i.kt)("inlineCode",{parentName:"p"},"null"),"\u3002"),(0,i.kt)("h3",{id:"62-\u7f16\u7a0b\u8bed\u8a00\u72ec\u7acb\u6027programming-language-independence"},"6.2. \u7f16\u7a0b\u8bed\u8a00\u72ec\u7acb\u6027\uff08Programming Language Independence\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"JSON Schema is programming language agnostic, and supports the full range of values described in the data model. Be aware, however, that some languages and JSON parsers may not be able to represent in memory the full range of values describable by JSON.")),(0,i.kt)("p",null,"JSON Schema \u4e0e\u7f16\u7a0b\u8bed\u8a00\u65e0\u5173\uff0c\u5e76\u652f\u6301\u6570\u636e\u6a21\u578b\u4e2d\u63cf\u8ff0\u7684\u5168\u90e8\u503c\u8303\u56f4\u3002\u4f46\u8bf7\u6ce8\u610f\uff0c\u67d0\u4e9b\u8bed\u8a00\u548c JSON \u89e3\u6790\u5668\u53ef\u80fd\u65e0\u6cd5\u5728\u5185\u5b58\u4e2d\u8868\u793a JSON \u53ef\u63cf\u8ff0\u7684\u5168\u90e8\u503c\u8303\u56f4\u3002"),(0,i.kt)("h3",{id:"63-\u6570\u5b66\u6574\u6570mathematical-integers"},"6.3. \u6570\u5b66\u6574\u6570\uff08Mathematical Integers\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"Some programming languages and parsers use different internal representations for floating point numbers than they do for integers."),(0,i.kt)("p",null,"For consistency, integer JSON numbers SHOULD NOT be encoded with a fractional part.")),(0,i.kt)("p",null,"\u67d0\u4e9b\u7f16\u7a0b\u8bed\u8a00\u548c\u89e3\u6790\u5668\u5bf9\u6d6e\u70b9\u6570\u7684\u5185\u90e8\u8868\u793a\u4e0e\u6574\u6570\u7684\u5185\u90e8\u8868\u793a\u4e0d\u540c\u3002"),(0,i.kt)("p",null,"\u4e3a\u4e86\u4fdd\u6301\u4e00\u81f4\u6027\uff0c\u6574\u6570 JSON \u6570\u5b57\u4e0d\u5e94\uff08SHOULD NOT\uff09\u7f16\u7801\u4e3a\u5e26\u6709\u5c0f\u6570\u90e8\u5206\u7684\u6570\u5b57\u3002"),(0,i.kt)("h3",{id:"64-\u6b63\u5219\u8868\u8fbe\u5f0fregular-expressions"},"6.4. \u6b63\u5219\u8868\u8fbe\u5f0f\uff08Regular Expressions\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"Keywords MAY use regular expressions to express constraints, or constrain the instance value to be a regular expression. These regular expressions SHOULD be valid according to the regular expression dialect described in ",(0,i.kt)("a",{parentName:"p",href:"https://www.ecma-international.org/ecma-262/11.0/index.html"},"ECMA-262"),", section 21.2.1."),(0,i.kt)("p",null,'Regular expressions SHOULD be built with the "u" flag (or equivalent) to provide Unicode support, or processed in such a way which provides Unicode support as defined by ECMA-262.'),(0,i.kt)("p",null,"Furthermore, given the high disparity in regular expression constructs support, schema authors SHOULD limit themselves to the following regular expression tokens:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},'individual Unicode characters, as defined by the JSON specification RFC 8259;\nsimple character classes ([abc]), range character classes ([a-z]);\ncomplemented character classes ([^abc], [^a-z]);\nsimple quantifiers: "+" (one or more), "*" (zero or more), "?" (zero or one), and their lazy versions ("+?", "*?", "??");\nrange quantifiers: "{x}" (exactly x occurrences), "{x,y}" (at least x, at most y, occurrences), {x,} (x occurrences or more), and their lazy versions;\nthe beginning-of-input ("^") and end-of-input ("$") anchors;\nsimple grouping ("(...)") and alternation ("|").\n')),(0,i.kt)("p",null,'Finally, implementations MUST NOT take regular expressions to be anchored, neither at the beginning nor at the end. This means, for instance, the pattern "es" matches "expression".')),(0,i.kt)("p",null,"\u5173\u952e\u5b57\u53ef\u4ee5\uff08MAY\uff09\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u6765\u8868\u793a\u7ea6\u675f\uff0c\u6216\u5c06\u5b9e\u4f8b\u503c\u7ea6\u675f\u4e3a\u6b63\u5219\u8868\u8fbe\u5f0f\u3002\u8fd9\u4e9b\u6b63\u5219\u8868\u8fbe\u5f0f\u5e94\u6839\u636e ",(0,i.kt)("a",{parentName:"p",href:"https://www.ecma-international.org/ecma-262/11.0/index.html"},"ECMA-262")," \u7b2c 21.2.1 \u8282\u4e2d\u63cf\u8ff0\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u65b9\u8a00\u6709\u6548\u3002"),(0,i.kt)("p",null,"\u6784\u5efa\u6b63\u5219\u8868\u8fbe\u5f0f\u65f6\uff0c\u5e94\uff08SHOULD\uff09\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"u")," \u6807\u5fd7\uff08\u6216\u7b49\u6548\u529f\u80fd\uff09\u63d0\u4f9b Unicode \u652f\u6301\uff0c\u6216\u4ee5 ECMA-262 \u5b9a\u4e49\u7684\u63d0\u4f9b Unicode \u652f\u6301\u7684\u65b9\u5f0f\u5904\u7406\u3002"),(0,i.kt)("p",null,"\u6b64\u5916\uff0c\u8003\u8651\u5230\u6b63\u5219\u8868\u8fbe\u5f0f\u7ed3\u6784\u652f\u6301\u7684\u9ad8\u5dee\u5f02\u6027\uff0c\u6a21\u5f0f\u4f5c\u8005\u5e94\uff08SHOULD\uff09\u5c06\u81ea\u5df1\u9650\u5236\u5728\u4ee5\u4e0b\u6b63\u5219\u8868\u8fbe\u5f0f\u6807\u8bb0\uff1a"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u7531 JSON \u89c4\u8303 ",(0,i.kt)("a",{parentName:"li",href:"https://datatracker.ietf.org/doc/html/rfc8259"},"RFC 8259")," \u5b9a\u4e49\u7684\u5355\u4e2a Unicode \u5b57\u7b26\uff1b"),(0,i.kt)("li",{parentName:"ul"},"\u7b80\u5355\u5b57\u7b26\u7c7b\uff08",(0,i.kt)("inlineCode",{parentName:"li"},"[abc]"),"\uff09\u3001\u8303\u56f4\u5b57\u7b26\u7c7b\uff08",(0,i.kt)("inlineCode",{parentName:"li"},"[a-z]"),"\uff09\uff1b"),(0,i.kt)("li",{parentName:"ul"},"\u8865\u5145\u5b57\u7b26\u7c7b\uff08",(0,i.kt)("inlineCode",{parentName:"li"},"[^abc]"),"\uff0c",(0,i.kt)("inlineCode",{parentName:"li"},"[^a-z]"),"\uff09\uff1b"),(0,i.kt)("li",{parentName:"ul"},"\u7b80\u5355\u91cf\u8bcd\uff1a",(0,i.kt)("inlineCode",{parentName:"li"},"+"),"\uff08\u4e00\u4e2a\u6216\u591a\u4e2a\uff09\uff0c",(0,i.kt)("inlineCode",{parentName:"li"},"*"),"\uff08\u96f6\u4e2a\u6216\u591a\u4e2a\uff09\uff0c",(0,i.kt)("inlineCode",{parentName:"li"},"?"),"\uff08\u96f6\u4e2a\u6216\u4e00\u4e2a\uff09\uff0c\u4ee5\u53ca\u5b83\u4eec\u7684\u61d2\u60f0\u7248\u672c\uff08",(0,i.kt)("inlineCode",{parentName:"li"},"+?"),"\uff0c",(0,i.kt)("inlineCode",{parentName:"li"},"?"),"\uff0c",(0,i.kt)("inlineCode",{parentName:"li"},"??"),"\uff09\uff1b"),(0,i.kt)("li",{parentName:"ul"},"\u8303\u56f4\u91cf\u8bcd\uff1a",(0,i.kt)("inlineCode",{parentName:"li"},"{x}"),"\uff08\u6070\u597d x \u6b21\u51fa\u73b0\uff09\uff0c",(0,i.kt)("inlineCode",{parentName:"li"},"{x,y}"),"\uff08\u81f3\u5c11 x \u6b21\uff0c\u6700\u591a y \u6b21\u51fa\u73b0\uff09\uff0c",(0,i.kt)("inlineCode",{parentName:"li"},"{x,}"),"\uff08x \u6b21\u6216\u66f4\u591a\u51fa\u73b0\uff09\uff0c\u4ee5\u53ca\u5b83\u4eec\u7684\u61d2\u60f0\u7248\u672c\uff1b"),(0,i.kt)("li",{parentName:"ul"},"\u8f93\u5165\u5f00\u59cb\uff08",(0,i.kt)("inlineCode",{parentName:"li"},"^"),"\uff09\u548c\u8f93\u5165\u7ed3\u675f\uff08",(0,i.kt)("inlineCode",{parentName:"li"},"$"),"\uff09\u951a\u70b9\uff1b"),(0,i.kt)("li",{parentName:"ul"},"\u7b80\u5355\u5206\u7ec4\uff08",(0,i.kt)("inlineCode",{parentName:"li"},"(...)"),"\uff09\u548c\u4ea4\u66ff\uff08",(0,i.kt)("inlineCode",{parentName:"li"},"|"),"\uff09\u3002")),(0,i.kt)("p",null,"\u6700\u540e\uff0c\u5b9e\u73b0\u5fc5\u987b\u4e0d\uff08MUST NOT\uff09\u5c06\u6b63\u5219\u8868\u8fbe\u5f0f\u89c6\u4e3a\u951a\u5b9a\u5728\u5f00\u5934\u6216\u7ed3\u5c3e\u3002\u8fd9\u610f\u5473\u7740\uff0c\u4f8b\u5982\uff0c\u6a21\u5f0f ",(0,i.kt)("inlineCode",{parentName:"p"},"es"),' \u80fd\u5339\u914d "expression"\u3002'),(0,i.kt)("h3",{id:"65-\u6269\u5c55-json-schemaextending-json-schema"},"6.5. \u6269\u5c55 JSON Schema\uff08Extending JSON Schema\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"Additional schema keywords and schema vocabularies MAY be defined by any entity. Save for explicit agreement, schema authors SHALL NOT expect these additional keywords and vocabularies to be supported by implementations that do not explicitly document such support. Implementations SHOULD treat keywords they do not support as annotations, where the value of the keyword is the value of the annotation."),(0,i.kt)("p",null,"Implementations MAY provide the ability to register or load handlers for vocabularies that they do not support directly. The exact mechanism for registering and implementing such handlers is implementation-dependent.")),(0,i.kt)("p",null,"\u4efb\u4f55\u5b9e\u4f53\u90fd\u53ef\u4ee5\uff08MAY\uff09\u5b9a\u4e49\u989d\u5916\u7684\u6a21\u5f0f\u5173\u952e\u5b57\u548c\u6a21\u5f0f\u8bcd\u6c47\u8868\u3002\u9664\u975e\u6709\u660e\u786e\u7684\u534f\u8bae\uff0c\u6a21\u5f0f\u4f5c\u8005\u4e0d\u5e94\uff08SHALL NOT\uff09\u671f\u671b\u8fd9\u4e9b\u989d\u5916\u7684\u5173\u952e\u5b57\u548c\u8bcd\u6c47\u8868\u88ab\u4e0d\u660e\u786e\u8bb0\u5f55\u6b64\u7c7b\u652f\u6301\u7684\u5b9e\u73b0\u652f\u6301\u3002\u5b9e\u73b0\u5e94\uff08SHOULD\uff09\u5c06\u5176\u4e0d\u652f\u6301\u7684\u5173\u952e\u5b57\u89c6\u4e3a\u6ce8\u89e3\uff0c\u5176\u4e2d\u5173\u952e\u5b57\u7684\u503c\u662f\u6ce8\u89e3\u7684\u503c\u3002"),(0,i.kt)("p",null,"\u5b9e\u73b0\u53ef\u4ee5\uff08MAY\uff09\u63d0\u4f9b\u6ce8\u518c\u6216\u52a0\u8f7d\u5b83\u4eec\u4e0d\u76f4\u63a5\u652f\u6301\u7684\u8bcd\u6c47\u8868\u7684\u5904\u7406\u5668\u7684\u80fd\u529b\u3002\u6ce8\u518c\u548c\u5b9e\u73b0\u6b64\u7c7b\u5904\u7406\u5668\u7684\u786e\u5207\u673a\u5236\u53d6\u51b3\u4e8e\u5b9e\u73b0\u3002"),(0,i.kt)("h2",{id:"7-\u5173\u952e\u5b57\u884c\u4e3akeyword-behaviors"},"7. \u5173\u952e\u5b57\u884c\u4e3a\uff08Keyword Behaviors\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"JSON Schema keywords fall into several general behavior categories. Assertions validate that an instance satisfies constraints, producing a boolean result. Annotations attach information that applications may use in any way they see fit. Applicators apply subschemas to parts of the instance and combine their results."),(0,i.kt)("p",null,"Extension keywords SHOULD stay within these categories, keeping in mind that annotations in particular are extremely flexible. Complex behavior is usually better delegated to applications on the basis of annotation data than implemented directly as schema keywords. However, extension keywords MAY define other behaviors for specialized purposes."),(0,i.kt)("p",null,"Evaluating an instance against a schema involves processing all of the keywords in the schema against the appropriate locations within the instance. Typically, applicator keywords are processed until a schema object with no applicators (and therefore no subschemas) is reached. The appropriate location in the instance is evaluated against the assertion and annotation keywords in the schema object, and their results are gathered into the parent schema according to the rules of the applicator."),(0,i.kt)("p",null,"Evaluation of a parent schema object can complete once all of its subschemas have been evaluated, although in some circumstances evaluation may be short-circuited due to assertion results. When annotations are being collected, some assertion result short-circuiting is not possible due to the need to examine all subschemas for annotation collection, including those that cannot further change the assertion result.")),(0,i.kt)("p",null,"JSON Schema \u5173\u952e\u5b57\u5206\u4e3a\u51e0\u4e2a\u4e00\u822c\u884c\u4e3a\u7c7b\u522b\u3002\u65ad\u8a00\uff08Assertions\uff09\u9a8c\u8bc1\u5b9e\u4f8b\u662f\u5426\u6ee1\u8db3\u7ea6\u675f\uff0c\u4ea7\u751f\u5e03\u5c14\u7ed3\u679c\u3002\u6ce8\u91ca\uff08Annotations\uff09\u9644\u52a0\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u81ea\u7531\u4f7f\u7528\u7684\u4fe1\u606f\u3002\u5e94\u7528\u5668\uff08Applicators\uff09\u5c06\u5b50\u6a21\u5f0f\u5e94\u7528\u5230\u5b9e\u4f8b\u7684\u90e8\u5206\u5e76\u5408\u5e76\u5b83\u4eec\u7684\u7ed3\u679c\u3002"),(0,i.kt)("p",null,"\u6269\u5c55\u5173\u952e\u5b57\u5e94\u8be5\uff08SHOULD\uff09\u4fdd\u6301\u5728\u8fd9\u4e9b\u7c7b\u522b\u4e2d\uff0c\u7279\u522b\u8981\u6ce8\u610f\u6ce8\u91ca\u5177\u6709\u6781\u5927\u7684\u7075\u6d3b\u6027\u3002\u5c06\u590d\u6742\u884c\u4e3a\u59d4\u6258\u7ed9\u57fa\u4e8e\u6ce8\u91ca\u6570\u636e\u7684\u5e94\u7528\u7a0b\u5e8f\u901a\u5e38\u6bd4\u76f4\u63a5\u4f5c\u4e3a\u6a21\u5f0f\u5173\u952e\u5b57\u5b9e\u73b0\u66f4\u597d\u3002\u7136\u800c\uff0c\u6269\u5c55\u5173\u952e\u5b57\u53ef\u4ee5\u4e3a\u7279\u6b8a\u76ee\u7684\u5b9a\u4e49\u5176\u5b83\u884c\u4e3a\u3002"),(0,i.kt)("p",null,"\u6839\u636e\u6a21\u5f0f\u8bc4\u4f30\uff08evaluate\uff09\u5b9e\u4f8b\u6d89\u53ca\u5c06\u6a21\u5f0f\u4e2d\u7684\u6240\u6709\u5173\u952e\u5b57\u5904\u7406\u5230\u5b9e\u4f8b\u5185\u7684\u9002\u5f53\u4f4d\u7f6e\u3002\u901a\u5e38\uff0c\u5904\u7406\u5e94\u7528\u5668\u5173\u952e\u5b57\uff0c\u76f4\u5230\u6ca1\u6709\u5e94\u7528\u5668\uff08\u56e0\u6b64\u6ca1\u6709\u5b50\u6a21\u5f0f\uff09\u7684\u6a21\u5f0f\u5bf9\u8c61\u4e3a\u6b62\u3002\u6839\u636e\u5e94\u7528\u5668\u7684\u89c4\u5219\uff0c\u5c06\u5b9e\u4f8b\u7684\u9002\u5f53\u4f4d\u7f6e\u6839\u636e\u6a21\u5f0f\u5bf9\u8c61\u4e2d\u7684\u65ad\u8a00\u548c\u6ce8\u91ca\u5173\u952e\u5b57\u8fdb\u884c\u8bc4\u4f30\uff0c\u5c06\u7ed3\u679c\u6c47\u96c6\u5230\u7236\u6a21\u5f0f\u4e2d\u3002"),(0,i.kt)("p",null,"\u4e00\u65e6\u8bc4\u4f30\u4e86\u6240\u6709\u5b50\u6a21\u5f0f\uff0c\u7236\u6a21\u5f0f\u5bf9\u8c61\u7684\u8bc4\u4f30\u5c31\u53ef\u4ee5\u5b8c\u6210\uff0c\u5c3d\u7ba1\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u7531\u4e8e\u65ad\u8a00\u7ed3\u679c\uff0c\u8bc4\u4f30\u53ef\u80fd\u4f1a\u88ab\u77ed\u8def\u3002\u5f53\u6536\u96c6\u6ce8\u91ca\u65f6\uff0c\u7531\u4e8e\u9700\u8981\u68c0\u67e5\u6240\u6709\u5b50\u6a21\u5f0f\u4ee5\u6536\u96c6\u6ce8\u91ca\uff0c\u5305\u62ec\u90a3\u4e9b\u65e0\u6cd5\u8fdb\u4e00\u6b65\u66f4\u6539\u65ad\u8a00\u7ed3\u679c\u7684\u5b50\u6a21\u5f0f\uff0c\u56e0\u6b64\u65e0\u6cd5\u8fdb\u884c\u67d0\u4e9b\u65ad\u8a00\u7ed3\u679c\u77ed\u8def\u3002"),(0,i.kt)("h3",{id:"71-\u8bcd\u6c47\u8303\u56f4\u548c\u52a8\u6001\u8303\u56f4lexical-scope-and-dynamic-scope"},"7.1. \u8bcd\u6c47\u8303\u56f4\u548c\u52a8\u6001\u8303\u56f4\uff08Lexical Scope and Dynamic Scope\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"While most JSON Schema keywords can be evaluated on their own, or at most need to take into account the values or results of adjacent keywords in the same schema object, a few have more complex behavior."),(0,i.kt)("p",null,"The lexical scope of a keyword is determined by the nested JSON data structure of objects and arrays. The largest such scope is an entire schema document. The smallest scope is a single schema object with no subschemas."),(0,i.kt)("p",null,'Keywords MAY be defined with a partial value, such as a URI-reference, which must be resolved against another value, such as another URI-reference or a full URI, which is found through the lexical structure of the JSON document. The "$id", "$ref", and "$dynamicRef" core keywords, and the "base" JSON Hyper-Schema keyword, are examples of this sort of behavior.'),(0,i.kt)("p",null,'Note that some keywords, such as "$schema", apply to the lexical scope of the entire schema resource, and therefore MUST only appear in a schema resource\'s root schema.'),(0,i.kt)("p",null,'Other keywords may take into account the dynamic scope that exists during the evaluation of a schema, typically together with an instance document. The outermost dynamic scope is the schema object at which processing begins, even if it is not a schema resource root. The path from this root schema to any particular keyword (that includes any "$ref" and "$dynamicRef" keywords that may have been resolved) is considered the keyword\'s "validation path."'),(0,i.kt)("p",null,"Lexical and dynamic scopes align until a reference keyword is encountered. While following the reference keyword moves processing from one lexical scope into a different one, from the perspective of dynamic scope, following a reference is no different from descending into a subschema present as a value. A keyword on the far side of that reference that resolves information through the dynamic scope will consider the originating side of the reference to be their dynamic parent, rather than examining the local lexically enclosing parent."),(0,i.kt)("p",null,'The concept of dynamic scope is primarily used with "$dynamicRef" and "$dynamicAnchor", and should be considered an advanced feature and used with caution when defining additional keywords. It also appears when reporting errors and collected annotations, as it may be possible to revisit the same lexical scope repeatedly with different dynamic scopes. In such cases, it is important to inform the user of the dynamic path that produced the error or annotation.')),(0,i.kt)("p",null,"\u867d\u7136\u5927\u591a\u6570 JSON Schema \u5173\u952e\u5b57\u53ef\u4ee5\u5355\u72ec\u8bc4\u4f30\uff0c\u6216\u8005\u6700\u591a\u9700\u8981\u8003\u8651\u76f8\u540c\u6a21\u5f0f\u5bf9\u8c61\u4e2d\u76f8\u90bb\u5173\u952e\u5b57\u7684\u503c\u6216\u7ed3\u679c\uff0c\u4f46\u6709\u4e9b\u5173\u952e\u5b57\u5177\u6709\u66f4\u590d\u6742\u7684\u884c\u4e3a\u3002"),(0,i.kt)("p",null,"\u5173\u952e\u5b57\u7684\u8bcd\u6c47\u8303\u56f4\uff08lexical scope\uff09\u7531\u5bf9\u8c61\u548c\u6570\u7ec4\u7684\u5d4c\u5957 JSON \u6570\u636e\u7ed3\u6784\u786e\u5b9a\u3002\u6700\u5927\u7684\u8303\u56f4\u662f\u6574\u4e2a\u6a21\u5f0f\u6587\u6863\u3002\u6700\u5c0f\u8303\u56f4\u662f\u6ca1\u6709\u5b50\u6a21\u5f0f\u7684\u5355\u4e2a\u6a21\u5f0f\u5bf9\u8c61\u3002"),(0,i.kt)("p",null,"\u5173\u952e\u5b57\u53ef\u4ee5\uff08MAY\uff09\u901a\u8fc7\u90e8\u5206\u503c\uff08\u5982 URI \u5f15\u7528\uff09\u8fdb\u884c\u5b9a\u4e49\uff0c\u8fd9\u4e9b\u503c\u5fc5\u987b\u89e3\u6790\u4e3a\u901a\u8fc7 JSON \u6587\u6863\u7684\u8bcd\u6c47\u7ed3\u6784\u627e\u5230\u7684\u53e6\u4e00\u4e2a\u503c\uff08\u5982\u53e6\u4e00\u4e2a URI \u5f15\u7528\u6216\u5b8c\u6574\u7684 URI\uff09\u3002\u6838\u5fc3\u5173\u952e\u5b57 ",(0,i.kt)("inlineCode",{parentName:"p"},"$id"),"\u3001",(0,i.kt)("inlineCode",{parentName:"p"},"$ref")," \u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"$dynamicRef")," \u4ee5\u53caJSON \u8d85\u6a21\u5f0f\uff08Hyper-Schema\uff09\u5173\u952e\u5b57 ",(0,i.kt)("inlineCode",{parentName:"p"},"base")," \u5c31\u662f\u6b64\u7c7b\u884c\u4e3a\u7684\u4f8b\u5b50\u3002"),(0,i.kt)("p",null,"\u8bf7\u6ce8\u610f\uff0c\u67d0\u4e9b\u5173\u952e\u5b57\uff08\u5982 ",(0,i.kt)("inlineCode",{parentName:"p"},"$schema"),"\uff09\u9002\u7528\u4e8e\u6574\u4e2a\u6a21\u5f0f\u8d44\u6e90\u7684\u8bcd\u6c47\u8303\u56f4\uff0c\u56e0\u6b64\u5fc5\u987b\u4ec5\u51fa\u73b0\u5728\u6a21\u5f0f\u8d44\u6e90\u7684\u6839\u6a21\u5f0f\u4e2d\u3002"),(0,i.kt)("p",null,"\u5176\u5b83\u5173\u952e\u5b57\u53ef\u80fd\u4f1a\u8003\u8651\u5728\u6a21\u5f0f\u8bc4\u4f30\u671f\u95f4\u5b58\u5728\u7684\u52a8\u6001\u8303\u56f4\uff08dynamic scope\uff09\uff0c\u901a\u5e38\u4e0e\u5b9e\u4f8b\u6587\u6863\u4e00\u8d77\u3002\u6700\u5916\u5c42\u7684\u52a8\u6001\u8303\u56f4\u662f\u5904\u7406\u5f00\u59cb\u7684\u6a21\u5f0f\u5bf9\u8c61\uff0c\u5373\u4f7f\u5b83\u4e0d\u662f\u6a21\u5f0f\u8d44\u6e90\u7684\u6839\u3002\u4ece\u6839\u6a21\u5f0f\u5230\u4efb\u4f55\u7279\u5b9a\u5173\u952e\u5b57\uff08\u5305\u62ec\u53ef\u80fd\u5df2\u89e3\u6790\u7684\u4efb\u4f55 ",(0,i.kt)("inlineCode",{parentName:"p"},"$ref")," \u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"$dynamicRef")," \u5173\u952e\u5b57\uff09\u7684\u8def\u5f84\u88ab\u8ba4\u4e3a\u662f\u5173\u952e\u5b57\u7684\u9a8c\u8bc1\u8def\u5f84\uff08validation path\uff09\u3002"),(0,i.kt)("p",null,"\u8bcd\u6c47\u8303\u56f4\u548c\u52a8\u6001\u8303\u56f4\u5728\u9047\u5230\u5f15\u7528\u5173\u952e\u5b57\u4e4b\u524d\u662f\u4e00\u81f4\u7684\u3002\u5c3d\u7ba1\u9075\u5faa\u5f15\u7528\u5173\u952e\u5b57\u4f1a\u5c06\u5904\u7406\u4ece\u4e00\u4e2a\u8bcd\u6c47\u8303\u56f4\u79fb\u52a8\u5230\u53e6\u4e00\u4e2a\u8bcd\u6c47\u8303\u56f4\uff0c\u4f46\u4ece\u52a8\u6001\u8303\u56f4\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u9075\u5faa\u5f15\u7528\u4e0e\u964d\u5165\uff08descending into\uff09\u4f5c\u4e3a\u503c\u5b58\u5728\u7684\u5b50\u6a21\u5f0f\u6ca1\u6709\u533a\u522b\u3002\u5728\u5f15\u7528\u7684\u53e6\u4e00\u4fa7\u7684\u5173\u952e\u5b57\u901a\u8fc7\u52a8\u6001\u8303\u56f4\u89e3\u6790\u4fe1\u606f\u65f6\uff0c\u5c06\u8003\u8651\u5f15\u7528\u7684\u8d77\u59cb\u4fa7\u4f5c\u4e3a\u5b83\u4eec\u7684\u52a8\u6001\u7236\u7ea7\uff0c\u800c\u4e0d\u662f\u68c0\u67e5\u672c\u5730\u8bcd\u6c47\u5c01\u95ed\u7684\u7236\u7ea7\u3002"),(0,i.kt)("p",null,"\u52a8\u6001\u8303\u56f4\u7684\u6982\u5ff5\u4e3b\u8981\u7528\u4e8e ",(0,i.kt)("inlineCode",{parentName:"p"},"$dynamicRef")," \u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"$dynamicAnchor"),"\uff0c\u5728\u5b9a\u4e49\u5176\u5b83\u5173\u952e\u5b57\u65f6\u5e94\u8c28\u614e\u4f7f\u7528\uff0c\u5e94\u5c06\u5176\u89c6\u4e3a\u9ad8\u7ea7\u529f\u80fd\u3002\u5728\u62a5\u544a\u9519\u8bef\u548c\u6536\u96c6\u7684\u6ce8\u91ca\u65f6\uff0c\u5b83\u8fd8\u4f1a\u51fa\u73b0\uff0c\u56e0\u4e3a\u5728\u4e0d\u540c\u7684\u52a8\u6001\u8303\u56f4\u4e0b\u53ef\u80fd\u4f1a\u91cd\u590d\u8bbf\u95ee\u76f8\u540c\u7684\u8bcd\u6c47\u8303\u56f4\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u544a\u77e5\u7528\u6237\u4ea7\u751f\u9519\u8bef\u6216\u6ce8\u91ca\u7684\u52a8\u6001\u8def\u5f84\u975e\u5e38\u91cd\u8981\u3002"),(0,i.kt)("h3",{id:"72-\u5173\u952e\u5b57\u4ea4\u4e92keyword-interactions"},"7.2. \u5173\u952e\u5b57\u4ea4\u4e92\uff08Keyword Interactions\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"Keyword behavior MAY be defined in terms of the annotation results of subschemas (Section 4.3.5) and/or adjacent keywords (keywords within the same schema object) and their subschemas. Such keywords MUST NOT result in a circular dependency. Keywords MAY modify their behavior based on the presence or absence of another keyword in the same schema object (Section 4.3).")),(0,i.kt)("p",null,"\u5173\u952e\u5b57\u884c\u4e3a\u53ef\u4ee5\uff08MAY\uff09\u6839\u636e\u5b50\u6a21\u5f0f\uff08\u7b2c 4.3.5 \u8282\uff09\u7684\u6ce8\u89e3\u7ed3\u679c\u548c/\u6216\u76f8\u90bb\u5173\u952e\u5b57\uff08\u540c\u4e00\u6a21\u5f0f\u5bf9\u8c61\u5185\u7684\u5173\u952e\u5b57\uff09\u53ca\u5176\u5b50\u6a21\u5f0f\u6765\u5b9a\u4e49\u3002\u8fd9\u6837\u7684\u5173\u952e\u5b57\u4e00\u5b9a\u4e0d\u80fd\uff08MUST NOT\uff09\u5bfc\u81f4\u5faa\u73af\u4f9d\u8d56\u3002\u5173\u952e\u5b57\u53ef\u4ee5\uff08MAY\uff09\u6839\u636e\u540c\u4e00\u6a21\u5f0f\u5bf9\u8c61\u4e2d\u53e6\u4e00\u4e2a\u5173\u952e\u5b57\u7684\u5b58\u5728\u6216\u4e0d\u5b58\u5728\u6765\u4fee\u6539\u5b83\u4eec\u7684\u884c\u4e3a\uff08\u7b2c 4.3 \u8282\uff09\u3002"),(0,i.kt)("h3",{id:"73-\u9ed8\u8ba4\u884c\u4e3adefault-behaviors"},"7.3. \u9ed8\u8ba4\u884c\u4e3a\uff08Default Behaviors\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"A missing keyword MUST NOT produce a false assertion result, MUST NOT produce annotation results, and MUST NOT cause any other schema to be evaluated as part of its own behavioral definition. However, given that missing keywords do not contribute annotations, the lack of annotation results may indirectly change the behavior of other keywords."),(0,i.kt)("p",null,"In some cases, the missing keyword assertion behavior of a keyword is identical to that produced by a certain value, and keyword definitions SHOULD note such values where known. However, even if the value which produces the default behavior would produce annotation results if present, the default behavior still MUST NOT result in annotations."),(0,i.kt)("p",null,'Because annotation collection can add significant cost in terms of both computation and memory, implementations MAY opt out of this feature. Keywords that are specified in terms of collected annotations SHOULD describe reasonable alternate approaches when appropriate. This approach is demonstrated by the "items" and "additionalProperties" keywords in this document.'),(0,i.kt)("p",null,"Note that when no such alternate approach is possible for a keyword, implementations that do not support annotation collections will not be able to support those keywords or vocabularies that contain them.")),(0,i.kt)("p",null,"\u7f3a\u5c11\u5173\u952e\u5b57\u4e00\u5b9a\u4e0d\u4f1a\uff08MUST NOT\uff09\u4ea7\u751f\u9519\u8bef\u7684\u65ad\u8a00\u7ed3\u679c\uff0c\u4e5f\u4e0d\u4f1a\uff08MUST NOT\uff09\u4ea7\u751f\u6ce8\u89e3\u7ed3\u679c\uff0c\u4e14\u4e0d\u4f1a\uff08MUST NOT\uff09\u5bfc\u81f4\u4efb\u4f55\u5176\u5b83\u6a21\u5f0f\u4f5c\u4e3a\u5176\u81ea\u8eab\u884c\u4e3a\u5b9a\u4e49\u7684\u4e00\u90e8\u5206\u88ab\u8bc4\u4f30\u3002\u7136\u800c\uff0c\u8003\u8651\u5230\u7f3a\u5931\u5173\u952e\u5b57\u4e0d\u4f1a\u4ea7\u751f\u6ce8\u89e3\uff0c\u7f3a\u5c11\u6ce8\u89e3\u7ed3\u679c\u53ef\u80fd\u4f1a\u95f4\u63a5\u6539\u53d8\u5176\u5b83\u5173\u952e\u5b57\u7684\u884c\u4e3a\u3002"),(0,i.kt)("p",null,"\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u7f3a\u5c11\u5173\u952e\u5b57\u7684\u65ad\u8a00\u884c\u4e3a\u4e0e\u5173\u952e\u5b57\u4ea7\u751f\u7684\u67d0\u4e2a\u503c\u76f8\u540c\uff0c\u5173\u952e\u5b57\u5b9a\u4e49\u5e94\uff08SHOULD\uff09\u5728\u5df2\u77e5\u60c5\u51b5\u4e0b\u6ce8\u660e\u8fd9\u6837\u7684\u503c\u3002\u7136\u800c\uff0c\u5373\u4f7f\u4ea7\u751f\u9ed8\u8ba4\u884c\u4e3a\u7684\u503c\u5728\u5b58\u5728\u65f6\u4f1a\u4ea7\u751f\u6ce8\u89e3\u7ed3\u679c\uff0c\u4f46\u9ed8\u8ba4\u884c\u4e3a\u4ecd\u7136\u4e00\u5b9a\u4e0d\u80fd\uff08MUST NOT\uff09\u4ea7\u751f\u6ce8\u89e3\u3002"),(0,i.kt)("p",null,"\u7531\u4e8e\u6ce8\u89e3\u6536\u96c6\u5728\u8ba1\u7b97\u548c\u5185\u5b58\u65b9\u9762\u53ef\u80fd\u589e\u52a0\u663e\u8457\u6210\u672c\uff0c\u5b9e\u73b0\u53ef\u4ee5\u9009\u62e9\u4e0d\u4f7f\u7528\u6b64\u529f\u80fd\u3002\u4ee5\u6536\u96c6\u6ce8\u89e3\u4e3a\u6761\u4ef6\u7684\u5173\u952e\u5b57\u5e94\u5728\u9002\u5f53\u65f6\u63cf\u8ff0\u5408\u7406\u7684\u5907\u9009\u65b9\u6cd5\u3002\u672c\u6587\u6863\u4e2d\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"items")," \u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"additionalProperties")," \u5173\u952e\u5b57\u5c31\u6f14\u793a\u4e86\u8fd9\u79cd\u65b9\u6cd5\u3002"),(0,i.kt)("p",null,"\u8bf7\u6ce8\u610f\uff0c\u5bf9\u4e8e\u67d0\u4e2a\u5173\u952e\u5b57\uff0c\u5982\u679c\u6ca1\u6709\u5176\u5b83\u53ef\u884c\u7684\u66ff\u4ee3\u65b9\u6cd5\uff0c\u90a3\u4e48\u4e0d\u652f\u6301\u6ce8\u89e3\u6536\u96c6\u7684\u5b9e\u73b0\u5c06\u65e0\u6cd5\u652f\u6301\u5305\u542b\u5b83\u4eec\u7684\u5173\u952e\u5b57\u6216\u8bcd\u6c47\u8868\u3002"),(0,i.kt)("h3",{id:"74-\u6807\u8bc6\u7b26identifiers"},"7.4. \u6807\u8bc6\u7b26\uff08Identifiers\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'Identifiers define URIs for a schema, or affect how such URIs are resolved in references (Section 8.2.3), or both. The Core vocabulary defined in this document defines several identifying keywords, most notably "$id".'),(0,i.kt)("p",null,"Canonical schema URIs MUST NOT change while processing an instance, but keywords that affect URI-reference resolution MAY have behavior that is only fully determined at runtime."),(0,i.kt)("p",null,'While custom identifier keywords are possible, vocabulary designers should take care not to disrupt the functioning of core keywords. For example, the "$dynamicAnchor" keyword in this specification limits its URI resolution effects to the matching "$dynamicRef" keyword, leaving the behavior of "$ref" undisturbed.')),(0,i.kt)("p",null,"\u6807\u8bc6\u7b26\u4e3a\u6a21\u5f0f\u5b9a\u4e49 URI\uff0c\u6216\u5f71\u54cd\u5f15\u7528\u4e2d\u5982\u4f55\u89e3\u6790\u8fd9\u4e9b URI\uff08\u7b2c 8.2.3 \u8282\uff09\uff0c\u6216\u4e24\u8005\u517c\u6709\u3002\u672c\u6587\u6863\u5b9a\u4e49\u7684\u6838\u5fc3\u8bcd\u6c47\u8868\u5b9a\u4e49\u4e86\u51e0\u4e2a\u6807\u8bc6\u5173\u952e\u5b57\uff0c\u5c24\u5176\u662f ",(0,i.kt)("inlineCode",{parentName:"p"},"$id"),"\u3002"),(0,i.kt)("p",null,"\u5728\u5904\u7406\u5b9e\u4f8b\u65f6\uff0c\u6807\u51c6\u7684\u6a21\u5f0f URI \u4e00\u5b9a\u4e0d\u80fd\uff08MUST NOT\uff09\u66f4\u6539\uff0c\u4f46\u5f71\u54cd URI \u5f15\u7528\u89e3\u6790\u7684\u5173\u952e\u5b57\u53ef\u80fd\uff08MAY\uff09\u5728\u8fd0\u884c\u65f6\u624d\u5b8c\u5168\u786e\u5b9a\u5176\u884c\u4e3a\u3002"),(0,i.kt)("p",null,"\u867d\u7136\u81ea\u5b9a\u4e49\u6807\u8bc6\u7b26\u5173\u952e\u5b57\u662f\u53ef\u80fd\u7684\uff0c\u4f46\u8bcd\u6c47\u8868\u8bbe\u8ba1\u8005\u5e94\u6ce8\u610f\u4e0d\u8981\u5e72\u6270\u6838\u5fc3\u5173\u952e\u5b57\u7684\u529f\u80fd\u3002\u4f8b\u5982\uff0c\u672c\u89c4\u8303\u4e2d\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"$dynamicAnchor")," \u5173\u952e\u5b57\u5c06\u5176 URI \u89e3\u6790\u6548\u679c\u9650\u5236\u5728\u5339\u914d\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"$dynamicRef")," \u5173\u952e\u5b57\u4e0a\uff0c\u4fdd\u6301 ",(0,i.kt)("inlineCode",{parentName:"p"},"$ref")," \u7684\u884c\u4e3a\u4e0d\u53d7\u5e72\u6270\u3002"),(0,i.kt)("h3",{id:"75-\u5e94\u7528\u5668applicators"},"7.5. \u5e94\u7528\u5668\uff08Applicators\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"Applicators allow for building more complex schemas than can be accomplished with a single schema object. Evaluation of an instance against a schema document (Section 4.3) begins by applying the root schema (Section 4.3.5) to the complete instance document. From there, keywords known as applicators are used to determine which additional schemas are applied. Such schemas may be applied in-place to the current location, or to a child location."),(0,i.kt)("p",null,"The schemas to be applied may be present as subschemas comprising all or part of the keyword's value. Alternatively, an applicator may refer to a schema elsewhere in the same schema document, or in a different one. The mechanism for identifying such referenced schemas is defined by the keyword."),(0,i.kt)("p",null,"Applicator keywords also define how subschema or referenced schema boolean assertion (Section 7.6) results are modified and/or combined to produce the boolean result of the applicator. Applicators may apply any boolean logic operation to the assertion results of subschemas, but MUST NOT introduce new assertion conditions of their own."),(0,i.kt)("p",null,"Annotation (Section 7.7) results are preserved along with the instance location and the location of the schema keyword, so that applications can decide how to interpret multiple values.")),(0,i.kt)("p",null,"\u5e94\u7528\u5668\u5141\u8bb8\u6784\u5efa\u6bd4\u5355\u4e2a\u6a21\u5f0f\u5bf9\u8c61\u66f4\u590d\u6742\u7684\u6a21\u5f0f\u3002\u9488\u5bf9\u6a21\u5f0f\u6587\u6863\uff08\u7b2c 4.3 \u8282\uff09\u5bf9\u5b9e\u4f8b\u7684\u8bc4\u4f30\u4ece\u5c06\u6839\u6a21\u5f0f\uff08\u7b2c 4.3.5 \u8282\uff09\u5e94\u7528\u4e8e\u5b8c\u6574\u7684\u5b9e\u4f8b\u6587\u6863\u5f00\u59cb\u3002\u4ece\u90a3\u91cc\u5f00\u59cb\uff0c\u4f7f\u7528\u79f0\u4e3a\u5e94\u7528\u5668\u7684\u5173\u952e\u5b57\u6765\u786e\u5b9a\u5e94\u7528\u54ea\u4e9b\u989d\u5916\u7684\u6a21\u5f0f\u3002\u8fd9\u4e9b\u6a21\u5f0f\u53ef\u4ee5\u5c31\u5730\u5e94\u7528\u4e8e\u5f53\u524d\u4f4d\u7f6e\uff0c\u4e5f\u53ef\u4ee5\u5e94\u7528\u4e8e\u5b50\u4f4d\u7f6e\u3002"),(0,i.kt)("p",null,"\u8981\u5e94\u7528\u7684\u6a21\u5f0f\u53ef\u4ee5\u4f5c\u4e3a\u5b50\u6a21\u5f0f\u51fa\u73b0\uff0c\u5305\u62ec\u5173\u952e\u5b57\u503c\u7684\u5168\u90e8\u6216\u90e8\u5206\u3002\u6216\u8005\uff0c\u5e94\u7528\u5668\u53ef\u4ee5\u5f15\u7528\u540c\u4e00\u6a21\u5f0f\u6587\u6863\u4e2d\u7684\u5176\u5b83\u5730\u65b9\u6216\u4e0d\u540c\u6587\u6863\u4e2d\u7684\u6a21\u5f0f\u3002\u8bc6\u522b\u8fd9\u4e9b\u5f15\u7528\u6a21\u5f0f\u7684\u673a\u5236\u7531\u5173\u952e\u5b57\u5b9a\u4e49\u3002"),(0,i.kt)("p",null,"\u5e94\u7528\u5668\u5173\u952e\u5b57\u8fd8\u5b9a\u4e49\u5982\u4f55\u4fee\u6539\u548c/\u6216\u7ec4\u5408\u5b50\u6a21\u5f0f\u6216\u5f15\u7528\u6a21\u5f0f\u7684\u5e03\u5c14\u65ad\u8a00\uff08\u7b2c 7.6 \u8282\uff09\u7ed3\u679c\uff0c\u4ee5\u4ea7\u751f\u5e94\u7528\u5668\u7684\u5e03\u5c14\u7ed3\u679c\u3002\u5e94\u7528\u5668\u53ef\u4ee5\u5c06\u4efb\u4f55\u5e03\u5c14\u903b\u8f91\u64cd\u4f5c\u5e94\u7528\u4e8e\u5b50\u6a21\u5f0f\u7684\u65ad\u8a00\u7ed3\u679c\uff0c\u4f46\u4e0d\u80fd\uff08MUST NOT\uff09\u5f15\u5165\u65b0\u7684\u65ad\u8a00\u6761\u4ef6\u3002"),(0,i.kt)("p",null,"\u6ce8\u89e3\uff08\u7b2c 7.7 \u8282\uff09\u7ed3\u679c\u8fde\u540c\u5b9e\u4f8b\u4f4d\u7f6e\u548c\u6a21\u5f0f\u5173\u952e\u5b57\u4f4d\u7f6e\u4e00\u8d77\u4fdd\u7559\uff0c\u4ee5\u4fbf\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u51b3\u5b9a\u5982\u4f55\u89e3\u91ca\u591a\u4e2a\u503c\u3002"),(0,i.kt)("h4",{id:"751-\u5f15\u7528\u548c\u5f15\u7528\u6a21\u5f0freferenced-and-referencing-schemas"},"7.5.1. \u5f15\u7528\u548c\u5f15\u7528\u6a21\u5f0f\uff08Referenced and Referencing Schemas\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"As noted in Section 7.5, an applicator keyword may refer to a schema to be applied, rather than including it as a subschema in the applicator's value. In such situations, the schema being applied is known as the referenced schema, while the schema containing the applicator keyword is the referencing schema."),(0,i.kt)("p",null,"While root schemas and subschemas are static concepts based on a schema's position within a schema document, referenced and referencing schemas are dynamic. Different pairs of schemas may find themselves in various referenced and referencing arrangements during the evaluation of an instance against a schema."),(0,i.kt)("p",null,'For some by-reference applicators, such as "$ref" (Section 8.2.3.1), the referenced schema can be determined by static analysis of the schema document\'s lexical scope. Others, such as "$dynamicRef" (with "$dynamicAnchor"), may make use of dynamic scoping, and therefore only be resolvable in the process of evaluating the schema with an instance.')),(0,i.kt)("p",null,"\u5982\u7b2c 7.5 \u8282\u6240\u8ff0\uff0c\u5e94\u7528\u5668\u5173\u952e\u5b57\u53ef\u4ee5\u5f15\u7528\u8981\u5e94\u7528\u7684\u6a21\u5f0f\uff0c\u800c\u4e0d\u662f\u5c06\u5176\u4f5c\u4e3a\u5e94\u7528\u5668\u503c\u4e2d\u7684\u5b50\u6a21\u5f0f\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6b63\u5728\u5e94\u7528\u7684\u6a21\u5f0f\u79f0\u4e3a\u88ab\u5f15\u7528\u6a21\u5f0f\uff08referenced schema\uff09\uff0c\u800c\u5305\u542b\u5e94\u7528\u5668\u5173\u952e\u5b57\u7684\u6a21\u5f0f\u662f\u5f15\u7528\u6a21\u5f0f\uff08referencing schema\uff09\u3002"),(0,i.kt)("p",null,"\u867d\u7136\u6839\u6a21\u5f0f\u548c\u5b50\u6a21\u5f0f\u662f\u57fa\u4e8e\u6a21\u5f0f\u5728\u6a21\u5f0f\u6587\u6863\u4e2d\u7684\u4f4d\u7f6e\u7684\u9759\u6001\u6982\u5ff5\uff0c\u4f46\u5f15\u7528\u548c\u5f15\u7528\u6a21\u5f0f\u662f\u52a8\u6001\u7684\u3002\u5728\u9488\u5bf9\u6a21\u5f0f\u8bc4\u4f30\u5b9e\u4f8b\u8fc7\u7a0b\u4e2d\uff0c\u4e0d\u540c\u7684\u6a21\u5f0f\u5bf9\u53ef\u80fd\u4f1a\u53d1\u73b0\u81ea\u5df1\u5904\u4e8e\u5404\u79cd\u5f15\u7528\u548c\u5f15\u7528\u5b89\u6392\u4e2d\u3002"),(0,i.kt)("p",null,"\u5bf9\u4e8e\u4e00\u4e9b\u6309\u5f15\u7528\u5e94\u7528\u5668\uff0c\u5982 ",(0,i.kt)("inlineCode",{parentName:"p"},"$ref"),"\uff08\u7b2c 8.2.3.1 \u8282\uff09\uff0c\u53ef\u4ee5\u901a\u8fc7\u5bf9\u6a21\u5f0f\u6587\u6863\u7684\u8bcd\u6cd5\u8303\u56f4\u8fdb\u884c\u9759\u6001\u5206\u6790\u6765\u786e\u5b9a\u88ab\u5f15\u7528\u7684\u6a21\u5f0f\u3002\u5176\u5b83\u5e94\u7528\u5668\uff0c\u5982 ",(0,i.kt)("inlineCode",{parentName:"p"},"$dynamicRef"),"\uff08\u4e0e ",(0,i.kt)("inlineCode",{parentName:"p"},"$dynamicAnchor"),"\uff09\uff0c\u53ef\u80fd\u4f1a\u4f7f\u7528\u52a8\u6001\u4f5c\u7528\u57df\uff0c\u5728\u8bc4\u4f30\u5b9e\u4f8b\u7684\u6a21\u5f0f\u8fc7\u7a0b\u4e2d\u624d\u80fd\u89e3\u6790\u3002"),(0,i.kt)("h3",{id:"76-\u65ad\u8a00assertions"},"7.6. \u65ad\u8a00\uff08Assertions\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"JSON Schema can be used to assert constraints on a JSON document, which either passes or fails the assertions. This approach can be used to validate conformance with the constraints, or document what is needed to satisfy them."),(0,i.kt)("p",null,"JSON Schema implementations produce a single boolean result when evaluating an instance against schema assertions."),(0,i.kt)("p",null,"An instance can only fail an assertion that is present in the schema.")),(0,i.kt)("p",null,"JSON Schema \u53ef\u4ee5\u7528\u4e8e\u5bf9 JSON \u6587\u6863\u8fdb\u884c\u65ad\u8a00\u7ea6\u675f\uff0c\u8be5\u6587\u6863\u53ef\u4ee5\u901a\u8fc7\u6216\u4e0d\u901a\u8fc7\u65ad\u8a00\u3002\u8fd9\u79cd\u65b9\u6cd5\u53ef\u7528\u4e8e\u9a8c\u8bc1\u662f\u5426\u7b26\u5408\u7ea6\u675f\u6761\u4ef6\uff0c\u6216\u8bb0\u5f55\u6ee1\u8db3\u7ea6\u675f\u6761\u4ef6\u6240\u9700\u7684\u5185\u5bb9\u3002"),(0,i.kt)("p",null,"\u5728\u9488\u5bf9\u6a21\u5f0f\u65ad\u8a00\u8bc4\u4f30\u5b9e\u4f8b\u65f6\uff0cJSON Schema \u5b9e\u73b0\u4ea7\u751f\u4e00\u4e2a\u5e03\u5c14\u7ed3\u679c\u3002"),(0,i.kt)("p",null,"\u5b9e\u4f8b\u53ea\u80fd\u5728\u6a21\u5f0f\u4e2d\u5b58\u5728\u7684\u65ad\u8a00\u4e0a\u5931\u8d25\u3002"),(0,i.kt)("h4",{id:"761-\u65ad\u8a00\u548c\u5b9e\u4f8b\u57fa\u672c\u7c7b\u578bassertions-and-instance-primitive-types"},"7.6.1. \u65ad\u8a00\u548c\u5b9e\u4f8b\u57fa\u672c\u7c7b\u578b\uff08Assertions and Instance Primitive Types\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"Most assertions only constrain values within a certain primitive type. When the type of the instance is not of the type targeted by the keyword, the instance is considered to conform to the assertion."),(0,i.kt)("p",null,'For example, the "maxLength" keyword from the companion validation vocabulary ',(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/draft-bhutton-json-schema-validation-01"},"json-schema-validation"),": will only restrict certain strings (that are too long) from being valid. If the instance is a number, boolean, null, array, or object, then it is valid against this assertion."),(0,i.kt)("p",null,'This behavior allows keywords to be used more easily with instances that can be of multiple primitive types. The companion validation vocabulary also includes a "type" keyword which can independently restrict the instance to one or more primitive types. This allows for a concise expression of use cases such as a function that might return either a string of a certain length or a null value:'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "type": ["string", "null"],\n    "maxLength": 255\n}\n')),(0,i.kt)("p",null,'If "maxLength" also restricted the instance type to be a string, then this would be substantially more cumbersome to express because the example as written would not actually allow null values. Each keyword is evaluated separately unless explicitly specified otherwise, so if "maxLength" restricted the instance to strings, then including "null" in "type" would not have any useful effect.')),(0,i.kt)("p",null,"\u5927\u591a\u6570\u65ad\u8a00\u4ec5\u9650\u5236\u67d0\u4e00\u57fa\u672c\u7c7b\u578b\u5185\u7684\u503c\u3002\u5f53\u5b9e\u4f8b\u7684\u7c7b\u578b\u4e0d\u662f\u5173\u952e\u5b57\u9488\u5bf9\u7684\u7c7b\u578b\u65f6\uff0c\u5b9e\u4f8b\u88ab\u8ba4\u4e3a\u7b26\u5408\u65ad\u8a00\u3002"),(0,i.kt)("p",null,"\u4f8b\u5982\uff0c\u4f34\u968f\u9a8c\u8bc1\u8bcd\u6c47\u8868 ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/draft-bhutton-json-schema-validation-01"},"json-schema-validation")," \u4e2d\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"maxLength")," \u5173\u952e\u5b57\uff1a\u53ea\u4f1a\u9650\u5236\u67d0\u4e9b\u5b57\u7b26\u4e32\uff08\u8fc7\u957f\u7684\u5b57\u7b26\u4e32\uff09\u7684\u6709\u6548\u6027\u3002\u5982\u679c\u5b9e\u4f8b\u662f\u6570\u5b57\u3001\u5e03\u5c14\u503c\u3001\u7a7a\u503c\u3001\u6570\u7ec4\u6216\u5bf9\u8c61\uff0c\u90a3\u4e48\u5b83\u5c06\u7b26\u5408\u6b64\u65ad\u8a00\u3002"),(0,i.kt)("p",null,"\u8fd9\u79cd\u884c\u4e3a\u4f7f\u5f97\u5173\u952e\u5b57\u66f4\u5bb9\u6613\u4e0e\u53ef\u4ee5\u662f\u591a\u79cd\u57fa\u672c\u7c7b\u578b\u7684\u5b9e\u4f8b\u4e00\u8d77\u4f7f\u7528\u3002\u4f34\u968f\u9a8c\u8bc1\u8bcd\u6c47\u8868\u8fd8\u5305\u62ec\u4e00\u4e2a ",(0,i.kt)("inlineCode",{parentName:"p"},"type")," \u5173\u952e\u5b57\uff0c\u53ef\u4ee5\u72ec\u7acb\u5730\u5c06\u5b9e\u4f8b\u9650\u5236\u4e3a\u4e00\u4e2a\u6216\u591a\u4e2a\u57fa\u672c\u7c7b\u578b\u3002\u8fd9\u5141\u8bb8\u7b80\u6d01\u5730\u8868\u793a\u8bf8\u5982\u51fd\u6570\u53ef\u80fd\u8fd4\u56de\u67d0\u4e2a\u957f\u5ea6\u7684\u5b57\u7b26\u4e32\u6216\u7a7a\u503c\u7684\u7528\u4f8b\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "type": ["string", "null"],\n    "maxLength": 255\n}\n')),(0,i.kt)("p",null,"\u5982\u679c ",(0,i.kt)("inlineCode",{parentName:"p"},"maxLength")," \u4e5f\u5c06\u5b9e\u4f8b\u7c7b\u578b\u9650\u5236\u4e3a\u5b57\u7b26\u4e32\uff0c\u90a3\u4e48\u8fd9\u5c06\u66f4\u52a0\u7e41\u7410\uff0c\u56e0\u4e3a\u4e66\u5199\u7684\u793a\u4f8b\u5b9e\u9645\u4e0a\u4e0d\u5141\u8bb8\u7a7a\u503c\u3002\u9664\u975e\u53e6\u6709\u660e\u786e\u89c4\u5b9a\uff0c\u5426\u5219\u6bcf\u4e2a\u5173\u952e\u5b57\u90fd\u5c06\u5355\u72ec\u8bc4\u4f30\uff0c\u56e0\u6b64\u5982\u679c ",(0,i.kt)("inlineCode",{parentName:"p"},"maxLength")," \u5c06\u5b9e\u4f8b\u9650\u5236\u4e3a\u5b57\u7b26\u4e32\uff0c\u90a3\u4e48\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"type"),' \u4e2d\u5305\u542b "null" \u5c06\u6ca1\u6709\u4efb\u4f55\u5b9e\u9645\u6548\u679c\u3002'),(0,i.kt)("h3",{id:"77-\u6ce8\u89e3annotations"},"7.7. \u6ce8\u89e3\uff08Annotations\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"JSON Schema can annotate an instance with information, whenever the instance validates against the schema object containing the annotation, and all of its parent schema objects. The information can be a simple value, or can be calculated based on the instance contents."),(0,i.kt)("p",null,"Annotations are attached to specific locations in an instance. Since many subschemas can be applied to any single location, applications may need to decide how to handle differing annotation values being attached to the same instance location by the same schema keyword in different schema objects."),(0,i.kt)("p",null,"Unlike assertion results, annotation data can take a wide variety of forms, which are provided to applications to use as they see fit. JSON Schema implementations are not expected to make use of the collected information on behalf of applications."),(0,i.kt)("p",null,"Unless otherwise specified, the value of an annotation keyword is the keyword's value. However, other behaviors are possible. For example, JSON Hyper-Schema's ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/draft-handrews-json-schema-hyperschema-02"},"json-hyper-schema"),' "links" keyword is a complex annotation that produces a value based in part on the instance data.'),(0,i.kt)("p",null,'While "short-circuit" evaluation is possible for assertions, collecting annotations requires examining all schemas that apply to an instance location, even if they cannot change the overall assertion result. The only exception is that subschemas of a schema object that has failed validation MAY be skipped, as annotations are not retained for failing schemas.')),(0,i.kt)("p",null,"JSON Schema \u53ef\u4ee5\u5728\u5b9e\u4f8b\u9a8c\u8bc1\u901a\u8fc7\u5305\u542b\u6ce8\u89e3\u7684\u6a21\u5f0f\u5bf9\u8c61\u53ca\u5176\u6240\u6709\u7236\u6a21\u5f0f\u5bf9\u8c61\u65f6\uff0c\u4e3a\u5b9e\u4f8b\u9644\u52a0\u4fe1\u606f\u3002\u4fe1\u606f\u53ef\u4ee5\u662f\u4e00\u4e2a\u7b80\u5355\u503c\uff0c\u4e5f\u53ef\u4ee5\u57fa\u4e8e\u5b9e\u4f8b\u5185\u5bb9\u8ba1\u7b97\u5f97\u51fa\u3002"),(0,i.kt)("p",null,"\u6ce8\u89e3\u9644\u52a0\u5230\u5b9e\u4f8b\u7684\u7279\u5b9a\u4f4d\u7f6e\u3002\u7531\u4e8e\u8bb8\u591a\u5b50\u6a21\u5f0f\u53ef\u4ee5\u5e94\u7528\u4e8e\u5355\u4e2a\u4f4d\u7f6e\uff0c\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u9700\u8981\u51b3\u5b9a\u5982\u4f55\u5904\u7406\u7531\u4e0d\u540c\u6a21\u5f0f\u5bf9\u8c61\u4e2d\u7684\u76f8\u540c\u6a21\u5f0f\u5173\u952e\u5b57\u9644\u52a0\u5230\u76f8\u540c\u5b9e\u4f8b\u4f4d\u7f6e\u7684\u4e0d\u540c\u6ce8\u89e3\u503c\u3002"),(0,i.kt)("p",null,"\u4e0e\u65ad\u8a00\u7ed3\u679c\u4e0d\u540c\uff0c\u6ce8\u89e3\u6570\u636e\u53ef\u4ee5\u91c7\u7528\u5404\u79cd\u5f62\u5f0f\uff0c\u4f9b\u5e94\u7528\u7a0b\u5e8f\u6839\u636e\u9700\u8981\u4f7f\u7528\u3002\u4e0d\u9700\u8981 JSON Schema \u5b9e\u73b0\u4ee3\u8868\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u6536\u96c6\u5230\u7684\u4fe1\u606f\u3002"),(0,i.kt)("p",null,"\u9664\u975e\u53e6\u6709\u89c4\u5b9a\uff0c\u6ce8\u89e3\u5173\u952e\u5b57\u7684\u503c\u5c31\u662f\u5173\u952e\u5b57\u7684\u503c\u3002\u7136\u800c\uff0c\u5176\u5b83\u884c\u4e3a\u4e5f\u662f\u53ef\u80fd\u7684\u3002\u4f8b\u5982\uff0cJSON Hyper-Schema ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/draft-handrews-json-schema-hyperschema-02"},"json-hyper-schema")," \u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"links")," \u5173\u952e\u5b57\u662f\u4e00\u4e2a\u590d\u6742\u6ce8\u89e3\uff0c\u5176\u503c\u90e8\u5206\u57fa\u4e8e\u5b9e\u4f8b\u6570\u636e\u3002"),(0,i.kt)("p",null,"\u5c3d\u7ba1\u65ad\u8a00\u53ef\u4ee5\u8fdb\u884c\u201c\u77ed\u8def\u201d\u6c42\u503c\uff0c\u4f46\u6536\u96c6\u6ce8\u89e3\u9700\u8981\u68c0\u67e5\u9002\u7528\u4e8e\u5b9e\u4f8b\u4f4d\u7f6e\u7684\u6240\u6709\u6a21\u5f0f\uff0c\u5373\u4f7f\u5b83\u4eec\u65e0\u6cd5\u6539\u53d8\u6574\u4f53\u65ad\u8a00\u7ed3\u679c\u3002\u552f\u4e00\u7684\u4f8b\u5916\u662f\uff0c\u53ef\u4ee5\u8df3\u8fc7\u672a\u901a\u8fc7\u9a8c\u8bc1\u7684\u6a21\u5f0f\u5bf9\u8c61\u7684\u5b50\u6a21\u5f0f\uff0c\u56e0\u4e3a\u672a\u901a\u8fc7\u9a8c\u8bc1\u7684\u6a21\u5f0f\u4e0d\u4fdd\u7559\u6ce8\u89e3\u3002"),(0,i.kt)("h4",{id:"771-\u6536\u96c6\u6ce8\u89e3collecting-annotations"},"7.7.1. \u6536\u96c6\u6ce8\u89e3\uff08Collecting Annotations\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"Annotations are collected by keywords that explicitly define annotation-collecting behavior. Note that boolean schemas cannot produce annotations as they do not make use of keywords."),(0,i.kt)("p",null,"A collected annotation MUST include the following information:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The name of the keyword that produces the annotation"),(0,i.kt)("li",{parentName:"ul"},"The instance location to which it is attached, as a JSON Pointer"),(0,i.kt)("li",{parentName:"ul"},'The schema location path, indicating how reference keywords such as "$ref" were followed to reach the absolute schema location.'),(0,i.kt)("li",{parentName:"ul"},"The absolute schema location of the attaching keyword, as a URI. This MAY be omitted if it is the same as the schema location path from above."),(0,i.kt)("li",{parentName:"ul"},"The attached value(s)"))),(0,i.kt)("p",null,"\u6ce8\u89e3\u7531\u660e\u786e\u5b9a\u4e49\u6ce8\u89e3\u6536\u96c6\u884c\u4e3a\u7684\u5173\u952e\u5b57\u6536\u96c6\u3002\u8bf7\u6ce8\u610f\uff0c\u5e03\u5c14\u6a21\u5f0f\u65e0\u6cd5\u751f\u6210\u6ce8\u89e3\uff0c\u56e0\u4e3a\u5b83\u4eec\u4e0d\u4f7f\u7528\u5173\u952e\u5b57\u3002"),(0,i.kt)("p",null,"\u6536\u96c6\u5230\u7684\u6ce8\u89e3\u5fc5\u987b\uff08MUST\uff09\u5305\u62ec\u4ee5\u4e0b\u4fe1\u606f\uff1a"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u4ea7\u751f\u6ce8\u89e3\u7684\u5173\u952e\u5b57\u7684\u540d\u79f0"),(0,i.kt)("li",{parentName:"ul"},"\u9644\u52a0\u7684\u5b9e\u4f8b\u4f4d\u7f6e\uff0c\u4f5c\u4e3a JSON Pointer"),(0,i.kt)("li",{parentName:"ul"},"\u6a21\u5f0f\u4f4d\u7f6e\u8def\u5f84\uff0c\u8868\u793a\u5982\u4f55\u8ddf\u968f\u8bf8\u5982 ",(0,i.kt)("inlineCode",{parentName:"li"},"$ref")," \u4e4b\u7c7b\u7684\u5f15\u7528\u5173\u952e\u5b57\u4ee5\u5230\u8fbe\u7edd\u5bf9\u6a21\u5f0f\u4f4d\u7f6e"),(0,i.kt)("li",{parentName:"ul"},"\u9644\u52a0\u5173\u952e\u5b57\u7684\u7edd\u5bf9\u6a21\u5f0f\u4f4d\u7f6e\uff0c\u4f5c\u4e3a URI\u3002\u5982\u679c\u5b83\u4e0e\u4e0a\u9762\u7684\u6a21\u5f0f\u4f4d\u7f6e\u8def\u5f84\u76f8\u540c\uff0c\u5219\u53ef\u4ee5\u7701\u7565"),(0,i.kt)("li",{parentName:"ul"},"\u9644\u52a0\u7684\u503c")),(0,i.kt)("h5",{id:"7711-\u533a\u5206\u591a\u4e2a\u503cdistinguishing-among-multiple-values"},"7.7.1.1. \u533a\u5206\u591a\u4e2a\u503c\uff08Distinguishing Among Multiple Values\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"Applications MAY make decisions on which of multiple annotation values to use based on the schema location that contributed the value. This is intended to allow flexible usage. Collecting the schema location facilitates such usage."),(0,i.kt)("p",null,"For example, consider this schema, which uses annotations and assertions from the Validation specification ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/draft-bhutton-json-schema-validation-01"},"json-schema-validation"),":"),(0,i.kt)("p",null,"Note that some lines are wrapped for clarity."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "title": "Feature list",\n    "type": "array",\n    "prefixItems": [\n        {\n            "title": "Feature A",\n            "properties": {\n                "enabled": {\n                    "$ref": "#/$defs/enabledToggle",\n                    "default": true\n                }\n            }\n        },\n        {\n            "title": "Feature B",\n            "properties": {\n                "enabled": {\n                    "description": "If set to null, Feature B\n                                    inherits the enabled\n                                    value from Feature A",\n                    "$ref": "#/$defs/enabledToggle"\n                }\n            }\n        }\n    ],\n    "$defs": {\n        "enabledToggle": {\n            "title": "Enabled",\n            "description": "Whether the feature is enabled (true),\n                            disabled (false), or under\n                            automatic control (null)",\n            "type": ["boolean", "null"],\n            "default": null\n        }\n    }\n}\n')),(0,i.kt)("p",null,'In this example, both Feature A and Feature B make use of the re-usable "enabledToggle" schema. That schema uses the "title", "description", and "default" annotations. Therefore the application has to decide how to handle the additional "default" value for Feature A, and the additional "description" value for Feature B.'),(0,i.kt)("p",null,'The application programmer and the schema author need to agree on the usage. For this example, let\'s assume that they agree that the most specific "default" value will be used, and any additional, more generic "default" values will be silently ignored. Let\'s also assume that they agree that all "description" text is to be used, starting with the most generic, and ending with the most specific. This requires the schema author to write descriptions that work when combined in this way.'),(0,i.kt)("p",null,'The application can use the schema location path to determine which values are which. The values in the feature\'s immediate "enabled" property schema are more specific, while the values under the re-usable schema that is referenced to with "$ref" are more generic. The schema location path will show whether each value was found by crossing a "$ref" or not.'),(0,i.kt)("p",null,'Feature A will therefore use a default value of true, while Feature B will use the generic default value of null. Feature A will only have the generic description from the "enabledToggle" schema, while Feature B will use that description, and also append its locally defined description that explains how to interpret a null value.'),(0,i.kt)("p",null,'Note that there are other reasonable approaches that a different application might take. For example, an application may consider the presence of two different values for "default" to be an error, regardless of their schema locations.')),(0,i.kt)("p",null,"\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\uff08MAY\uff09\u6839\u636e\u63d0\u4f9b\u503c\u7684\u6a21\u5f0f\u4f4d\u7f6e\u6765\u51b3\u5b9a\u4f7f\u7528\u591a\u4e2a\u6ce8\u89e3\u503c\u4e2d\u7684\u54ea\u4e00\u4e2a\u3002\u8fd9\u65e8\u5728\u5141\u8bb8\u7075\u6d3b\u4f7f\u7528\u3002\u6536\u96c6\u6a21\u5f0f\u4f4d\u7f6e\u6709\u52a9\u4e8e\u8fd9\u79cd\u4f7f\u7528\u3002"),(0,i.kt)("p",null,"\u4f8b\u5982\uff0c\u8003\u8651\u8fd9\u4e2a\u6a21\u5f0f\uff0c\u5b83\u4f7f\u7528\u4e86\u6765\u81ea\u9a8c\u8bc1\u89c4\u8303 ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/draft-bhutton-json-schema-validation-01"},"json-schema-validation")," \u7684\u6ce8\u89e3\u548c\u65ad\u8a00\uff1a"),(0,i.kt)("p",null,"\u8bf7\u6ce8\u610f\uff0c\u4e3a\u4e86\u6e05\u6670\u8d77\u89c1\uff0c\u67d0\u4e9b\u884c\u5df2\u6362\u884c\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "title": "Feature list",\n    "type": "array",\n    "prefixItems": [\n        {\n            "title": "Feature A",\n            "properties": {\n                "enabled": {\n                    "$ref": "#/$defs/enabledToggle",\n                    "default": true\n                }\n            }\n        },\n        {\n            "title": "Feature B",\n            "properties": {\n                "enabled": {\n                    "description": "If set to null, Feature B\n                                    inherits the enabled\n                                    value from Feature A",\n                    "$ref": "#/$defs/enabledToggle"\n                }\n            }\n        }\n    ],\n    "$defs": {\n        "enabledToggle": {\n            "title": "Enabled",\n            "description": "Whether the feature is enabled (true),\n                            disabled (false), or under\n                            automatic control (null)",\n            "type": ["boolean", "null"],\n            "default": null\n        }\n    }\n}\n')),(0,i.kt)("p",null,"\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u529f\u80fd A \u548c\u529f\u80fd B \u90fd\u4f7f\u7528\u4e86\u53ef\u91cd\u7528\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"enabledToggle")," \u6a21\u5f0f\u3002\u8be5\u6a21\u5f0f\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"title"),"\u3001",(0,i.kt)("inlineCode",{parentName:"p"},"description")," \u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"default")," \u6ce8\u89e3\u3002\u56e0\u6b64\uff0c\u5e94\u7528\u7a0b\u5e8f\u5fc5\u987b\u51b3\u5b9a\u5982\u4f55\u5904\u7406\u529f\u80fd A \u7684\u9644\u52a0 ",(0,i.kt)("inlineCode",{parentName:"p"},"default")," \u503c\u548c\u529f\u80fd B \u7684\u9644\u52a0 ",(0,i.kt)("inlineCode",{parentName:"p"},"description")," \u503c\u3002"),(0,i.kt)("p",null,"\u5e94\u7528\u7a0b\u5e8f\u7f16\u7a0b\u8005\u548c\u6a21\u5f0f\u4f5c\u8005\u9700\u8981\u5c31\u7528\u6cd5\u8fbe\u6210\u4e00\u81f4\u3002\u5bf9\u4e8e\u8fd9\u4e2a\u4f8b\u5b50\uff0c\u5047\u8bbe\u4ed6\u4eec\u540c\u610f\u4f7f\u7528\u6700\u5177\u4f53\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"default")," \u503c\uff0c\u800c\u5176\u5b83\u66f4\u901a\u7528\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"default")," \u503c\u5c06\u88ab\u9759\u9ed8\u5730\u5ffd\u7565\u3002\u8fd8\u5047\u8bbe\u4ed6\u4eec\u540c\u610f\u4f7f\u7528\u6240\u6709\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"description")," \u6587\u672c\uff0c\u4ece\u6700\u901a\u7528\u7684\u5f00\u59cb\uff0c\u5230\u6700\u5177\u4f53\u7684\u7ed3\u675f\u3002\u8fd9\u8981\u6c42\u6a21\u5f0f\u4f5c\u8005\u7f16\u5199\u5728\u8fd9\u79cd\u65b9\u5f0f\u4e0b\u7ec4\u5408\u65f6\u53ef\u884c\u7684\u63cf\u8ff0\u3002"),(0,i.kt)("p",null,"\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u4f7f\u7528\u6a21\u5f0f\u4f4d\u7f6e\u8def\u5f84\u6765\u786e\u5b9a\u54ea\u4e9b\u503c\u662f\u54ea\u4e9b\u3002\u4f4d\u4e8e\u529f\u80fd\u7684\u76f4\u63a5 ",(0,i.kt)("inlineCode",{parentName:"p"},"enabled")," \u5c5e\u6027\u6a21\u5f0f\u4e2d\u7684\u503c\u66f4\u5177\u4f53\uff0c\u800c\u901a\u8fc7 ",(0,i.kt)("inlineCode",{parentName:"p"},"$ref")," \u5f15\u7528\u7684\u53ef\u91cd\u7528\u6a21\u5f0f\u4e2d\u7684\u503c\u66f4\u901a\u7528\u3002\u6a21\u5f0f\u4f4d\u7f6e\u8def\u5f84\u5c06\u663e\u793a\u6bcf\u4e2a\u503c\u662f\u901a\u8fc7\u8de8\u8d8a ",(0,i.kt)("inlineCode",{parentName:"p"},"$ref")," \u627e\u5230\u7684\u8fd8\u662f\u6ca1\u6709\u8de8\u8d8a\u3002"),(0,i.kt)("p",null,"\u56e0\u6b64\uff0c\u529f\u80fd A \u5c06\u4f7f\u7528\u9ed8\u8ba4\u503c true\uff0c\u800c\u529f\u80fd B \u5c06\u4f7f\u7528\u901a\u7528\u9ed8\u8ba4\u503c null\u3002\u529f\u80fd A \u5c06\u4ec5\u5177\u6709\u6765\u81ea ",(0,i.kt)("inlineCode",{parentName:"p"},"enabledToggle")," \u6a21\u5f0f\u7684\u901a\u7528\u63cf\u8ff0\uff0c\u800c\u529f\u80fd B \u5c06\u4f7f\u7528\u8be5\u63cf\u8ff0\uff0c\u5e76\u9644\u52a0\u5176\u672c\u5730\u5b9a\u4e49\u7684\u63cf\u8ff0\uff0c\u89e3\u91ca\u5982\u4f55\u89e3\u91ca null \u503c\u3002"),(0,i.kt)("p",null,"\u8bf7\u6ce8\u610f\uff0c\u4e0d\u540c\u7684\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u91c7\u7528\u5176\u5b83\u5408\u7406\u7684\u65b9\u6cd5\u3002\u4f8b\u5982\uff0c\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u8ba4\u4e3a\u4e24\u4e2a\u4e0d\u540c\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"default")," \u503c\u662f\u9519\u8bef\u7684\uff0c\u800c\u4e0d\u8003\u8651\u5b83\u4eec\u7684\u6a21\u5f0f\u4f4d\u7f6e\u3002"),(0,i.kt)("h5",{id:"7712-\u6ce8\u91ca\u548c\u65ad\u8a00annotations-and-assertions"},"7.7.1.2. \u6ce8\u91ca\u548c\u65ad\u8a00\uff08Annotations and Assertions\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"Schema objects that produce a false assertion result MUST NOT produce any annotation results, whether from their own keywords or from keywords in subschemas."),(0,i.kt)("p",null,"Note that the overall schema results may still include annotations collected from other schema locations. Given this schema:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "oneOf": [\n        {\n            "title": "Integer Value",\n            "type": "integer"\n        },\n        {\n            "title": "String Value",\n            "type": "string"\n        }\n    ]\n}\n')),(0,i.kt)("p",null,'Against the instance "This is a string", the title annotation "Integer Value" is discarded because the type assertion in that schema object fails. The title annotation "String Value" is kept, as the instance passes the string type assertions.')),(0,i.kt)("p",null,"\u4ea7\u751f\u9519\u8bef\u65ad\u8a00\u7ed3\u679c\u7684\u6a21\u5f0f\u5bf9\u8c61\u5fc5\u987b\u4e0d\uff08MUST NOT\uff09\u4ea7\u751f\u4efb\u4f55\u6ce8\u91ca\u7ed3\u679c\uff0c\u65e0\u8bba\u662f\u6765\u81ea\u5b83\u4eec\u81ea\u5df1\u7684\u5173\u952e\u5b57\u8fd8\u662f\u5b50\u6a21\u5f0f\u4e2d\u7684\u5173\u952e\u5b57\u3002"),(0,i.kt)("p",null,"\u8bf7\u6ce8\u610f\uff0c\u603b\u4f53\u6a21\u5f0f\u7ed3\u679c\u53ef\u80fd\u4ecd\u7136\u5305\u62ec\u4ece\u5176\u5b83\u6a21\u5f0f\u4f4d\u7f6e\u6536\u96c6\u7684\u6ce8\u91ca\u3002\u7ed9\u5b9a\u8fd9\u4e2a\u6a21\u5f0f\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "oneOf": [\n        {\n            "title": "Integer Value",\n            "type": "integer"\n        },\n        {\n            "title": "String Value",\n            "type": "string"\n        }\n    ]\n}\n')),(0,i.kt)("p",null,'\u9488\u5bf9\u5b9e\u4f8b "This is a string"\uff0c\u6807\u9898\u6ce8\u91ca "Integer Value" \u88ab\u4e22\u5f03\uff0c\u56e0\u4e3a\u8be5\u6a21\u5f0f\u5bf9\u8c61\u4e2d\u7684\u7c7b\u578b\u65ad\u8a00\u5931\u8d25\u3002\u4fdd\u7559\u6807\u9898\u6ce8\u91ca "String Value"\uff0c\u56e0\u4e3a\u5b9e\u4f8b\u901a\u8fc7\u4e86\u5b57\u7b26\u4e32\u7c7b\u578b\u65ad\u8a00\u3002'),(0,i.kt)("h5",{id:"7713-\u6ce8\u91ca\u548c\u5e94\u7528\u5668annotations-and-applicators"},"7.7.1.3. \u6ce8\u91ca\u548c\u5e94\u7528\u5668\uff08Annotations and Applicators\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"In addition to possibly defining annotation results of their own, applicator keywords aggregate the annotations collected in their subschema(s) or referenced schema(s).")),(0,i.kt)("p",null,"\u9664\u4e86\u53ef\u80fd\u5b9a\u4e49\u81ea\u5df1\u7684\u6ce8\u91ca\u7ed3\u679c\u5916\uff0c\u5e94\u7528\u5668\u5173\u952e\u5b57\u8fd8\u4f1a\u805a\u5408\u5b83\u4eec\u7684\u5b50\u6a21\u5f0f\u6216\u5f15\u7528\u6a21\u5f0f\u4e2d\u6536\u96c6\u7684\u6ce8\u91ca\u3002"),(0,i.kt)("h3",{id:"78-\u4fdd\u7559\u4f4d\u7f6ereserved-locations"},"7.8. \u4fdd\u7559\u4f4d\u7f6e\uff08Reserved Locations\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"A fourth category of keywords simply reserve a location to hold re-usable components or data of interest to schema authors that is not suitable for re-use. These keywords do not affect validation or annotation results. Their purpose in the core vocabulary is to ensure that locations are available for certain purposes and will not be redefined by extension keywords."),(0,i.kt)("p",null,"While these keywords do not directly affect results, as explained in section 9.4.2 unrecognized extension keywords that reserve locations for re-usable schemas may have undesirable interactions with references in certain circumstances.")),(0,i.kt)("p",null,"\u7b2c\u56db\u7c7b\u5173\u952e\u5b57\u7b80\u5355\u5730\u4fdd\u7559\u4f4d\u7f6e\u4ee5\u4fdd\u5b58\u53ef\u91cd\u7528\u7ec4\u4ef6\u6216\u6a21\u5f0f\u4f5c\u8005\u611f\u5174\u8da3\u7684\u6570\u636e\uff0c\u8fd9\u4e9b\u6570\u636e\u4e0d\u9002\u5408\u91cd\u7528\u3002\u8fd9\u4e9b\u5173\u952e\u5b57\u4e0d\u5f71\u54cd\u9a8c\u8bc1\u6216\u6ce8\u91ca\u7ed3\u679c\u3002\u5b83\u4eec\u5728\u6838\u5fc3\u8bcd\u6c47\u4e2d\u7684\u76ee\u7684\u662f\u786e\u4fdd\u67d0\u4e9b\u7528\u9014\u7684\u4f4d\u7f6e\u53ef\u7528\uff0c\u5e76\u4e14\u4e0d\u4f1a\u88ab\u6269\u5c55\u5173\u952e\u5b57\u91cd\u65b0\u5b9a\u4e49\u3002"),(0,i.kt)("p",null,"\u867d\u7136\u8fd9\u4e9b\u5173\u952e\u5b57\u4e0d\u76f4\u63a5\u5f71\u54cd\u7ed3\u679c\uff0c\u4f46\u5982\u7b2c 9.4.2 \u8282\u6240\u8ff0\uff0c\u4fdd\u7559\u53ef\u91cd\u7528\u6a21\u5f0f\u4f4d\u7f6e\u7684\u65e0\u6cd5\u8bc6\u522b\u7684\u6269\u5c55\u5173\u952e\u5b57\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u53ef\u80fd\u4e0e\u5f15\u7528\u4ea7\u751f\u4e0d\u826f\u7684\u76f8\u4e92\u4f5c\u7528\u3002"),(0,i.kt)("h3",{id:"79-\u52a0\u8f7d\u5b9e\u4f8b\u6570\u636eloading-instance-data"},"7.9. \u52a0\u8f7d\u5b9e\u4f8b\u6570\u636e\uff08Loading Instance Data\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"While none of the vocabularies defined as part of this or the associated documents define a keyword which may target and/or load instance data, it is possible that other vocabularies may wish to do so."),(0,i.kt)("p",null,"Keywords MAY be defined to use JSON Pointers or Relative JSON Pointers to examine parts of an instance outside the current evaluation location."),(0,i.kt)("p",null,"Keywords that allow adjusting the location using a Relative JSON Pointer SHOULD default to using the current location if a default is desireable.")),(0,i.kt)("p",null,"\u867d\u7136\u8fd9\u4e2a\u6216\u76f8\u5173\u6587\u6863\u4e2d\u5b9a\u4e49\u7684\u8bcd\u6c47\u6ca1\u6709\u5b9a\u4e49\u53ef\u80fd\u5b9a\u4f4d\u548c/\u6216\u52a0\u8f7d\u5b9e\u4f8b\u6570\u636e\u7684\u5173\u952e\u5b57\uff0c\u4f46\u5176\u5b83\u8bcd\u6c47\u53ef\u80fd\u5e0c\u671b\u8fd9\u6837\u505a\u3002"),(0,i.kt)("p",null,"\u5173\u952e\u5b57\u53ef\u4ee5\uff08MAY\uff09\u5b9a\u4e49\u4e3a\u4f7f\u7528 JSON \u6307\u9488\u6216\u76f8\u5bf9 JSON \u6307\u9488\u67e5\u770b\u5f53\u524d\u8bc4\u4f30\u4f4d\u7f6e\u4e4b\u5916\u7684\u5b9e\u4f8b\u90e8\u5206\u3002"),(0,i.kt)("p",null,"\u5141\u8bb8\u4f7f\u7528\u76f8\u5bf9 JSON \u6307\u9488\u8c03\u6574\u4f4d\u7f6e\u7684\u5173\u952e\u5b57\u5e94\u8be5\u9ed8\u8ba4\u4f7f\u7528\u5f53\u524d\u4f4d\u7f6e\uff08\u5982\u679c\u9700\u8981\u9ed8\u8ba4\u503c\u7684\u8bdd\uff09\u3002"),(0,i.kt)("h2",{id:"8-json-schema-core-\u8bcd\u6c47\u8868the-json-schema-core-vocabulary"},"8. JSON Schema Core \u8bcd\u6c47\u8868\uff08The JSON Schema Core Vocabulary\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'Keywords declared in this section, which all begin with "$", make up the JSON Schema Core vocabulary. These keywords are either required in order to process any schema or meta-schema, including those split across multiple documents, or exist to reserve keywords for purposes that require guaranteed interoperability.'),(0,i.kt)("p",null,'The Core vocabulary MUST be considered mandatory at all times, in order to bootstrap the processing of further vocabularies. Meta-schemas that use the "$vocabulary" (Section 8.1) keyword to declare the vocabularies in use MUST explicitly list the Core vocabulary, which MUST have a value of true indicating that it is required.'),(0,i.kt)("p",null,'The behavior of a false value for this vocabulary (and only this vocabulary) is undefined, as is the behavior when "$vocabulary" is present but the Core vocabulary is not included. However, it is RECOMMENDED that implementations detect these cases and raise an error when they occur. It is not meaningful to declare that a meta-schema optionally uses Core.'),(0,i.kt)("p",null,'Meta-schemas that do not use "$vocabulary" MUST be considered to require the Core vocabulary as if its URI were present with a value of true.'),(0,i.kt)("p",null,"The current URI for the Core vocabulary is: ",(0,i.kt)("a",{parentName:"p",href:"https://json-schema.org/draft/2020-12/vocab/core"},"https://json-schema.org/draft/2020-12/vocab/core"),"."),(0,i.kt)("p",null,"The current URI for the corresponding meta-schema is: ",(0,i.kt)("a",{parentName:"p",href:"https://json-schema.org/draft/2020-12/meta/core"},"https://json-schema.org/draft/2020-12/meta/core"),"."),(0,i.kt)("p",null,'While the "$" prefix is not formally reserved for the Core vocabulary, it is RECOMMENDED that extension keywords (in vocabularies or otherwise) begin with a character other than "$" to avoid possible future collisions.')),(0,i.kt)("p",null,"\u672c\u8282\u4e2d\u58f0\u660e\u7684\u4ee5 ",(0,i.kt)("inlineCode",{parentName:"p"},"$")," \u5f00\u5934\u7684\u5173\u952e\u5b57\u7ec4\u6210\u4e86 JSON Schema Core \u8bcd\u6c47\u8868\u3002\u8fd9\u4e9b\u5173\u952e\u5b57\u8981\u4e48\u662f\u5904\u7406\u4efb\u4f55\u6a21\u5f0f\u6216\u5143\u6a21\u5f0f\uff08\u5305\u62ec\u90a3\u4e9b\u5206\u5e03\u5728\u591a\u4e2a\u6587\u6863\u4e2d\u7684\u6a21\u5f0f\uff09\u6240\u5fc5\u9700\u7684\uff0c\u8981\u4e48\u662f\u4e3a\u9700\u8981\u786e\u4fdd\u4e92\u64cd\u4f5c\u6027\u7684\u76ee\u7684\u4fdd\u7559\u5173\u952e\u5b57\u3002"),(0,i.kt)("p",null,"\u5728\u4efb\u4f55\u65f6\u5019\uff0c\u90fd\u5fc5\u987b\uff08MUST\uff09\u5c06 Core \u8bcd\u6c47\u8868\u89c6\u4e3a\u5f3a\u5236\u6027\u7684\uff0c\u4ee5\u4fbf\u542f\u52a8\u5176\u5b83\u8bcd\u6c47\u8868\u7684\u5904\u7406\u3002\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"$vocabulary"),"\uff08\u7b2c 8.1 \u8282\uff09\u5173\u952e\u5b57\u58f0\u660e\u6b63\u5728\u4f7f\u7528\u7684\u8bcd\u6c47\u8868\u7684\u5143\u6a21\u5f0f\u5fc5\u987b\uff08MUST\uff09\u660e\u786e\u5217\u51fa Core \u8bcd\u6c47\u8868\uff0c\u8be5\u8bcd\u6c47\u8868\u5fc5\u987b\uff08MUST\uff09\u5177\u6709\u8868\u793a\u5176\u4e3a\u5fc5\u9700\u7684 true \u503c\u3002"),(0,i.kt)("p",null,"\u6b64\u8bcd\u6c47\u8868\uff08\u4ec5\u6b64\u8bcd\u6c47\u8868\uff09\u7684 false \u503c\u7684\u884c\u4e3a\u662f\u672a\u5b9a\u4e49\u7684\uff0c",(0,i.kt)("inlineCode",{parentName:"p"},"$vocabulary")," \u5b58\u5728\u4f46\u672a\u5305\u542b Core \u8bcd\u6c47\u8868\u65f6\u7684\u884c\u4e3a\u4e5f\u662f\u5982\u6b64\u3002\u7136\u800c\uff0c\u5efa\u8bae\uff08RECOMMENDED\uff09\u5b9e\u73b0\u68c0\u6d4b\u8fd9\u4e9b\u60c5\u51b5\uff0c\u5e76\u5728\u53d1\u751f\u65f6\u5f15\u53d1\u9519\u8bef\u3002\u58f0\u660e\u5143\u6a21\u5f0f\u53ef\u9009\u4f7f\u7528 Core \u662f\u6ca1\u6709\u610f\u4e49\u7684\u3002"),(0,i.kt)("p",null,"\u4e0d\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"$vocabulary")," \u7684\u5143\u6a21\u5f0f\u5fc5\u987b\uff08MUST\uff09\u88ab\u89c6\u4e3a\u9700\u8981 Core \u8bcd\u6c47\u8868\uff0c\u5c31\u50cf\u5176 URI \u5b58\u5728\u5e76\u5177\u6709 true \u503c\u4e00\u6837\u3002"),(0,i.kt)("p",null,"Core \u8bcd\u6c47\u8868\u7684\u5f53\u524d URI \u662f\uff1a",(0,i.kt)("a",{parentName:"p",href:"https://json-schema.org/draft/2020-12/vocab/core%E3%80%82"},"https://json-schema.org/draft/2020-12/vocab/core\u3002")),(0,i.kt)("p",null,"\u76f8\u5e94\u5143\u6a21\u5f0f\u7684\u5f53\u524d URI \u662f\uff1a",(0,i.kt)("a",{parentName:"p",href:"https://json-schema.org/draft/2020-12/meta/core%E3%80%82"},"https://json-schema.org/draft/2020-12/meta/core\u3002")),(0,i.kt)("p",null,"\u867d\u7136 ",(0,i.kt)("inlineCode",{parentName:"p"},"$")," \u524d\u7f00\u5e76\u672a\u6b63\u5f0f\u4fdd\u7559\u7ed9 Core \u8bcd\u6c47\u8868\uff0c\u4f46\u5efa\u8bae\uff08RECOMMENDED\uff09\u6269\u5c55\u5173\u952e\u5b57\uff08\u5728\u8bcd\u6c47\u8868\u6216\u5176\u5b83\u5730\u65b9\uff09\u4ee5 ",(0,i.kt)("inlineCode",{parentName:"p"},"$")," \u4e4b\u5916\u7684\u5176\u5b83\u5b57\u7b26\u5f00\u5934\uff0c\u4ee5\u907f\u514d\u5c06\u6765\u53ef\u80fd\u53d1\u751f\u7684\u51b2\u7a81\u3002"),(0,i.kt)("h3",{id:"81-\u5143\u6a21\u5f0f\u548c\u8bcd\u6c47\u8868meta-schemas-and-vocabularies"},"8.1. \u5143\u6a21\u5f0f\u548c\u8bcd\u6c47\u8868\uff08Meta-Schemas and Vocabularies\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'Two concepts, meta-schemas and vocabularies, are used to inform an implementation how to interpret a schema. Every schema has a meta-schema, which can be declared using the "$schema" keyword.'),(0,i.kt)("p",null,"The meta-schema serves two purposes:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},'Declaring the vocabularies in use:\nThe "$vocabulary" keyword, when it appears in a meta-schema, declares which vocabularies are available to be used in schemas that refer to that meta-schema. Vocabularies define keyword semantics, as well as their general syntax.')),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Describing valid schema syntax:\nA schema MUST successfully validate against its meta-schema, which constrains the syntax of the available keywords. The syntax described is expected to be compatible with the vocabularies declared; while it is possible to describe an incompatible syntax, such a meta-schema would be unlikely to be useful."))),(0,i.kt)("p",null,"Meta-schemas are separate from vocabularies to allow for vocabularies to be combined in different ways, and for meta-schema authors to impose additional constraints such as forbidding certain keywords, or performing unusually strict syntactical validation, as might be done during a development and testing cycle. Each vocabulary typically identifies a meta-schema consisting only of the vocabulary's keywords."),(0,i.kt)("p",null,"Meta-schema authoring is an advanced usage of JSON Schema, so the design of meta-schema features emphasizes flexibility over simplicity.")),(0,i.kt)("p",null,"\u5143\u6a21\u5f0f\u548c\u8bcd\u6c47\u8868\u8fd9\u4e24\u4e2a\u6982\u5ff5\u7528\u4e8e\u544a\u77e5\u5b9e\u73b0\u5982\u4f55\u89e3\u91ca\u6a21\u5f0f\u3002\u6bcf\u4e2a\u6a21\u5f0f\u90fd\u6709\u4e00\u4e2a\u5143\u6a21\u5f0f\uff0c\u53ef\u4ee5\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"$schema")," \u5173\u952e\u5b57\u58f0\u660e\u3002"),(0,i.kt)("p",null,"\u5143\u6a21\u5f0f\u6709\u4e24\u4e2a\u76ee\u7684\uff1a"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u58f0\u660e\u6b63\u5728\u4f7f\u7528\u7684\u8bcd\u6c47\u8868\uff1a\n\u5f53\u51fa\u73b0\u5728\u5143\u6a21\u5f0f\u4e2d\u65f6\uff0c",(0,i.kt)("inlineCode",{parentName:"li"},"$vocabulary")," \u5173\u952e\u5b57\u58f0\u660e\u4e86\u53ef\u4ee5\u5728\u5f15\u7528\u8be5\u5143\u6a21\u5f0f\u7684\u6a21\u5f0f\u4e2d\u4f7f\u7528\u7684\u8bcd\u6c47\u8868\u3002\u8bcd\u6c47\u8868\u5b9a\u4e49\u5173\u952e\u5b57\u8bed\u4e49\u53ca\u5176\u4e00\u822c\u8bed\u6cd5\u3002"),(0,i.kt)("li",{parentName:"ul"},"\u63cf\u8ff0\u6709\u6548\u7684\u6a21\u5f0f\u8bed\u6cd5\uff1a\n\u6a21\u5f0f\u5fc5\u987b\uff08MUST\uff09\u6210\u529f\u5730\u9488\u5bf9\u5176\u5143\u6a21\u5f0f\u8fdb\u884c\u9a8c\u8bc1\uff0c\u8be5\u5143\u6a21\u5f0f\u7ea6\u675f\u4e86\u53ef\u7528\u5173\u952e\u5b57\u7684\u8bed\u6cd5\u3002\u6240\u63cf\u8ff0\u7684\u8bed\u6cd5\u9884\u671f\u4e0e\u58f0\u660e\u7684\u8bcd\u6c47\u8868\u517c\u5bb9\uff1b\u867d\u7136\u53ef\u4ee5\u63cf\u8ff0\u4e0d\u517c\u5bb9\u7684\u8bed\u6cd5\uff0c\u4f46\u8fd9\u6837\u7684\u5143\u6a21\u5f0f\u4e0d\u592a\u53ef\u80fd\u6709\u7528\u3002")),(0,i.kt)("p",null,"\u5143\u6a21\u5f0f\u4e0e\u8bcd\u6c47\u8868\u5206\u5f00\uff0c\u662f\u4e3a\u4e86\u5141\u8bb8\u4ee5\u4e0d\u540c\u65b9\u5f0f\u7ec4\u5408\u8bcd\u6c47\u8868\uff0c\u4ee5\u53ca\u5141\u8bb8\u5143\u6a21\u5f0f\u4f5c\u8005\u65bd\u52a0\u989d\u5916\u7ea6\u675f\uff0c\u4f8b\u5982\u7981\u6b62\u67d0\u4e9b\u5173\u952e\u5b57\uff0c\u6216\u6267\u884c\u5f02\u5e38\u4e25\u683c\u7684\u8bed\u6cd5\u9a8c\u8bc1\uff0c\u8fd9\u53ef\u80fd\u5728\u5f00\u53d1\u548c\u6d4b\u8bd5\u5468\u671f\u4e2d\u5b8c\u6210\u3002\u6bcf\u4e2a\u8bcd\u6c47\u8868\u901a\u5e38\u6807\u8bc6\u4ec5\u5305\u542b\u8bcd\u6c47\u8868\u5173\u952e\u5b57\u7684\u5143\u6a21\u5f0f\u3002"),(0,i.kt)("p",null,"\u5143\u6a21\u5f0f\u7f16\u5199\u662f JSON Schema \u7684\u9ad8\u7ea7\u7528\u6cd5\uff0c\u56e0\u6b64\u5143\u6a21\u5f0f\u7279\u6027\u7684\u8bbe\u8ba1\u5f3a\u8c03\u7075\u6d3b\u6027\u800c\u975e\u7b80\u5355\u6027\u3002"),(0,i.kt)("h4",{id:"811-schema-\u5173\u952e\u5b57the-schema-keyword"},'8.1.1. "$schema" \u5173\u952e\u5b57\uff08The "$schema" Keyword\uff09'),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'The "$schema" keyword is both used as a JSON Schema dialect identifier and as the identifier of a resource which is itself a JSON Schema, which describes the set of valid schemas written for this particular dialect.'),(0,i.kt)("p",null,"The value of this keyword MUST be a URI ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc3986"},"RFC 3986")," (containing a scheme) and this URI MUST be normalized. The current schema MUST be valid against the meta-schema identified by this URI."),(0,i.kt)("p",null,'If this URI identifies a retrievable resource, that resource SHOULD be of media type "application/schema+json".'),(0,i.kt)("p",null,'The "$schema" keyword SHOULD be used in the document root schema object, and MAY be used in the root schema objects of embedded schema resources. It MUST NOT appear in non-resource root schema objects. If absent from the document root schema, the resulting behavior is implementation-defined.'),(0,i.kt)("p",null,"Values for this property are defined elsewhere in this and other documents, and by other parties.")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$schema")," \u5173\u952e\u5b57\u65e2\u7528\u4f5c JSON Schema \u65b9\u8a00\u6807\u8bc6\u7b26\uff0c\u4e5f\u7528\u4f5c\u8d44\u6e90\u6807\u8bc6\u7b26\uff0c\u8be5\u8d44\u6e90\u672c\u8eab\u662f\u4e00\u4e2a JSON Schema\uff0c\u63cf\u8ff0\u4e86\u4e3a\u8fd9\u79cd\u7279\u5b9a\u65b9\u8a00\u7f16\u5199\u7684\u4e00\u7ec4\u6709\u6548\u6a21\u5f0f\u3002"),(0,i.kt)("p",null,"\u6b64\u5173\u952e\u5b57\u7684\u503c\u5fc5\u987b\uff08MUST\uff09\u662f URI ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc3986"},"RFC 3986"),"\uff08\u5305\u542b\u65b9\u6848\uff09\uff0c\u5e76\u4e14\u6b64 URI \u5fc5\u987b\uff08MUST\uff09\u662f\u6807\u51c6\u5316\u7684\u3002\u5f53\u524d\u6a21\u5f0f\u5fc5\u987b\uff08MUST\uff09\u6839\u636e\u6b64 URI \u6807\u8bc6\u7684\u5143\u6a21\u5f0f\u6709\u6548\u3002"),(0,i.kt)("p",null,"\u5982\u679c\u6b64 URI \u6807\u8bc6\u53ef\u68c0\u7d22\u7684\u8d44\u6e90\uff0c\u5219\u8be5\u8d44\u6e90\u7684\u5a92\u4f53\u7c7b\u578b\u5e94\uff08SHOULD\uff09\u4e3a ",(0,i.kt)("inlineCode",{parentName:"p"},"application/schema+json"),"\u3002"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$schema")," \u5173\u952e\u5b57\u5e94\u8be5\uff08SHOULD\uff09\u5728\u6587\u6863\u6839\u6a21\u5f0f\u5bf9\u8c61\u4e2d\u4f7f\u7528\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u5d4c\u5165\u5f0f\u6a21\u5f0f\u8d44\u6e90\u7684\u6839\u6a21\u5f0f\u5bf9\u8c61\u4e2d\u4f7f\u7528\u3002\u5b83\u4e0d\u5f97\uff08MUST NOT\uff09\u51fa\u73b0\u5728\u975e\u8d44\u6e90\u6839\u6a21\u5f0f\u5bf9\u8c61\u4e2d\u3002\u5982\u679c\u5728\u6587\u6863\u6839\u6a21\u5f0f\u4e2d\u7f3a\u5931\uff0c\u4ea7\u751f\u7684\u884c\u4e3a\u662f\u5b9e\u73b0\u5b9a\u4e49\u7684\uff08implementation-defined\uff09\u3002"),(0,i.kt)("p",null,"\u6b64\u5c5e\u6027\u7684\u503c\u5728\u672c\u6587\u6863\u548c\u5176\u5b83\u6587\u6863\u4e2d\u4ee5\u53ca\u5176\u5b83\u65b9\u5b9a\u4e49\u3002"),(0,i.kt)("h4",{id:"812-vocabulary-\u5173\u952e\u5b57the-vocabulary-keyword"},'8.1.2. "$vocabulary" \u5173\u952e\u5b57\uff08The "$vocabulary" Keyword\uff09'),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'The "$vocabulary" keyword is used in meta-schemas to identify the vocabularies available for use in schemas described by that meta-schema. It is also used to indicate whether each vocabulary is required or optional, in the sense that an implementation MUST understand the required vocabularies in order to successfully process the schema. Together, this information forms a dialect. Any vocabulary that is understood by the implementation MUST be processed in a manner consistent with the semantic definitions contained within the vocabulary.'),(0,i.kt)("p",null,"The value of this keyword MUST be an object. The property names in the object MUST be URIs (containing a scheme) and this URI MUST be normalized. Each URI that appears as a property name identifies a specific set of keywords and their semantics."),(0,i.kt)("p",null,'The URI MAY be a URL, but the nature of the retrievable resource is currently undefined, and reserved for future use. Vocabulary authors MAY use the URL of the vocabulary specification, in a human-readable media type such as text/html or text/plain, as the vocabulary URI. Vocabulary documents may be added in forthcoming drafts. For now, identifying the keyword set is deemed sufficient as that, along with meta-schema validation, is how the current "vocabularies" work today. Any future vocabulary document format will be specified as a JSON document, so using text/html or other non-JSON formats in the meantime will not produce any future ambiguity.'),(0,i.kt)("p",null,'The values of the object properties MUST be booleans. If the value is true, then implementations that do not recognize the vocabulary MUST refuse to process any schemas that declare this meta-schema with "$schema". If the value is false, implementations that do not recognize the vocabulary SHOULD proceed with processing such schemas. The value has no impact if the implementation understands the vocabulary.'),(0,i.kt)("p",null,"Per 6.5, unrecognized keywords SHOULD be treated as annotations. This remains the case for keywords defined by unrecognized vocabularies. It is not currently possible to distinguish between unrecognized keywords that are defined in vocabularies from those that are not part of any vocabulary."),(0,i.kt)("p",null,'The "$vocabulary" keyword SHOULD be used in the root schema of any schema document intended for use as a meta-schema. It MUST NOT appear in subschemas.'),(0,i.kt)("p",null,'The "$vocabulary" keyword MUST be ignored in schema documents that are not being processed as a meta-schema. This allows validating a meta-schema M against its own meta-schema M\' without requiring the validator to understand the vocabularies declared by M.')),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$vocabulary")," \u5173\u952e\u5b57\u7528\u4e8e\u5143\u6a21\u5f0f\u4e2d\uff0c\u7528\u4e8e\u6807\u8bc6\u5143\u6a21\u5f0f\u63cf\u8ff0\u7684\u6a21\u5f0f\u53ef\u7528\u7684\u8bcd\u6c47\u8868\u3002\u5b83\u8fd8\u7528\u4e8e\u6307\u793a\u6bcf\u4e2a\u8bcd\u6c47\u8868\u662f\u5fc5\u9700\u7684\u8fd8\u662f\u53ef\u9009\u7684\uff0c\u5b9e\u73b0\u5fc5\u987b\uff08MUST\uff09\u4e86\u89e3\u6240\u9700\u7684\u8bcd\u6c47\u8868\u624d\u80fd\u6210\u529f\u5904\u7406\u6a21\u5f0f\u3002\u8fd9\u4e9b\u4fe1\u606f\u5171\u540c\u6784\u6210\u4e86\u4e00\u79cd\u65b9\u8a00\u3002\u5b9e\u73b0\u7406\u89e3\u7684\u4efb\u4f55\u8bcd\u6c47\u8868\u90fd\u5fc5\u987b\u6309\u7167\u8bcd\u6c47\u8868\u4e2d\u5305\u542b\u7684\u8bed\u4e49\u5b9a\u4e49\u4ee5\u4e00\u81f4\u7684\u65b9\u5f0f\u5904\u7406\u3002"),(0,i.kt)("p",null,"\u6b64\u5173\u952e\u5b57\u7684\u503c\u5fc5\u987b\uff08MUST\uff09\u662f\u4e00\u4e2a\u5bf9\u8c61\u3002\u5bf9\u8c61\u4e2d\u7684\u5c5e\u6027\u540d\u79f0\u5fc5\u987b\uff08MUST\uff09\u662f URI\uff08\u5305\u542b\u65b9\u6848\uff09\uff0c\u5e76\u4e14\u6b64 URI \u5fc5\u987b\uff08MUST\uff09\u662f\u6807\u51c6\u5316\u7684\u3002\u4f5c\u4e3a\u5c5e\u6027\u540d\u79f0\u51fa\u73b0\u7684\u6bcf\u4e2a URI \u6807\u8bc6\u4e00\u7ec4\u7279\u5b9a\u7684\u5173\u952e\u5b57\u53ca\u5176\u8bed\u4e49\u3002"),(0,i.kt)("p",null,"URI \u53ef\u80fd\uff08MAY\uff09\u662f URL\uff0c\u4f46\u662f\u53ef\u68c0\u7d22\u8d44\u6e90\u7684\u6027\u8d28\u76ee\u524d\u5c1a\u672a\u5b9a\u4e49\uff0c\u4e3a\u672a\u6765\u4f7f\u7528\u800c\u4fdd\u7559\u3002\u8bcd\u6c47\u8868\u4f5c\u8005\u53ef\u4ee5\uff08MAY\uff09\u4f7f\u7528\u8bcd\u6c47\u8868\u89c4\u8303\u7684 URL\uff0c\u4ee5\u4eba\u7c7b\u53ef\u8bfb\u7684\u5a92\u4f53\u7c7b\u578b\uff08\u5982 ",(0,i.kt)("inlineCode",{parentName:"p"},"text/html")," \u6216 ",(0,i.kt)("inlineCode",{parentName:"p"},"text/plain"),'\uff09\u4f5c\u4e3a\u8bcd\u6c47\u8868 URI\u3002\u4ee5\u540e\u7684\u8349\u6848\u53ef\u80fd\u4f1a\u6dfb\u52a0\u8bcd\u6c47\u8868\u6587\u6863\u3002\u76ee\u524d\uff0c\u6807\u8bc6\u5173\u952e\u5b57\u96c6\u88ab\u8ba4\u4e3a\u662f\u8db3\u591f\u7684\uff0c\u56e0\u4e3a\u4e0e\u5143\u6a21\u5f0f\u9a8c\u8bc1\u4e00\u8d77\uff0c\u8fd9\u5c31\u662f\u5f53\u524d "\u8bcd\u6c47\u8868" \u7684\u5de5\u4f5c\u65b9\u5f0f\u3002\u4efb\u4f55\u672a\u6765\u7684\u8bcd\u6c47\u8868\u6587\u6863\u683c\u5f0f\u5c06\u6307\u5b9a\u4e3a JSON \u6587\u6863\uff0c\u56e0\u6b64\u540c\u65f6\u4f7f\u7528 ',(0,i.kt)("inlineCode",{parentName:"p"},"text/html")," \u6216\u5176\u5b83\u975e JSON \u683c\u5f0f\u4e0d\u4f1a\u4ea7\u751f\u4efb\u4f55\u672a\u6765\u7684\u6b67\u4e49\u3002"),(0,i.kt)("p",null,"\u5bf9\u8c61\u5c5e\u6027\u7684\u503c\u5fc5\u987b\uff08MUST\uff09\u662f\u5e03\u5c14\u503c\u3002\u5982\u679c\u503c\u4e3a true\uff0c\u5219\u4e0d\u8bc6\u522b\u8bcd\u6c47\u8868\u7684\u5b9e\u73b0\u5fc5\u987b\uff08MUST\uff09\u62d2\u7edd\u5904\u7406\u58f0\u660e\u4e86\u5e26\u6709 ",(0,i.kt)("inlineCode",{parentName:"p"},"$schema")," \u7684\u5143\u6a21\u5f0f\u7684\u4efb\u4f55\u6a21\u5f0f\u3002\u5982\u679c\u503c\u4e3a false\uff0c\u90a3\u4e48\u4e0d\u8bc6\u522b\u8bcd\u6c47\u8868\u7684\u5b9e\u73b0\u5e94\uff08SHOULD\uff09\u7ee7\u7eed\u5904\u7406\u8fd9\u4e9b\u6a21\u5f0f\u3002\u5982\u679c\u5b9e\u73b0\u7406\u89e3\u8bcd\u6c47\u8868\uff0c\u5219\u8be5\u503c\u65e0\u5f71\u54cd\u3002"),(0,i.kt)("p",null,"\u6839\u636e\u7b2c 6.5 \u8282\uff0c\u672a\u8bc6\u522b\u7684\u5173\u952e\u5b57\u5e94\uff08SHOULD\uff09\u88ab\u89c6\u4e3a\u6ce8\u91ca\u3002\u5bf9\u4e8e\u7531\u672a\u8bc6\u522b\u8bcd\u6c47\u8868\u5b9a\u4e49\u7684\u5173\u952e\u5b57\uff0c\u60c5\u51b5\u4ecd\u7136\u5982\u6b64\u3002\u76ee\u524d\u65e0\u6cd5\u533a\u5206\u5728\u8bcd\u6c47\u8868\u4e2d\u5b9a\u4e49\u7684\u672a\u8bc6\u522b\u5173\u952e\u5b57\u4e0e\u4e0d\u5c5e\u4e8e\u4efb\u4f55\u8bcd\u6c47\u8868\u7684\u5173\u952e\u5b57\u3002"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$vocabulary")," \u5173\u952e\u5b57\u5e94\u8be5\uff08SHOULD\uff09\u7528\u4e8e\u4efb\u4f55\u9884\u671f\u7528\u4f5c\u5143\u6a21\u5f0f\u7684\u6a21\u5f0f\u6587\u6863\u7684\u6839\u6a21\u5f0f\u3002\u5b83\u4e0d\u5f97\uff08MUST NOT\uff09\u51fa\u73b0\u5728\u5b50\u6a21\u5f0f\u4e2d\u3002"),(0,i.kt)("p",null,"\u5728\u672a\u4f5c\u4e3a\u5143\u6a21\u5f0f\u5904\u7406\u7684\u6a21\u5f0f\u6587\u6863\u4e2d\uff0c\u5fc5\u987b\uff08MUST\uff09\u5ffd\u7565 ",(0,i.kt)("inlineCode",{parentName:"p"},"$vocabulary")," \u5173\u952e\u5b57\u3002\u8fd9\u5141\u8bb8\u5c06\u5143\u6a21\u5f0f M \u9a8c\u8bc1\u5230\u5176\u81ea\u8eab\u7684\u5143\u6a21\u5f0f M'\uff0c\u800c\u65e0\u9700\u8981\u6c42\u9a8c\u8bc1\u5668\u4e86\u89e3 M \u58f0\u660e\u7684\u8bcd\u6c47\u8868\u3002"),(0,i.kt)("h5",{id:"8121-\u9ed8\u8ba4\u8bcd\u6c47\u8868default-vocabularies"},"8.1.2.1. \u9ed8\u8ba4\u8bcd\u6c47\u8868\uff08Default vocabularies\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'If "$vocabulary" is absent, an implementation MAY determine behavior based on the meta-schema if it is recognized from the URI value of the referring schema\'s "$schema" keyword. This is how behavior (such as Hyper-Schema usage) has been recognized prior to the existence of vocabularies.'),(0,i.kt)("p",null,"If the meta-schema, as referenced by the schema, is not recognized, or is missing, then the behavior is implementation-defined. If the implementation proceeds with processing the schema, it MUST assume the use of the core vocabulary. If the implementation is built for a specific purpose, then it SHOULD assume the use of all of the most relevant vocabularies for that purpose."),(0,i.kt)("p",null,"For example, an implementation that is a validator SHOULD assume the use of all vocabularies in this specification and the companion Validation specification.")),(0,i.kt)("p",null,"\u5982\u679c ",(0,i.kt)("inlineCode",{parentName:"p"},"$vocabulary")," \u4e0d\u5b58\u5728\uff0c\u5b9e\u73b0\u53ef\u4ee5\uff08MAY\uff09\u6839\u636e\u5143\u6a21\u5f0f\u786e\u5b9a\u884c\u4e3a\uff0c\u5982\u679c\u4ece\u5f15\u7528\u6a21\u5f0f\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"$schema")," \u5173\u952e\u5b57\u7684 URI \u503c\u4e2d\u8bc6\u522b\u5230\u5143\u6a21\u5f0f\u3002\u8fd9\u5c31\u662f\u5728\u8bcd\u6c47\u8868\u5b58\u5728\u4e4b\u524d\u8bc6\u522b\u884c\u4e3a\uff08\u4f8b\u5982\u8d85\u6a21\u5f0f\u4f7f\u7528\uff09\u7684\u65b9\u5f0f\u3002"),(0,i.kt)("p",null,"\u5982\u679c\u6a21\u5f0f\u5f15\u7528\u7684\u5143\u6a21\u5f0f\u65e0\u6cd5\u8bc6\u522b\u6216\u7f3a\u5931\uff0c\u5219\u884c\u4e3a\u7531\u5b9e\u73b0\u5b9a\u4e49\u3002\u5982\u679c\u5b9e\u73b0\u7ee7\u7eed\u5904\u7406\u6a21\u5f0f\uff0c\u5b83\u5fc5\u987b\uff08MUST\uff09\u5047\u5b9a\u4f7f\u7528\u6838\u5fc3\u8bcd\u6c47\u8868\u3002\u5982\u679c\u5b9e\u73b0\u9488\u5bf9\u7279\u5b9a\u76ee\u7684\u800c\u6784\u5efa\uff0c\u5219\u5e94\uff08SHOULD\uff09\u5047\u5b9a\u4f7f\u7528\u8be5\u76ee\u7684\u6240\u6709\u6700\u76f8\u5173\u7684\u8bcd\u6c47\u8868\u3002"),(0,i.kt)("p",null,"\u4f8b\u5982\uff0c\u4f5c\u4e3a\u9a8c\u8bc1\u5668\u7684\u5b9e\u73b0\u5e94\u8be5\uff08SHOULD\uff09\u5047\u5b9a\u4f7f\u7528\u672c\u89c4\u8303\u548c\u914d\u5957\u9a8c\u8bc1\u89c4\u8303\u4e2d\u7684\u6240\u6709\u8bcd\u6c47\u8868\u3002"),(0,i.kt)("h5",{id:"8122-\u8bcd\u6c47\u8868\u7684\u4e0d\u53ef\u7ee7\u627f\u6027non-inheritability-of-vocabularies"},"8.1.2.2. \u8bcd\u6c47\u8868\u7684\u4e0d\u53ef\u7ee7\u627f\u6027\uff08Non-inheritability of vocabularies\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'Note that the processing restrictions on "$vocabulary" mean that meta-schemas that reference other meta-schemas using "$ref" or similar keywords do not automatically inherit the vocabulary declarations of those other meta-schemas. All such declarations must be repeated in the root of each schema document intended for use as a meta-schema. This is demonstrated in the example meta-schema (Appendix D.2). This requirement allows implementations to find all vocabulary requirement information in a single place for each meta-schema. As schema extensibility means that there are endless potential ways to combine more fine-grained meta-schemas by reference, requiring implementations to anticipate all possibilities and search for vocabularies in referenced meta-schemas would be overly burdensome.')),(0,i.kt)("p",null,"\u8bf7\u6ce8\u610f\uff0c\u5173\u4e8e ",(0,i.kt)("inlineCode",{parentName:"p"},"$vocabulary")," \u7684\u5904\u7406\u9650\u5236\u610f\u5473\u7740\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"$ref")," \u6216\u7c7b\u4f3c\u5173\u952e\u5b57\u5f15\u7528\u5176\u5b83\u5143\u6a21\u5f0f\u7684\u5143\u6a21\u5f0f\u4e0d\u4f1a\u81ea\u52a8\u7ee7\u627f\u8fd9\u4e9b\u5176\u5b83\u5143\u6a21\u5f0f\u7684\u8bcd\u6c47\u8868\u58f0\u660e\u3002\u6240\u6709\u8fd9\u4e9b\u58f0\u660e\u5fc5\u987b\u5728\u9884\u671f\u7528\u4f5c\u5143\u6a21\u5f0f\u7684\u6bcf\u4e2a\u6a21\u5f0f\u6587\u6863\u7684\u6839\u4e2d\u91cd\u590d\u3002\u8fd9\u5728\u793a\u4f8b\u5143\u6a21\u5f0f\uff08\u9644\u5f55 D.2\uff09\u4e2d\u8fdb\u884c\u4e86\u6f14\u793a\u3002\u8fd9\u4e2a\u8981\u6c42\u5141\u8bb8\u5b9e\u73b0\u4e3a\u6bcf\u4e2a\u5143\u6a21\u5f0f\u5728\u4e00\u4e2a\u5730\u65b9\u627e\u5230\u6240\u6709\u8bcd\u6c47\u8868\u9700\u6c42\u4fe1\u606f\u3002\u7531\u4e8e\u6a21\u5f0f\u53ef\u6269\u5c55\u6027\u610f\u5473\u7740\u901a\u8fc7\u5f15\u7528\u7ec4\u5408\u66f4\u7ec6\u7c92\u5ea6\u5143\u6a21\u5f0f\u7684\u65e0\u9650\u53ef\u80fd\u6027\uff0c\u8981\u6c42\u5b9e\u73b0\u9884\u6d4b\u6240\u6709\u53ef\u80fd\u6027\u5e76\u5728\u5f15\u7528\u7684\u5143\u6a21\u5f0f\u4e2d\u641c\u7d22\u8bcd\u6c47\u8868\u5c06\u662f\u8fc7\u4e8e\u7e41\u7410\u7684\u3002"),(0,i.kt)("h4",{id:"813-\u5143\u6a21\u5f0f\u548c\u8bcd\u6c47\u8868-uri-\u7684\u66f4\u65b0updates-to-meta-schema-and-vocabulary-uris"},"8.1.3. \u5143\u6a21\u5f0f\u548c\u8bcd\u6c47\u8868 URI \u7684\u66f4\u65b0\uff08Updates to Meta-Schema and Vocabulary URIs\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"Updated vocabulary and meta-schema URIs MAY be published between specification drafts in order to correct errors. Implementations SHOULD consider URIs dated after this specification draft and before the next to indicate the same syntax and semantics as those listed here.")),(0,i.kt)("p",null,"\u5728\u89c4\u8303\u8349\u6848\u4e4b\u95f4\uff0c\u53ef\u4ee5\uff08MAY\uff09\u53d1\u5e03\u66f4\u65b0\u540e\u7684\u8bcd\u6c47\u8868\u548c\u5143\u6a21\u5f0f URI \u4ee5\u7ea0\u6b63\u9519\u8bef\u3002\u5b9e\u73b0\u5e94\u8be5\uff08SHOULD\uff09\u8ba4\u4e3a\u5728\u6b64\u89c4\u8303\u8349\u6848\u4e4b\u540e\u548c\u4e0b\u4e00\u4e2a\u4e4b\u524d\u53d1\u5e03\u7684 URI \u8868\u793a\u4e0e\u6b64\u5904\u5217\u51fa\u7684\u76f8\u540c\u7684\u8bed\u6cd5\u548c\u8bed\u4e49\u3002"),(0,i.kt)("h3",{id:"82-\u57fa\u672c-uri\u951a\u70b9\u548c\u89e3\u5f15\u7528base-uri-anchors-and-dereferencing"},"8.2. \u57fa\u672c URI\u3001\u951a\u70b9\u548c\u89e3\u5f15\u7528\uff08Base URI, Anchors, and Dereferencing\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"To differentiate between schemas in a vast ecosystem, schemas are identified by URI ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc3986"},"RFC 3986"),", and can embed references to other schemas by specifying their URI."),(0,i.kt)("p",null,"Several keywords can accept a relative URI-reference ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc3986"},"RFC 3986"),", or a value used to construct a relative URI-reference. For these keywords, it is necessary to establish a base URI in order to resolve the reference.")),(0,i.kt)("p",null,"\u4e3a\u4e86\u5728\u5e9e\u5927\u7684\u751f\u6001\u7cfb\u7edf\u4e2d\u533a\u5206\u6a21\u5f0f\uff0c\u6a21\u5f0f\u7531 URI ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc3986"},"RFC 3986")," \u6807\u8bc6\uff0c\u5e76\u901a\u8fc7\u6307\u5b9a\u5176 URI \u5d4c\u5165\u5bf9\u5176\u5b83\u6a21\u5f0f\u7684\u5f15\u7528\u3002"),(0,i.kt)("p",null,"\u51e0\u4e2a\u5173\u952e\u5b57\u53ef\u4ee5\u63a5\u53d7\u76f8\u5bf9 URI-reference ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc3986"},"RFC 3986"),"\uff0c\u6216\u7528\u4e8e\u6784\u9020\u76f8\u5bf9 URI-reference \u7684\u503c\u3002\u5bf9\u4e8e\u8fd9\u4e9b\u5173\u952e\u5b57\uff0c\u6709\u5fc5\u8981\u5efa\u7acb\u4e00\u4e2a\u57fa\u672c URI \u4ee5\u4fbf\u89e3\u6790\u5f15\u7528\u3002"),(0,i.kt)("h4",{id:"821-id-\u5173\u952e\u5b57the-id-keyword"},'8.2.1. "$id" \u5173\u952e\u5b57\uff08The "$id" Keyword\uff09'),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'The "$id" keyword identifies a schema resource with its canonical ',(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc6596"},"RFC 6596")," URI."),(0,i.kt)("p",null,"Note that this URI is an identifier and not necessarily a network locator. In the case of a network-addressable URL, a schema need not be downloadable from its canonical URI."),(0,i.kt)("p",null,"If present, the value for this keyword MUST be a string, and MUST represent a valid URI-reference ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc3986"},"RFC 3986"),". This URI-reference SHOULD be normalized, and MUST resolve to an absolute-URI ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc3986"},"RFC 3986")," (without a fragment), or to a URI with an empty fragment."),(0,i.kt)("p",null,"The empty fragment form is NOT RECOMMENDED and is retained only for backwards compatibility, and because the application/schema+json media type defines that a URI with an empty fragment identifies the same resource as the same URI with the fragment removed. However, since this equivalence is not part of the RFC 3986 normalization process ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc3986"},"RFC 3986"),", implementers and schema authors cannot rely on generic URI libraries understanding it."),(0,i.kt)("p",null,'Therefore, "$id" MUST NOT contain a non-empty fragment, and SHOULD NOT contain an empty fragment. The absolute-URI form MUST be considered the canonical URI, regardless of the presence or absence of an empty fragment. An empty fragment is currently allowed because older meta-schemas have an empty fragment in their $id (or previously, id). A future draft may outright forbid even empty fragments in "$id".'),(0,i.kt)("p",null,"The absolute-URI also serves as the base URI for relative URI-references in keywords within the schema resource, in accordance with RFC 3986 section 5.1.1 ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc3986"},"RFC 3986")," regarding base URIs embedded in content."),(0,i.kt)("p",null,'The presence of "$id" in a subschema indicates that the subschema constitutes a distinct schema resource within a single schema document. Furthermore, in accordance with ',(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc3986"},"RFC 3986"),' section 5.1.2 regarding encapsulating entities, if an "$id" in a subschema is a relative URI-reference, the base URI for resolving that reference is the URI of the parent schema resource.'),(0,i.kt)("p",null,'If no parent schema object explicitly identifies itself as a resource with "$id", the base URI is that of the entire document, as established by the steps given in the previous section. (Section 9.1.1)')),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$id")," \u5173\u952e\u5b57\u7528\u5176\u89c4\u8303 ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc6596"},"RFC 6596")," URI \u6807\u8bc6\u4e00\u4e2a\u6a21\u5f0f\u8d44\u6e90\u3002"),(0,i.kt)("p",null,"\u8bf7\u6ce8\u610f\uff0c\u6b64 URI \u662f\u4e00\u4e2a\u6807\u8bc6\u7b26\uff0c\u800c\u4e0d\u4e00\u5b9a\u662f\u7f51\u7edc\u5b9a\u4f4d\u7b26\u3002\u5728\u7f51\u7edc\u53ef\u5bfb\u5740 URL \u7684\u60c5\u51b5\u4e0b\uff0c\u6a21\u5f0f\u4e0d\u5fc5\u4ece\u5176\u89c4\u8303 URI \u4e0b\u8f7d\u3002"),(0,i.kt)("p",null,"\u5982\u679c\u5b58\u5728\uff0c\u6b64\u5173\u952e\u5b57\u7684\u503c\u5fc5\u987b\uff08MUST\uff09\u662f\u5b57\u7b26\u4e32\uff0c\u5e76\u4e14\u5fc5\u987b\uff08MUST\uff09\u8868\u793a\u6709\u6548\u7684 URI-reference ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc3986"},"RFC 3986"),"\u3002\u6b64 URI-reference \u5e94\uff08SHOULD\uff09\u88ab\u89c4\u8303\u5316\uff0c\u5e76\u4e14\u5fc5\u987b\uff08MUST\uff09\u89e3\u6790\u4e3a absolute-URI ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc3986"},"RFC 3986"),"\uff08\u65e0\u7247\u6bb5\uff09\uff0c\u6216\u89e3\u6790\u4e3a\u5177\u6709\u7a7a\u7247\u6bb5\u7684 URI\u3002"),(0,i.kt)("p",null,"\u7a7a\u7247\u6bb5\u5f62\u5f0f\u4e0d\u63a8\u8350\uff08NOT RECOMMENDED\uff09\u4f7f\u7528\uff0c\u4ec5\u4e3a\u4e86\u5411\u540e\u517c\u5bb9\u6027\u800c\u4fdd\u7559\uff0c\u56e0\u4e3a ",(0,i.kt)("inlineCode",{parentName:"p"},"application/schema+json")," \u5a92\u4f53\u7c7b\u578b\u89c4\u5b9a\u5177\u6709\u7a7a\u7247\u6bb5\u7684 URI \u4e0e\u53bb\u6389\u7247\u6bb5\u7684\u76f8\u540c URI \u6807\u8bc6\u76f8\u540c\u8d44\u6e90\u3002\u7136\u800c\uff0c\u7531\u4e8e\u8fd9\u79cd\u7b49\u4ef7\u6027\u4e0d\u662f RFC 3986 \u89c4\u8303\u5316\u8fc7\u7a0b ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc3986"},"RFC 3986")," \u7684\u4e00\u90e8\u5206\uff0c\u5b9e\u73b0\u8005\u548c\u6a21\u5f0f\u4f5c\u8005\u4e0d\u80fd\u4f9d\u8d56\u901a\u7528 URI \u5e93\u7406\u89e3\u5b83\u3002"),(0,i.kt)("p",null,"\u56e0\u6b64\uff0c",(0,i.kt)("inlineCode",{parentName:"p"},"$id")," \u4e0d\u80fd\uff08MUST NOT\uff09\u5305\u542b\u975e\u7a7a\u7247\u6bb5\uff0c\u4e14\u4e0d\u5e94\uff08SHOULD NOT\uff09\u5305\u542b\u7a7a\u7247\u6bb5\u3002absolute-URI \u5f62\u5f0f\u5fc5\u987b\uff08MUST\uff09\u88ab\u89c6\u4e3a\u89c4\u8303 URI\uff0c\u65e0\u8bba\u5b58\u5728\u6216\u4e0d\u5b58\u5728\u7a7a\u7247\u6bb5\u3002\u76ee\u524d\u5141\u8bb8\u4f7f\u7528\u7a7a\u7247\u6bb5\uff0c\u56e0\u4e3a\u65e7\u5143\u6a21\u5f0f\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"$id"),"\uff08\u6216\u4e4b\u524d\u7684 id\uff09\u4e2d\u6709\u7a7a\u7247\u6bb5\u3002\u672a\u6765\u7684\u8349\u6848\u53ef\u80fd\u4f1a\u76f4\u63a5\u7981\u6b62\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"$id")," \u4e2d\u4f7f\u7528\u7a7a\u7247\u6bb5\u3002"),(0,i.kt)("p",null,"absolute-URI \u8fd8\u7528\u4f5c\u6a21\u5f0f\u8d44\u6e90\u4e2d\u5173\u952e\u5b57\u7684\u76f8\u5bf9 URI-references \u7684\u57fa\u672c URI\uff0c\u6839\u636e ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc3986"},"RFC 3986")," \u7b2c 5.1.1 \u8282\u5173\u4e8e\u5d4c\u5165\u5185\u5bb9\u7684\u57fa\u672c URI\u3002"),(0,i.kt)("p",null,"\u5b50\u6a21\u5f0f\u4e2d\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"$id")," \u5b58\u5728\u8868\u793a\u8be5\u5b50\u6a21\u5f0f\u5728\u5355\u4e2a\u6a21\u5f0f\u6587\u6863\u4e2d\u6784\u6210\u4e00\u4e2a\u72ec\u7acb\u7684\u6a21\u5f0f\u8d44\u6e90\u3002\u6b64\u5916\uff0c\u6839\u636e ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc3986"},"RFC 3986")," \u7b2c 5.1.2 \u8282\u5173\u4e8e\u5c01\u88c5\u5b9e\u4f53\uff0c\u5982\u679c\u5b50\u6a21\u5f0f\u4e2d\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"$id")," \u662f\u76f8\u5bf9 URI-reference\uff0c\u89e3\u6790\u8be5\u5f15\u7528\u7684\u57fa\u672c URI \u662f\u7236\u6a21\u5f0f\u8d44\u6e90\u7684 URI\u3002"),(0,i.kt)("p",null,"\u5982\u679c\u6ca1\u6709\u7236\u6a21\u5f0f\u5bf9\u8c61\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"$id")," \u660e\u786e\u6807\u8bc6\u81ea\u5df1\u4e3a\u8d44\u6e90\uff0c\u90a3\u4e48\u57fa\u672c URI \u5c31\u662f\u6574\u4e2a\u6587\u6863\u7684\u57fa\u672c URI\uff0c\u7531\u524d\u4e00\u90e8\u5206\uff08\u7b2c 9.1.1 \u8282\uff09\u7ed9\u51fa\u7684\u6b65\u9aa4\u786e\u5b9a\u3002"),(0,i.kt)("h5",{id:"8211-\u6807\u8bc6\u6839\u6a21\u5f0fidentifying-the-root-schema"},"8.2.1.1. \u6807\u8bc6\u6839\u6a21\u5f0f\uff08Identifying the root schema\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'The root schema of a JSON Schema document SHOULD contain an "$id" keyword with an absolute-URI ',(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc3986"},"RFC 3986")," (containing a scheme, but no fragment).")),(0,i.kt)("p",null,"JSON Schema \u6587\u6863\u7684\u6839\u6a21\u5f0f\u5e94\uff08SHOULD\uff09\u5305\u542b\u4e00\u4e2a\u5177\u6709\u7edd\u5bf9 URI ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc3986"},"RFC 3986"),"\uff08\u5305\u542b\u65b9\u6848\uff0c\u4f46\u4e0d\u5305\u542b\u7247\u6bb5\uff09\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"$id")," \u5173\u952e\u5b57\u3002"),(0,i.kt)("h4",{id:"822-\u5b9a\u4e49\u4e0e\u4f4d\u7f6e\u65e0\u5173\u7684\u6807\u8bc6\u7b26defining-location-independent-identifiers"},"8.2.2. \u5b9a\u4e49\u4e0e\u4f4d\u7f6e\u65e0\u5173\u7684\u6807\u8bc6\u7b26\uff08Defining location-independent identifiers\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"Using JSON Pointer fragments requires knowledge of the structure of the schema. When writing schema documents with the intention to provide re-usable schemas, it may be preferable to use a plain name fragment that is not tied to any particular structural location. This allows a subschema to be relocated without requiring JSON Pointer references to be updated."),(0,i.kt)("p",null,'The "$anchor" and "$dynamicAnchor" keywords are used to specify such fragments. They are identifier keywords that can only be used to create plain name fragments, rather than absolute URIs as seen with "$id".'),(0,i.kt)("p",null,'The base URI to which the resulting fragment is appended is the canonical URI of the schema resource containing the "$anchor" or "$dynamicAnchor" in question. As discussed in the previous section, this is either the nearest "$id" in the same or parent schema object, or the base URI for the document as determined according to RFC 3986.'),(0,i.kt)("p",null,'Separately from the usual usage of URIs, "$dynamicAnchor" indicates that the fragment is an extension point when used with the "$dynamicRef" keyword. This low-level, advanced feature makes it easier to extend recursive schemas such as the meta-schemas, without imposing any particular semantics on that extension. See the section on "$dynamicRef" (Section 8.2.3.2) for details.'),(0,i.kt)("p",null,'In most cases, the normal fragment behavior both suffices and is more intuitive. Therefore it is RECOMMENDED that "$anchor" be used to create plain name fragments unless there is a clear need for "$dynamicAnchor".'),(0,i.kt)("p",null,"If present, the value of this keyword MUST be a string and MUST start with a letter (","[A-Za-z]",') or underscore ("',"_",'"), followed by any number of letters, digits (',"[0-9]",'), hyphens ("-"), underscores ("',"_",'"), and periods ("."). This matches the US-ASCII part of XML\'s NCName production ',"[xml-names]",'. Note that the anchor string does not include the "#" character, as it is not a URI-reference. An "$anchor": "foo" becomes the fragment "#foo" when used in a URI. See below for full examples.'),(0,i.kt)("p",null,'The effect of specifying the same fragment name multiple times within the same resource, using any combination of "$anchor" and/or "$dynamicAnchor", is undefined. Implementations MAY raise an error if such usage is detected.')),(0,i.kt)("p",null,"\u4f7f\u7528 JSON Pointer \u7247\u6bb5\u9700\u8981\u4e86\u89e3\u6a21\u5f0f\u7684\u7ed3\u6784\u3002\u5728\u7f16\u5199\u5177\u6709\u63d0\u4f9b\u53ef\u91cd\u7528\u6a21\u5f0f\u610f\u56fe\u7684\u6a21\u5f0f\u6587\u6863\u65f6\uff0c\u53ef\u80fd\u66f4\u503e\u5411\u4e8e\u4f7f\u7528\u4e0e\u4efb\u4f55\u7279\u5b9a\u7ed3\u6784\u4f4d\u7f6e\u65e0\u5173\u7684\u7b80\u5355\u540d\u79f0\u7247\u6bb5\u3002\u8fd9\u5141\u8bb8\u5728\u4e0d\u9700\u8981\u66f4\u65b0 JSON Pointer \u5f15\u7528\u7684\u60c5\u51b5\u4e0b\u91cd\u65b0\u5b9a\u4f4d\u5b50\u6a21\u5f0f\u3002"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$anchor")," \u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"$dynamicAnchor")," \u5173\u952e\u5b57\u7528\u4e8e\u6307\u5b9a\u6b64\u7c7b\u7247\u6bb5\u3002\u5b83\u4eec\u662f\u6807\u8bc6\u7b26\u5173\u952e\u5b57\uff0c\u53ea\u80fd\u7528\u4e8e\u521b\u5efa\u7b80\u5355\u540d\u79f0\u7247\u6bb5\uff0c\u800c\u4e0d\u662f\u50cf ",(0,i.kt)("inlineCode",{parentName:"p"},"$id")," \u90a3\u6837\u7684\u7edd\u5bf9 URI\u3002"),(0,i.kt)("p",null,"\u5c06\u751f\u6210\u7684\u7247\u6bb5\u9644\u52a0\u5230\u7684\u57fa\u672c URI \u662f\u5305\u542b\u6709\u5173 ",(0,i.kt)("inlineCode",{parentName:"p"},"$anchor")," \u6216 ",(0,i.kt)("inlineCode",{parentName:"p"},"$dynamicAnchor")," \u7684\u6a21\u5f0f\u8d44\u6e90\u7684\u89c4\u8303 URI\u3002\u5982\u524d\u4e00\u8282\u6240\u8ff0\uff0c\u8fd9\u8981\u4e48\u662f\u76f8\u540c\u6216\u7236\u6a21\u5f0f\u5bf9\u8c61\u4e2d\u6700\u8fd1\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"$id"),"\uff0c\u8981\u4e48\u662f\u6839\u636e RFC 3986 \u786e\u5b9a\u7684\u6587\u6863\u7684\u57fa\u672c URI\u3002"),(0,i.kt)("p",null,"\u4e0e\u901a\u5e38\u4f7f\u7528 URI \u7684\u60c5\u51b5\u5206\u5f00\uff0c",(0,i.kt)("inlineCode",{parentName:"p"},"$dynamicAnchor")," \u8868\u793a\u8be5\u7247\u6bb5\u5728\u4e0e ",(0,i.kt)("inlineCode",{parentName:"p"},"$dynamicRef")," \u5173\u952e\u5b57\u4e00\u8d77\u4f7f\u7528\u65f6\u662f\u6269\u5c55\u70b9\u3002\u8fd9\u79cd\u4f4e\u7ea7\u522b\u3001\u9ad8\u7ea7\u529f\u80fd\u4f7f\u5f97\u66f4\u5bb9\u6613\u6269\u5c55\u9012\u5f52\u6a21\u5f0f\uff0c\u4f8b\u5982\u5143\u6a21\u5f0f\uff0c\u800c\u65e0\u9700\u5bf9\u8be5\u6269\u5c55\u65bd\u52a0\u4efb\u4f55\u7279\u5b9a\u7684\u8bed\u4e49\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u5173\u4e8e ",(0,i.kt)("inlineCode",{parentName:"p"},"$dynamicRef"),"\uff08\u7b2c 8.2.3.2 \u8282\uff09\u7684\u90e8\u5206\u3002"),(0,i.kt)("p",null,"\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u6b63\u5e38\u7684\u7247\u6bb5\u884c\u4e3a\u65e2\u8db3\u591f\u53c8\u66f4\u76f4\u89c2\u3002\u56e0\u6b64\uff0c\u5efa\u8bae\uff08RECOMMENDED\uff09\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"$anchor")," \u521b\u5efa\u7b80\u5355\u540d\u79f0\u7247\u6bb5\uff0c\u9664\u975e\u660e\u786e\u9700\u8981 ",(0,i.kt)("inlineCode",{parentName:"p"},"$dynamicAnchor"),"\u3002"),(0,i.kt)("p",null,'\u5982\u679c\u5b58\u5728\uff0c\u6b64\u5173\u952e\u5b57\u7684\u503c\u5fc5\u987b\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5e76\u4e14\u5fc5\u987b\uff08MUST\uff09\u4ee5\u5b57\u6bcd "',"[A-Za-z]",'" \u6216\u4e0b\u5212\u7ebf "',"_",'" \u5f00\u5934\uff0c\u540e\u8ddf\u4efb\u610f\u6570\u91cf\u7684\u5b57\u6bcd\u3001\u6570\u5b57 "',"[0-9]",'"\u3001\u8fde\u5b57\u7b26 "-"\u3001\u4e0b\u5212\u7ebf "',"_",'" \u548c\u53e5\u70b9 "."\u3002\u8fd9\u4e0e XML \u7684 NCName \u751f\u6210 ',"[xml-names]"," \u7684 US-ASCII \u90e8\u5206\u76f8\u5339\u914d\u3002\u8bf7\u6ce8\u610f\uff0c\u951a\u70b9\u5b57\u7b26\u4e32\u4e0d\u5305\u62ec ",(0,i.kt)("inlineCode",{parentName:"p"},"#")," \u5b57\u7b26\uff0c\u56e0\u4e3a\u5b83\u4e0d\u662f URI \u53c2\u8003\u3002",(0,i.kt)("inlineCode",{parentName:"p"},'"$anchor": "foo"')," \u5728 URI \u4e2d\u4f7f\u7528\u65f6\u53d8\u4e3a\u7247\u6bb5 ",(0,i.kt)("inlineCode",{parentName:"p"},"#foo"),"\u3002\u8bf7\u53c2\u9605\u4e0b\u9762\u7684\u5b8c\u6574\u793a\u4f8b\u3002"),(0,i.kt)("p",null,"\u5728\u540c\u4e00\u8d44\u6e90\u4e2d\u591a\u6b21\u6307\u5b9a\u76f8\u540c\u7684\u7247\u6bb5\u540d\u79f0\u7684\u6548\u679c\uff0c\u4f7f\u7528\u4efb\u4f55 ",(0,i.kt)("inlineCode",{parentName:"p"},"$anchor")," \u548c/\u6216 ",(0,i.kt)("inlineCode",{parentName:"p"},"$dynamicAnchor")," \u7684\u7ec4\u5408\uff0c\u662f\u672a\u5b9a\u4e49\u7684\u3002\u5982\u679c\u68c0\u6d4b\u5230\u6b64\u7c7b\u4f7f\u7528\uff0c\u5b9e\u73b0\u53ef\u80fd\uff08MAY\uff09\u4f1a\u5f15\u53d1\u9519\u8bef\u3002"),(0,i.kt)("h4",{id:"823-\u6a21\u5f0f\u5f15\u7528schema-references"},"8.2.3. \u6a21\u5f0f\u5f15\u7528\uff08Schema References\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'Several keywords can be used to reference a schema which is to be applied to the current instance location. "$ref" and "$dynamicRef" are applicator keywords, applying the referenced schema to the instance.'),(0,i.kt)("p",null,'As the values of "$ref" and "$dynamicRef" are URI References, this allows the possibility to externalise or divide a schema across multiple files, and provides the ability to validate recursive structures through self-reference.'),(0,i.kt)("p",null,"The resolved URI produced by these keywords is not necessarily a network locator, only an identifier. A schema need not be downloadable from the address if it is a network-addressable URL, and implementations SHOULD NOT assume they should perform a network operation when they encounter a network-addressable URI.")),(0,i.kt)("p",null,"\u6709\u51e0\u4e2a\u5173\u952e\u5b57\u53ef\u4ee5\u7528\u4e8e\u5f15\u7528\u8981\u5e94\u7528\u4e8e\u5f53\u524d\u5b9e\u4f8b\u4f4d\u7f6e\u7684\u6a21\u5f0f\u3002",(0,i.kt)("inlineCode",{parentName:"p"},"$ref")," \u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"$dynamicRef")," \u662f\u5e94\u7528\u5668\u5173\u952e\u5b57\uff0c\u5c06\u5f15\u7528\u7684\u6a21\u5f0f\u5e94\u7528\u4e8e\u5b9e\u4f8b\u3002"),(0,i.kt)("p",null,"\u7531\u4e8e ",(0,i.kt)("inlineCode",{parentName:"p"},"$ref")," \u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"$dynamicRef")," \u7684\u503c\u662f URI \u5f15\u7528\uff0c\u8fd9\u5141\u8bb8\u5728\u591a\u4e2a\u6587\u4ef6\u4e4b\u95f4\u5916\u90e8\u5316\u6216\u5212\u5206\u6a21\u5f0f\uff0c\u5e76\u63d0\u4f9b\u901a\u8fc7\u81ea\u5f15\u7528\u9a8c\u8bc1\u9012\u5f52\u7ed3\u6784\u7684\u80fd\u529b\u3002"),(0,i.kt)("p",null,"\u8fd9\u4e9b\u5173\u952e\u5b57\u751f\u6210\u7684\u89e3\u6790 URI \u4e0d\u4e00\u5b9a\u662f\u7f51\u7edc\u5b9a\u4f4d\u5668\uff0c\u53ea\u662f\u6807\u8bc6\u7b26\u3002\u5982\u679c\u6a21\u5f0f\u662f\u7f51\u7edc\u53ef\u5bfb\u5740\u7684 URL\uff0c\u5b83\u4e0d\u9700\u8981\u4ece\u5730\u5740\u4e0b\u8f7d\uff0c\u5b9e\u73b0\u4e0d\u5e94\u8be5\uff08SHOULD NOT\uff09\u5047\u8bbe\u5728\u9047\u5230\u7f51\u7edc\u53ef\u5bfb\u5740\u7684 URI \u65f6\u5e94\u8be5\u6267\u884c\u7f51\u7edc\u64cd\u4f5c\u3002"),(0,i.kt)("h5",{id:"8231-\u4f7f\u7528-ref-\u7684\u76f4\u63a5\u5f15\u7528direct-references-with-ref"},'8.2.3.1. \u4f7f\u7528 "$ref" \u7684\u76f4\u63a5\u5f15\u7528\uff08Direct References with "$ref"\uff09'),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'The "$ref" keyword is an applicator that is used to reference a statically identified schema. Its results are the results of the referenced schema. Note that this definition of how the results are determined means that other keywords can appear alongside of "$ref" in the same schema object.'),(0,i.kt)("p",null,'The value of the "$ref" keyword MUST be a string which is a URI-Reference. Resolved against the current URI base, it produces the URI of the schema to apply. This resolution is safe to perform on schema load, as the process of evaluating an instance cannot change how the reference resolves.')),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$ref")," \u5173\u952e\u5b57\u662f\u4e00\u4e2a\u5e94\u7528\u5668\uff0c\u7528\u4e8e\u5f15\u7528\u9759\u6001\u6807\u8bc6\u7684\u6a21\u5f0f\u3002\u5176\u7ed3\u679c\u662f\u5f15\u7528\u6a21\u5f0f\u7684\u7ed3\u679c\u3002\u8bf7\u6ce8\u610f\uff0c\u8fd9\u79cd\u786e\u5b9a\u7ed3\u679c\u7684\u65b9\u5f0f\u610f\u5473\u7740\u5176\u5b83\u5173\u952e\u5b57\u53ef\u4ee5\u51fa\u73b0\u5728\u540c\u4e00\u6a21\u5f0f\u5bf9\u8c61\u4e2d\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"$ref")," \u65c1\u8fb9\u3002"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$ref")," \u5173\u952e\u5b57\u7684\u503c\u5fc5\u987b\uff08MUST\uff09\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u8be5\u5b57\u7b26\u4e32\u662f\u4e00\u4e2a URI-Reference\u3002\u4e0e\u5f53\u524d\u57fa\u672c URI \u89e3\u6790\uff0c\u751f\u6210\u8981\u5e94\u7528\u7684\u6a21\u5f0f\u7684 URI\u3002\u8fd9\u79cd\u89e3\u6790\u5728\u6a21\u5f0f\u52a0\u8f7d\u65f6\u662f\u5b89\u5168\u7684\uff0c\u56e0\u4e3a\u8bc4\u4f30\u5b9e\u4f8b\u7684\u8fc7\u7a0b\u4e0d\u80fd\u6539\u53d8\u5f15\u7528\u7684\u89e3\u6790\u65b9\u5f0f\u3002"),(0,i.kt)("h5",{id:"8232-\u4f7f\u7528-dynamicref-\u7684\u52a8\u6001\u5f15\u7528dynamic-references-with-dynamicref"},'8.2.3.2. \u4f7f\u7528 "$dynamicRef" \u7684\u52a8\u6001\u5f15\u7528\uff08Dynamic References with "$dynamicRef"\uff09'),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'The "$dynamicRef" keyword is an applicator that allows for deferring the full resolution until runtime, at which point it is resolved each time it is encountered while evaluating an instance.'),(0,i.kt)("p",null,'Together with "$dynamicAnchor", "$dynamicRef" implements a cooperative extension mechanism that is primarily useful with recursive schemas (schemas that reference themselves). Both the extension point and the runtime-determined extension target are defined with "$dynamicAnchor", and only exhibit runtime dynamic behavior when referenced with "$dynamicRef".'),(0,i.kt)("p",null,'The value of the "$dynamicRef" property MUST be a string which is a URI-Reference. Resolved against the current URI base, it produces the URI used as the starting point for runtime resolution. This initial resolution is safe to perform on schema load.'),(0,i.kt)("p",null,'If the initially resolved starting point URI includes a fragment that was created by the "$dynamicAnchor" keyword, the initial URI MUST be replaced by the URI (including the fragment) for the outermost schema resource in the dynamic scope (Section 7.1) that defines an identically named fragment with "$dynamicAnchor".'),(0,i.kt)("p",null,'Otherwise, its behavior is identical to "$ref", and no runtime resolution is needed.'),(0,i.kt)("p",null,"For a full example using these keyword, see appendix C. The difference between the hyper-schema meta-schema in pre-2019 drafts and an this draft dramatically demonstrates the utility of these keywords.")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$dynamicRef")," \u5173\u952e\u5b57\u662f\u4e00\u4e2a\u5e94\u7528\u5668\uff0c\u5141\u8bb8\u5c06\u5b8c\u5168\u89e3\u6790\u63a8\u8fdf\u5230\u8fd0\u884c\u65f6\uff0c\u5728\u8fd0\u884c\u65f6\u6bcf\u6b21\u9047\u5230\u5b83\u65f6\u89e3\u6790\u3002"),(0,i.kt)("p",null,"\u7ed3\u5408 ",(0,i.kt)("inlineCode",{parentName:"p"},"$dynamicAnchor"),"\uff0c",(0,i.kt)("inlineCode",{parentName:"p"},"$dynamicRef")," \u5b9e\u73b0\u4e86\u4e00\u4e2a\u5408\u4f5c\u6269\u5c55\u673a\u5236\uff0c\u4e3b\u8981\u7528\u4e8e\u9012\u5f52\u6a21\u5f0f\uff08\u5f15\u7528\u81ea\u8eab\u7684\u6a21\u5f0f\uff09\u3002\u6269\u5c55\u70b9\u548c\u8fd0\u884c\u65f6\u786e\u5b9a\u7684\u6269\u5c55\u76ee\u6807\u90fd\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"$dynamicAnchor")," \u5b9a\u4e49\uff0c\u5e76\u4e14\u4ec5\u5728\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"$dynamicRef")," \u5f15\u7528\u65f6\u8868\u73b0\u51fa\u8fd0\u884c\u65f6\u52a8\u6001\u884c\u4e3a\u3002"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$dynamicRef")," \u5c5e\u6027\u7684\u503c\u5fc5\u987b\uff08MUST\uff09\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u8be5\u5b57\u7b26\u4e32\u662f\u4e00\u4e2a URI-Reference\u3002\u4e0e\u5f53\u524d\u57fa\u672c URI \u89e3\u6790\uff0c\u751f\u6210\u7528\u4f5c\u8fd0\u884c\u65f6\u89e3\u6790\u8d77\u70b9\u7684 URI\u3002\u8fd9\u79cd\u521d\u59cb\u89e3\u6790\u5728\u6a21\u5f0f\u52a0\u8f7d\u65f6\u662f\u5b89\u5168\u7684\u3002"),(0,i.kt)("p",null,"\u5982\u679c\u6700\u521d\u89e3\u6790\u7684\u8d77\u70b9 URI \u5305\u542b\u7531 ",(0,i.kt)("inlineCode",{parentName:"p"},"$dynamicAnchor")," \u5173\u952e\u5b57\u521b\u5efa\u7684\u7247\u6bb5\uff0c\u5219\u521d\u59cb URI \u5fc5\u987b\uff08MUST\uff09\u66ff\u6362\u4e3a\u52a8\u6001\u8303\u56f4\uff08\u7b2c 7.1 \u8282\uff09\u4e2d\u6700\u5916\u5c42\u6a21\u5f0f\u8d44\u6e90\u7684 URI\uff08\u5305\u62ec\u7247\u6bb5\uff09\uff0c\u8be5\u8d44\u6e90\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"$dynamicAnchor")," \u5b9a\u4e49\u5177\u6709\u76f8\u540c\u540d\u79f0\u7684\u7247\u6bb5\u3002"),(0,i.kt)("p",null,"\u5426\u5219\uff0c\u5176\u884c\u4e3a\u4e0e ",(0,i.kt)("inlineCode",{parentName:"p"},"$ref")," \u76f8\u540c\uff0c\u65e0\u9700\u8fd0\u884c\u65f6\u89e3\u6790\u3002"),(0,i.kt)("p",null,"\u6709\u5173\u4f7f\u7528\u8fd9\u4e9b\u5173\u952e\u5b57\u7684\u5b8c\u6574\u793a\u4f8b\uff0c\u8bf7\u53c2\u9605\u9644\u5f55 pre-2019 \u8349\u6848\u4e2d\u7684\u8d85\u6a21\u5f0f\u5143\u6a21\u5f0f\u4e0e\u672c\u8349\u6848\u4e4b\u95f4\u7684\u533a\u522b\u6781\u5927\u5730\u5c55\u793a\u4e86\u8fd9\u4e9b\u5173\u952e\u5b57\u7684\u5b9e\u7528\u6027\u3002"),(0,i.kt)("h4",{id:"824-\u4f7f\u7528-defs-\u8fdb\u884c\u6a21\u5f0f\u91cd\u7528schema-re-use-with-defs"},'8.2.4. \u4f7f\u7528 "$defs" \u8fdb\u884c\u6a21\u5f0f\u91cd\u7528\uff08Schema Re-Use With "$defs"\uff09'),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'The "$defs" keyword reserves a location for schema authors to inline re-usable JSON Schemas into a more general schema. The keyword does not directly affect the validation result.'),(0,i.kt)("p",null,"This keyword's value MUST be an object. Each member value of this object MUST be a valid JSON Schema."),(0,i.kt)("p",null,'As an example, here is a schema describing an array of positive integers, where the positive integer constraint is a subschema in "$defs":'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "type": "array",\n    "items": { "$ref": "#/$defs/positiveInteger" },\n    "$defs": {\n        "positiveInteger": {\n            "type": "integer",\n            "exclusiveMinimum": 0\n        }\n    }\n}\n'))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$defs")," \u5173\u952e\u5b57\u4e3a\u6a21\u5f0f\u4f5c\u8005\u4fdd\u7559\u4e86\u4e00\u4e2a\u4f4d\u7f6e\uff0c\u4ee5\u5c06\u53ef\u91cd\u7528\u7684 JSON Schema \u5185\u8054\u5230\u66f4\u901a\u7528\u7684\u6a21\u5f0f\u4e2d\u3002\u8be5\u5173\u952e\u5b57\u4e0d\u76f4\u63a5\u5f71\u54cd\u9a8c\u8bc1\u7ed3\u679c\u3002"),(0,i.kt)("p",null,"\u6b64\u5173\u952e\u5b57\u7684\u503c\u5fc5\u987b\uff08MUST\uff09\u662f\u4e00\u4e2a\u5bf9\u8c61\u3002\u8be5\u5bf9\u8c61\u7684\u6bcf\u4e2a\u6210\u5458\u503c\u5fc5\u987b\uff08MUST\uff09\u662f\u6709\u6548\u7684 JSON Schema \u3002"),(0,i.kt)("p",null,"\u4f5c\u4e3a\u4e00\u4e2a\u4f8b\u5b50\uff0c\u8fd9\u91cc\u6709\u4e00\u4e2a\u63cf\u8ff0\u6b63\u6574\u6570\u6570\u7ec4\u7684\u6a21\u5f0f\uff0c\u5176\u4e2d\u6b63\u6574\u6570\u7ea6\u675f\u662f ",(0,i.kt)("inlineCode",{parentName:"p"},"$defs")," \u4e2d\u7684\u4e00\u4e2a\u5b50\u6a21\u5f0f\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "type": "array",\n    "items": { "$ref": "#/$defs/positiveInteger" },\n    "$defs": {\n        "positiveInteger": {\n            "type": "integer",\n            "exclusiveMinimum": 0\n        }\n    }\n}\n')),(0,i.kt)("h3",{id:"83-\u4f7f\u7528-comment-\u8fdb\u884c\u6ce8\u91cacomments-with-comment"},'8.3. \u4f7f\u7528 "$comment" \u8fdb\u884c\u6ce8\u91ca\uff08Comments With "$comment"\uff09'),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"This keyword reserves a location for comments from schema authors to readers or maintainers of the schema."),(0,i.kt)("p",null,"The value of this keyword MUST be a string. Implementations MUST NOT present this string to end users. Tools for editing schemas SHOULD support displaying and editing this keyword. The value of this keyword MAY be used in debug or error output which is intended for developers making use of schemas."),(0,i.kt)("p",null,'Schema vocabularies SHOULD allow "$comment" within any object containing vocabulary keywords. Implementations MAY assume "$comment" is allowed unless the vocabulary specifically forbids it. Vocabularies MUST NOT specify any effect of "$comment" beyond what is described in this specification.'),(0,i.kt)("p",null,'Tools that translate other media types or programming languages to and from application/schema+json MAY choose to convert that media type or programming language\'s native comments to or from "$comment" values. The behavior of such translation when both native comments and "$comment" properties are present is implementation-dependent.'),(0,i.kt)("p",null,'Implementations MAY strip "$comment" values at any point during processing. In particular, this allows for shortening schemas when the size of deployed schemas is a concern.'),(0,i.kt)("p",null,'Implementations MUST NOT take any other action based on the presence, absence, or contents of "$comment" properties. In particular, the value of "$comment" MUST NOT be collected as an annotation result.')),(0,i.kt)("p",null,"\u6b64\u5173\u952e\u5b57\u4e3a\u6a21\u5f0f\u4f5c\u8005\u4fdd\u7559\u4e86\u4e00\u4e2a\u4f4d\u7f6e\uff0c\u7528\u4e8e\u5411\u6a21\u5f0f\u7684\u8bfb\u8005\u6216\u7ef4\u62a4\u8005\u53d1\u8868\u8bc4\u8bba\u3002"),(0,i.kt)("p",null,"\u6b64\u5173\u952e\u5b57\u7684\u503c\u5fc5\u987b\uff08MUST\uff09\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u3002\u5b9e\u73b0\u4e0d\u5f97\uff08MUST NOT\uff09\u5411\u7ec8\u7aef\u7528\u6237\u5448\u73b0\u6b64\u5b57\u7b26\u4e32\u3002\u7f16\u8f91\u6a21\u5f0f\u7684\u5de5\u5177\u5e94\uff08SHOULD\uff09\u652f\u6301\u663e\u793a\u548c\u7f16\u8f91\u6b64\u5173\u952e\u5b57\u3002\u6b64\u5173\u952e\u5b57\u7684\u503c\u53ef\u4ee5\uff08MAY\uff09\u7528\u4e8e\u8c03\u8bd5\u6216\u9519\u8bef\u8f93\u51fa\uff0c\u4f9b\u4f7f\u7528\u6a21\u5f0f\u7684\u5f00\u53d1\u4eba\u5458\u4f7f\u7528\u3002"),(0,i.kt)("p",null,"\u6a21\u5f0f\u8bcd\u6c47\u8868\u5e94\uff08SHOULD\uff09\u5141\u8bb8\u5728\u5305\u542b\u8bcd\u6c47\u8868\u5173\u952e\u5b57\u7684\u4efb\u4f55\u5bf9\u8c61\u4e2d\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"$comment"),"\u3002\u5b9e\u73b0\u53ef\u4ee5\uff08MAY\uff09\u5047\u8bbe\u5141\u8bb8\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"$comment"),"\uff0c\u9664\u975e\u8bcd\u6c47\u8868\u7279\u610f\u7981\u6b62\u5b83\u3002\u8bcd\u6c47\u8868\u4e0d\u80fd\uff08MUST NOT\uff09\u89c4\u5b9a ",(0,i.kt)("inlineCode",{parentName:"p"},"$comment")," \u7684\u4efb\u4f55\u6548\u679c\uff0c\u9664\u4e86\u672c\u89c4\u8303\u4e2d\u63cf\u8ff0\u7684\u5185\u5bb9\u3002"),(0,i.kt)("p",null,"\u5c06\u5176\u5b83\u5a92\u4f53\u7c7b\u578b\u6216\u7f16\u7a0b\u8bed\u8a00\u8f6c\u6362\u4e3a ",(0,i.kt)("inlineCode",{parentName:"p"},"application/schema+json")," \u53ca\u5176\u53cd\u5411\u8f6c\u6362\u7684\u5de5\u5177\u53ef\u4ee5\uff08MAY\uff09\u9009\u62e9\u5c06\u8be5\u5a92\u4f53\u7c7b\u578b\u6216\u7f16\u7a0b\u8bed\u8a00\u7684\u539f\u751f\u6ce8\u91ca\u8f6c\u6362\u4e3a\u6216\u4ece ",(0,i.kt)("inlineCode",{parentName:"p"},"$comment")," \u503c\u3002\u5f53\u5b58\u5728\u539f\u751f\u6ce8\u91ca\u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"$comment")," \u5c5e\u6027\u65f6\uff0c\u6b64\u7c7b\u7ffb\u8bd1\u7684\u884c\u4e3a\u53d6\u51b3\u4e8e\u5b9e\u73b0\u3002"),(0,i.kt)("p",null,"\u5b9e\u73b0\u53ef\u4ee5\uff08MAY\uff09\u5728\u5904\u7406\u8fc7\u7a0b\u4e2d\u7684\u4efb\u4f55\u65f6\u5019\u53bb\u9664 ",(0,i.kt)("inlineCode",{parentName:"p"},"$comment")," \u503c\u3002\u7279\u522b\u662f\uff0c\u5f53\u90e8\u7f72\u6a21\u5f0f\u7684\u5927\u5c0f\u662f\u4e00\u4e2a\u95ee\u9898\u65f6\uff0c\u8fd9\u5141\u8bb8\u7f29\u77ed\u6a21\u5f0f\u3002"),(0,i.kt)("p",null,"\u5b9e\u73b0\u4e0d\u5f97\uff08MUST NOT\uff09\u6839\u636e ",(0,i.kt)("inlineCode",{parentName:"p"},"$comment")," \u5c5e\u6027\u7684\u5b58\u5728\u3001\u4e0d\u5b58\u5728\u6216\u5185\u5bb9\u91c7\u53d6\u4efb\u4f55\u5176\u5b83\u64cd\u4f5c\u3002\u7279\u522b\u662f\uff0c",(0,i.kt)("inlineCode",{parentName:"p"},"$comment")," \u7684\u503c\u4e0d\u80fd\uff08MUST NOT\uff09\u4f5c\u4e3a\u6ce8\u89e3\u7ed3\u679c\u6536\u96c6\u3002"),(0,i.kt)("h2",{id:"9-\u52a0\u8f7d\u548c\u5904\u7406\u6a21\u5f0floading-and-processing-schemas"},"9. \u52a0\u8f7d\u548c\u5904\u7406\u6a21\u5f0f\uff08Loading and Processing Schemas\uff09"),(0,i.kt)("h3",{id:"91-\u52a0\u8f7d\u6a21\u5f0floading-a-schema"},"9.1. \u52a0\u8f7d\u6a21\u5f0f\uff08Loading a Schema\uff09"),(0,i.kt)("h4",{id:"911-\u521d\u59cb\u5316\u57fa\u672c-uriinitial-base-uri"},"9.1.1. \u521d\u59cb\u5316\u57fa\u672c URI\uff08Initial Base URI\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"RFC3986 Section 5.1 ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc3986"},"RFC3986")," defines how to determine the default base URI of a document."),(0,i.kt)("p",null,"Informatively, the initial base URI of a schema is the URI at which it was found, whether that was a network location, a local filesystem, or any other situation identifiable by a URI of any known scheme."),(0,i.kt)("p",null,'If a schema document defines no explicit base URI with "$id" (embedded in content), the base URI is that determined per RFC 3986 section 5 ',(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc3986"},"RFC3986"),"."),(0,i.kt)("p",null,"If no source is known, or no URI scheme is known for the source, a suitable implementation-specific default URI MAY be used as described in RFC 3986 Section 5.1.4 ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc3986"},"RFC3986"),". It is RECOMMENDED that implementations document any default base URI that they assume."),(0,i.kt)("p",null,"If a schema object is embedded in a document of another media type, then the initial base URI is determined according to the rules of that media type."),(0,i.kt)("p",null,'Unless the "$id" keyword described in an earlier section is present in the root schema, this base URI SHOULD be considered the canonical URI of the schema document\'s root schema resource.')),(0,i.kt)("p",null,"RFC3986 \u7b2c5.1\u8282\u5b9a\u4e49\u4e86\u5982\u4f55\u786e\u5b9a\u6587\u6863\u7684\u9ed8\u8ba4\u57fa\u672c URI\u3002\n\u4f5c\u4e3a\u4fe1\u606f\uff0c\u6a21\u5f0f\u7684\u521d\u59cb\u57fa\u672c URI \u662f\u627e\u5230\u5b83\u7684 URI\uff0c\u65e0\u8bba\u662f\u7f51\u7edc\u4f4d\u7f6e\u3001\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u8fd8\u662f\u4efb\u4f55\u5176\u5b83\u53ef\u4ee5\u901a\u8fc7\u5df2\u77e5\u65b9\u6848\u7684 URI \u6807\u8bc6\u7684\u60c5\u51b5\u3002"),(0,i.kt)("p",null,"\u5982\u679c\u6a21\u5f0f\u6587\u6863\u672a\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"$id"),"\uff08\u5d4c\u5165\u5728\u5185\u5bb9\u4e2d\uff09\u5b9a\u4e49\u660e\u786e\u7684\u57fa\u672c URI\uff0c\u5219\u57fa\u672c URI \u662f\u6839\u636e RFC 3986 \u7b2c5\u8282\u786e\u5b9a\u7684\u3002"),(0,i.kt)("p",null,"\u5982\u679c\u6ca1\u6709\u5df2\u77e5\u7684\u6765\u6e90\uff0c\u6216\u8005\u6ca1\u6709\u5df2\u77e5\u7684 URI \u65b9\u6848\uff0c\u53ef\u4ee5\u4f7f\u7528 RFC 3986 \u7b2c5.1.4\u8282\u4e2d\u63cf\u8ff0\u7684\u9002\u5f53\u7684\u5b9e\u73b0\u7279\u5b9a\u7684\u9ed8\u8ba4 URI\u3002\u5efa\u8bae\u5b9e\u73b0\u8bb0\u5f55\u5b83\u4eec\u6240\u5047\u8bbe\u7684\u4efb\u4f55\u9ed8\u8ba4\u57fa\u672c URI\u3002"),(0,i.kt)("p",null,"\u5982\u679c\u6a21\u5f0f\u5bf9\u8c61\u5d4c\u5165\u5728\u53e6\u4e00\u79cd\u5a92\u4f53\u7c7b\u578b\u7684\u6587\u6863\u4e2d\uff0c\u5219\u521d\u59cb\u57fa\u672c URI \u6839\u636e\u8be5\u5a92\u4f53\u7c7b\u578b\u7684\u89c4\u5219\u786e\u5b9a\u3002"),(0,i.kt)("p",null,"\u9664\u975e\u6839\u6a21\u5f0f\u4e2d\u5b58\u5728\u524d\u9762\u90e8\u5206\u4e2d\u63cf\u8ff0\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"$id")," \u5173\u952e\u5b57\uff0c\u5426\u5219\u5e94\u5c06\u6b64\u57fa\u672c URI \u89c6\u4e3a\u6a21\u5f0f\u6587\u6863\u7684\u6839\u6a21\u5f0f\u8d44\u6e90\u7684\u89c4\u8303 URI\u3002"),(0,i.kt)("h4",{id:"912-\u52a0\u8f7d\u5f15\u7528\u7684\u6a21\u5f0floading-a-referenced-schema"},"9.1.2. \u52a0\u8f7d\u5f15\u7528\u7684\u6a21\u5f0f\uff08Loading a referenced schema\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"The use of URIs to identify remote schemas does not necessarily mean anything is downloaded, but instead JSON Schema implementations SHOULD understand ahead of time which schemas they will be using, and the URIs that identify them."),(0,i.kt)("p",null,"When schemas are downloaded, for example by a generic user-agent that does not know until runtime which schemas to download, see Usage for Hypermedia (Section 9.5.1)."),(0,i.kt)("p",null,'Implementations SHOULD be able to associate arbitrary URIs with an arbitrary schema and/or automatically associate a schema\'s "$id"-given URI, depending on the trust that the validator has in the schema. Such URIs and schemas can be supplied to an implementation prior to processing instances, or may be noted within a schema document as it is processed, producing associations as shown in appendix A.'),(0,i.kt)("p",null,"A schema MAY (and likely will) have multiple URIs, but there is no way for a URI to identify more than one schema. When multiple schemas try to identify as the same URI, validators SHOULD raise an error condition.")),(0,i.kt)("p",null,"\u4f7f\u7528 URI \u6807\u8bc6\u8fdc\u7a0b\u6a21\u5f0f\u5e76\u4e0d\u4e00\u5b9a\u610f\u5473\u7740\u4e0b\u8f7d\u4efb\u4f55\u5185\u5bb9\uff0c\u800c\u662f JSON Schema \u5b9e\u73b0\u5e94\u8be5\uff08SHOULD\uff09\u63d0\u524d\u4e86\u89e3\u5b83\u4eec\u5c06\u4f7f\u7528\u54ea\u4e9b\u6a21\u5f0f\uff0c\u4ee5\u53ca\u6807\u8bc6\u5b83\u4eec\u7684 URI\u3002"),(0,i.kt)("p",null,"\u5f53\u6a21\u5f0f\u88ab\u4e0b\u8f7d\u65f6\uff0c\u4f8b\u5982\u4e00\u4e2a\u901a\u7528\u7528\u6237\u4ee3\u7406\u5728\u8fd0\u884c\u65f6\u624d\u77e5\u9053\u8981\u4e0b\u8f7d\u54ea\u4e9b\u6a21\u5f0f\uff0c\u8bf7\u53c2\u9605\u8d85\u5a92\u4f53\u7684\u4f7f\u7528\uff08\u7b2c9.5.1\u8282\uff09\u3002"),(0,i.kt)("p",null,"\u5b9e\u73b0\u5e94\u8be5\uff08SHOULD\uff09\u80fd\u591f\u5c06\u4efb\u610f URI \u4e0e\u4efb\u610f\u6a21\u5f0f\u5173\u8054\u8d77\u6765\uff0c\u6216\u8005\u81ea\u52a8\u5173\u8054\u6a21\u5f0f\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"$id")," \u7ed9\u5b9a\u7684 URI\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u9a8c\u8bc1\u5668\u5bf9\u6a21\u5f0f\u7684\u4fe1\u4efb\u3002\u8fd9\u4e9b URI \u548c\u6a21\u5f0f\u53ef\u4ee5\u5728\u5904\u7406\u5b9e\u4f8b\u4e4b\u524d\u63d0\u4f9b\u7ed9\u5b9e\u73b0\uff0c\u6216\u8005\u5728\u5904\u7406\u6a21\u5f0f\u6587\u6863\u65f6\u8bb0\u5f55\uff0c\u5982\u9644\u5f55 A \u4e2d\u6240\u793a\u3002"),(0,i.kt)("p",null,"\u6a21\u5f0f\u53ef\u80fd\uff08\u5e76\u4e14\u5f88\u53ef\u80fd\uff09\u5177\u6709\u591a\u4e2a URI\uff0c\u4f46\u662f\u4e00\u4e2a URI \u65e0\u6cd5\u6807\u8bc6\u591a\u4e2a\u6a21\u5f0f\u3002\u5f53\u591a\u4e2a\u6a21\u5f0f\u5c1d\u8bd5\u6807\u8bc6\u4e3a\u76f8\u540c\u7684 URI \u65f6\uff0c\u9a8c\u8bc1\u5668\u5e94\u8be5\uff08SHOULD\uff09\u5f15\u53d1\u9519\u8bef\u6761\u4ef6\u3002"),(0,i.kt)("h4",{id:"913-\u68c0\u6d4b\u5143\u6a21\u5f0fdetecting-a-meta-schema"},"9.1.3. \u68c0\u6d4b\u5143\u6a21\u5f0f\uff08Detecting a Meta-Schema\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'Implementations MUST recognize a schema as a meta-schema if it is being examined because it was identified as such by another schema\'s "$schema" keyword. This means that a single schema document might sometimes be considered a regular schema, and other times be considered a meta-schema.'),(0,i.kt)("p",null,'In the case of examining a schema which is its own meta-schema, when an implementation begins processing it as a regular schema, it is processed under those rules. However, when loaded a second time as a result of checking its own "$schema" value, it is treated as a meta-schema. So the same document is processed both ways in the course of one session.'),(0,i.kt)("p",null,"Implementations MAY allow a schema to be explicitly passed as a meta-schema, for implementation-specific purposes, such as pre-loading a commonly used meta-schema and checking its vocabulary support requirements up front. Meta-schema authors MUST NOT expect such features to be interoperable across implementations.")),(0,i.kt)("p",null,"\u5982\u679c\u4e00\u4e2a\u6a21\u5f0f\u662f\u56e0\u4e3a\u53e6\u4e00\u4e2a\u6a21\u5f0f\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"$schema")," \u5173\u952e\u5b57\u5c06\u5176\u8bc6\u522b\u4e3a\u5143\u6a21\u5f0f\u800c\u88ab\u68c0\u67e5\u7684\uff0c\u5b9e\u73b0\u5fc5\u987b\uff08MUST\uff09\u5c06\u5176\u8bc6\u522b\u4e3a\u5143\u6a21\u5f0f\u3002\u8fd9\u610f\u5473\u7740\u5355\u4e2a\u6a21\u5f0f\u6587\u6863\u6709\u65f6\u53ef\u80fd\u88ab\u89c6\u4e3a\u5e38\u89c4\u6a21\u5f0f\uff0c\u800c\u5176\u5b83\u65f6\u5019\u88ab\u89c6\u4e3a\u5143\u6a21\u5f0f\u3002"),(0,i.kt)("p",null,"\u5728\u68c0\u67e5\u6a21\u5f0f\u672c\u8eab\u5c31\u662f\u5176\u5143\u6a21\u5f0f\u7684\u60c5\u51b5\u4e0b\uff0c\u5f53\u5b9e\u73b0\u5f00\u59cb\u5c06\u5176\u89c6\u4e3a\u5e38\u89c4\u6a21\u5f0f\u8fdb\u884c\u5904\u7406\u65f6\uff0c\u5c06\u6309\u7167\u8fd9\u4e9b\u89c4\u5219\u8fdb\u884c\u5904\u7406\u3002\u7136\u800c\uff0c\u5f53\u7b2c\u4e8c\u6b21\u52a0\u8f7d\u68c0\u67e5\u5176\u81ea\u5df1\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"$schema")," \u503c\u65f6\uff0c\u5b83\u88ab\u89c6\u4e3a\u5143\u6a21\u5f0f\u3002\u56e0\u6b64\uff0c\u5728\u4e00\u6b21\u4f1a\u8bdd\u8fc7\u7a0b\u4e2d\uff0c\u76f8\u540c\u7684\u6587\u6863\u4f1a\u4ee5\u4e24\u79cd\u65b9\u5f0f\u8fdb\u884c\u5904\u7406\u3002"),(0,i.kt)("p",null,"\u5b9e\u73b0\u53ef\u4ee5\uff08MAY\uff09\u5141\u8bb8\u6a21\u5f0f\u88ab\u663e\u5f0f\u5730\u4f5c\u4e3a\u5143\u6a21\u5f0f\u4f20\u9012\uff0c\u7528\u4e8e\u5b9e\u73b0\u7279\u5b9a\u7684\u76ee\u7684\uff0c\u4f8b\u5982\u9884\u52a0\u8f7d\u5e38\u7528\u7684\u5143\u6a21\u5f0f\u5e76\u5728\u524d\u7aef\u68c0\u67e5\u5176\u8bcd\u6c47\u8868\u652f\u6301\u8981\u6c42\u3002\u5143\u6a21\u5f0f\u4f5c\u8005\u4e0d\u80fd\u671f\u671b\u8fd9\u4e9b\u529f\u80fd\u5728\u5b9e\u73b0\u4e4b\u95f4\u5177\u6709\u4e92\u64cd\u4f5c\u6027\u3002"),(0,i.kt)("h3",{id:"92-\u53d6\u6d88\u5f15\u7528dereferencing"},"9.2. \u53d6\u6d88\u5f15\u7528\uff08Dereferencing\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'Schemas can be identified by any URI that has been given to them, including a JSON Pointer or their URI given directly by "$id". In all cases, dereferencing a "$ref" reference involves first resolving its value as a URI reference against the current base URI per ',(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc3986"},"RFC 3986"),"."),(0,i.kt)("p",null,"If the resulting URI identifies a schema within the current document, or within another schema document that has been made available to the implementation, then that schema SHOULD be used automatically."),(0,i.kt)("p",null,"For example, consider this schema:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "$id": "https://example.net/root.json",\n    "items": {\n        "type": "array",\n        "items": { "$ref": "#item" }\n    },\n    "$defs": {\n        "single": {\n            "$anchor": "item",\n            "type": "object",\n            "additionalProperties": { "$ref": "other.json" }\n        }\n    }\n}\n')),(0,i.kt)("p",null,'When an implementation encounters the <#/$defs/single> schema, it resolves the "$anchor" value as a fragment name against the current base URI to form ',(0,i.kt)("a",{parentName:"p",href:"https://example.net/root.json#item"},"https://example.net/root.json#item"),"."),(0,i.kt)("p",null,"When an implementation then looks inside the <#/items> schema, it encounters the <#item> reference, and resolves this to ",(0,i.kt)("a",{parentName:"p",href:"https://example.net/root.json#item"},"https://example.net/root.json#item"),", which it has seen defined in this same document and can therefore use automatically."),(0,i.kt)("p",null,'When an implementation encounters the reference to "other.json", it resolves this to ',(0,i.kt)("a",{parentName:"p",href:"https://example.net/other.json"},"https://example.net/other.json"),", which is not defined in this document. If a schema with that identifier has otherwise been supplied to the implementation, it can also be used automatically. What should implementations do when the referenced schema is not known? Are there circumstances in which automatic network dereferencing is allowed? A same origin policy? A user-configurable option? In the case of an evolving API described by Hyper-Schema, it is expected that new schemas will be added to the system dynamically, so placing an absolute requirement of pre-loading schema documents is not feasible.")),(0,i.kt)("p",null,"\u6a21\u5f0f\u53ef\u4ee5\u7531\u8d4b\u4e88\u5b83\u4eec\u7684\u4efb\u4f55 URI \u6765\u8bc6\u522b\uff0c\u5305\u62ec JSON \u6307\u9488\u6216\u7531 ",(0,i.kt)("inlineCode",{parentName:"p"},"$id")," \u76f4\u63a5\u7ed9\u51fa\u7684 URI\u3002\u5728\u6240\u6709\u60c5\u51b5\u4e0b\uff0c\u53d6\u6d88\u5f15\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"$ref")," \u5f15\u7528\u9996\u5148\u6d89\u53ca\u6839\u636e ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc3986"},"RFC 3986")," \u5c06\u5176\u503c\u89e3\u6790\u4e3a\u76f8\u5bf9\u4e8e\u5f53\u524d\u57fa\u672c URI \u7684 URI \u5f15\u7528\u3002"),(0,i.kt)("p",null,"\u5982\u679c\u751f\u6210\u7684 URI \u5728\u5f53\u524d\u6587\u6863\u4e2d\u6807\u8bc6\u4e86\u4e00\u4e2a\u6a21\u5f0f\uff0c\u6216\u8005\u5728\u5df2\u63d0\u4f9b\u7ed9\u5b9e\u73b0\u7684\u5176\u5b83\u6a21\u5f0f\u6587\u6863\u4e2d\uff0c\u90a3\u4e48\u5e94\u8be5\uff08SHOULD\uff09\u81ea\u52a8\u4f7f\u7528\u8be5\u6a21\u5f0f\u3002"),(0,i.kt)("p",null,"\u4f8b\u5982\uff0c\u8003\u8651\u8fd9\u4e2a\u6a21\u5f0f\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "$id": "https://example.net/root.json",\n    "items": {\n        "type": "array",\n        "items": { "$ref": "#item" }\n    },\n    "$defs": {\n        "single": {\n            "$anchor": "item",\n            "type": "object",\n            "additionalProperties": { "$ref": "other.json" }\n        }\n    }\n}\n')),(0,i.kt)("p",null,"\u5f53\u5b9e\u73b0\u9047\u5230 ",(0,i.kt)("inlineCode",{parentName:"p"},"<#/$defs/single>")," \u6a21\u5f0f\u65f6\uff0c\u5b83\u4f1a\u6839\u636e\u5f53\u524d\u57fa\u672c URI \u89e3\u6790 ",(0,i.kt)("inlineCode",{parentName:"p"},"$anchor")," \u503c\u4f5c\u4e3a\u7247\u6bb5\u540d\u79f0\uff0c\u5f62\u6210 ",(0,i.kt)("a",{parentName:"p",href:"https://example.net/root.json#item%E3%80%82"},"https://example.net/root.json#item\u3002")),(0,i.kt)("p",null,"\u5f53\u5b9e\u73b0\u7136\u540e\u67e5\u770b ",(0,i.kt)("inlineCode",{parentName:"p"},"<#/items>")," \u6a21\u5f0f\u65f6\uff0c\u5b83\u4f1a\u9047\u5230 ",(0,i.kt)("inlineCode",{parentName:"p"},"<#item>")," \u5f15\u7528\uff0c\u5e76\u5c06\u5176\u89e3\u6790\u4e3a ",(0,i.kt)("a",{parentName:"p",href:"https://example.net/root.json#item%EF%BC%8C%E5%AE%83%E5%B7%B2%E5%9C%A8%E6%9C%AC%E6%96%87%E6%A1%A3%E4%B8%AD%E7%9C%8B%E5%88%B0%E8%BF%87%E5%AE%9A%E4%B9%89%EF%BC%8C%E5%9B%A0%E6%AD%A4%E5%8F%AF%E4%BB%A5%E8%87%AA%E5%8A%A8%E4%BD%BF%E7%94%A8%E3%80%82"},"https://example.net/root.json#item\uff0c\u5b83\u5df2\u5728\u672c\u6587\u6863\u4e2d\u770b\u5230\u8fc7\u5b9a\u4e49\uff0c\u56e0\u6b64\u53ef\u4ee5\u81ea\u52a8\u4f7f\u7528\u3002")),(0,i.kt)("p",null,"\u5f53\u5b9e\u73b0\u9047\u5230\u5bf9 ",(0,i.kt)("inlineCode",{parentName:"p"},"other.json")," \u7684\u5f15\u7528\u65f6\uff0c\u5b83\u5c06\u5176\u89e3\u6790\u4e3a ",(0,i.kt)("a",{parentName:"p",href:"https://example.net/other.json%EF%BC%8C%E8%BF%99%E5%9C%A8%E6%9C%AC%E6%96%87%E6%A1%A3%E4%B8%AD%E6%9C%AA%E5%AE%9A%E4%B9%89%E3%80%82%E5%A6%82%E6%9E%9C%E4%B8%80%E4%B8%AA%E5%85%B7%E6%9C%89%E8%AF%A5%E6%A0%87%E8%AF%86%E7%AC%A6%E7%9A%84%E6%A8%A1%E5%BC%8F%E5%B7%B2%E7%BB%8F%E6%8F%90%E4%BE%9B%E7%BB%99%E5%AE%9E%E7%8E%B0%EF%BC%8C%E5%AE%83%E4%B9%9F%E5%8F%AF%E4%BB%A5%E8%87%AA%E5%8A%A8%E4%BD%BF%E7%94%A8%E3%80%82%E5%BD%93%E5%BC%95%E7%94%A8%E7%9A%84%E6%A8%A1%E5%BC%8F%E6%9C%AA%E7%9F%A5%E6%97%B6%EF%BC%8C%E5%AE%9E%E7%8E%B0%E5%BA%94%E8%AF%A5%E6%80%8E%E4%B9%88%E5%81%9A%EF%BC%9F%E6%98%AF%E5%90%A6%E6%9C%89%E5%85%81%E8%AE%B8%E8%87%AA%E5%8A%A8%E7%BD%91%E7%BB%9C%E5%8F%96%E6%B6%88%E5%BC%95%E7%94%A8%E7%9A%84%E6%83%85%E5%86%B5%EF%BC%9F%E7%9B%B8%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5%EF%BC%9F%E7%94%A8%E6%88%B7%E5%8F%AF%E9%85%8D%E7%BD%AE%E9%80%89%E9%A1%B9%EF%BC%9F%E5%9C%A8%E8%B6%85%E6%A8%A1%E5%BC%8F%E6%8F%8F%E8%BF%B0%E7%9A%84%E4%B8%8D%E6%96%AD%E5%8F%91%E5%B1%95%E7%9A%84"},"https://example.net/other.json\uff0c\u8fd9\u5728\u672c\u6587\u6863\u4e2d\u672a\u5b9a\u4e49\u3002\u5982\u679c\u4e00\u4e2a\u5177\u6709\u8be5\u6807\u8bc6\u7b26\u7684\u6a21\u5f0f\u5df2\u7ecf\u63d0\u4f9b\u7ed9\u5b9e\u73b0\uff0c\u5b83\u4e5f\u53ef\u4ee5\u81ea\u52a8\u4f7f\u7528\u3002\u5f53\u5f15\u7528\u7684\u6a21\u5f0f\u672a\u77e5\u65f6\uff0c\u5b9e\u73b0\u5e94\u8be5\u600e\u4e48\u505a\uff1f\u662f\u5426\u6709\u5141\u8bb8\u81ea\u52a8\u7f51\u7edc\u53d6\u6d88\u5f15\u7528\u7684\u60c5\u51b5\uff1f\u76f8\u540c\u6e90\u7b56\u7565\uff1f\u7528\u6237\u53ef\u914d\u7f6e\u9009\u9879\uff1f\u5728\u8d85\u6a21\u5f0f\u63cf\u8ff0\u7684\u4e0d\u65ad\u53d1\u5c55\u7684")," API \u7684\u60c5\u51b5\u4e0b\uff0c\u9884\u8ba1\u7cfb\u7edf\u4f1a\u52a8\u6001\u6dfb\u52a0\u65b0\u7684\u6a21\u5f0f\uff0c\u56e0\u6b64\u8981\u6c42\u9884\u52a0\u8f7d\u6a21\u5f0f\u6587\u6863\u662f\u4e0d\u53ef\u884c\u7684\u3002"),(0,i.kt)("p",null,"\u5f53\u5f15\u7528\u7684\u6a21\u5f0f\u672a\u77e5\u65f6\uff0c\u5b9e\u73b0\u5e94\u8be5\u6839\u636e\u9700\u8981\u51b3\u5b9a\u662f\u5426\u4e0b\u8f7d\u6a21\u5f0f\u3002\u4f8b\u5982\uff0c\u5b83\u4eec\u53ef\u4ee5\u9009\u62e9\u9075\u5faa\u540c\u6e90\u7b56\u7565\uff0c\u6216\u8005\u5141\u8bb8\u7528\u6237\u914d\u7f6e\u9009\u9879\u4ee5\u542f\u7528\u6216\u7981\u7528\u7f51\u7edc\u53d6\u6d88\u5f15\u7528\u3002\u5728\u8d85\u6a21\u5f0f\u63cf\u8ff0\u7684\u4e0d\u65ad\u53d1\u5c55\u7684 API \u7684\u60c5\u51b5\u4e0b\uff0c\u9884\u8ba1\u7cfb\u7edf\u4f1a\u52a8\u6001\u6dfb\u52a0\u65b0\u7684\u6a21\u5f0f\uff0c\u56e0\u6b64\u8981\u6c42\u9884\u52a0\u8f7d\u6a21\u5f0f\u6587\u6863\u662f\u4e0d\u53ef\u884c\u7684\u3002"),(0,i.kt)("h4",{id:"921-json-\u6307\u9488\u7247\u6bb5\u548c\u5d4c\u5165\u5f0f\u6a21\u5f0f\u8d44\u6e90json-pointer-fragments-and-embedded-schema-resources"},"9.2.1. JSON \u6307\u9488\u7247\u6bb5\u548c\u5d4c\u5165\u5f0f\u6a21\u5f0f\u8d44\u6e90\uff08JSON Pointer fragments and embedded schema resources\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"Since JSON Pointer URI fragments are constructed based on the structure of the schema document, an embedded schema resource and its subschemas can be identified by JSON Pointer fragments relative to either its own canonical URI, or relative to any containing resource's URI."),(0,i.kt)("p",null,"Conceptually, a set of linked schema resources should behave identically whether each resource is a separate document connected with schema references (Section 8.2.3), or is structured as a single document with one or more schema resources embedded as subschemas."),(0,i.kt)("p",null,"Since URIs involving JSON Pointer fragments relative to the parent schema resource's URI cease to be valid when the embedded schema is moved to a separate document and referenced, applications and schemas SHOULD NOT use such URIs to identify embedded schema resources or locations within them."),(0,i.kt)("p",null,"Consider the following schema document that contains another schema resource embedded within it:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "$id": "https://example.com/foo",\n    "items": {\n        "$id": "https://example.com/bar",\n        "additionalProperties": { }\n    }\n}\n')),(0,i.kt)("p",null,'The URI "',(0,i.kt)("a",{parentName:"p",href:"https://example.com/foo#/items%22"},'https://example.com/foo#/items"'),' points to the "items" schema, which is an embedded resource. The canonical URI of that schema resource, however, is "',(0,i.kt)("a",{parentName:"p",href:"https://example.com/bar%22"},'https://example.com/bar"'),"."),(0,i.kt)("p",null,'For the "additionalProperties" schema within that embedded resource, the URI "',(0,i.kt)("a",{parentName:"p",href:"https://example.com/foo#/items/additionalProperties%22"},'https://example.com/foo#/items/additionalProperties"')," points to the correct object, but that object's URI relative to its resource's canonical URI is \"",(0,i.kt)("a",{parentName:"p",href:"https://example.com/bar#/additionalProperties%22"},'https://example.com/bar#/additionalProperties"'),"."),(0,i.kt)("p",null,'Now consider the following two schema resources linked by reference using a URI value for "$ref":'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "$id": "https://example.com/foo",\n    "items": {\n        "$ref": "bar"\n    }\n}\n\n{\n    "$id": "https://example.com/bar",\n    "additionalProperties": { }\n}\n')),(0,i.kt)("p",null,'Here we see that "',(0,i.kt)("a",{parentName:"p",href:"https://example.com/bar#/additionalProperties%22"},'https://example.com/bar#/additionalProperties"'),', using a JSON Pointer fragment appended to the canonical URI of the "bar" schema resource, is still valid, while "',(0,i.kt)("a",{parentName:"p",href:"https://example.com/foo#/items/additionalProperties%22"},'https://example.com/foo#/items/additionalProperties"'),', which relied on a JSON Pointer fragment appended to the canonical URI of the "foo" schema resource, no longer resolves to anything.'),(0,i.kt)("p",null,'Note also that "',(0,i.kt)("a",{parentName:"p",href:"https://example.com/foo#/items%22"},'https://example.com/foo#/items"'),' is valid in both arrangements, but resolves to a different value. This URI ends up functioning similarly to a retrieval URI for a resource. While this URI is valid, it is more robust to use the "$id" of the embedded or referenced resource unless it is specifically desired to identify the object containing the "$ref" in the second (non-embedded) arrangement.'),(0,i.kt)("p",null,'An implementation MAY choose not to support addressing schema resource contents by URIs using a base other than the resource\'s canonical URI, plus a JSON Pointer fragment relative to that base. Therefore, schema authors SHOULD NOT rely on such URIs, as using them may reduce interoperability. This is to avoid requiring implementations to keep track of a whole stack of possible base URIs and JSON Pointer fragments for each, given that all but one will be fragile if the schema resources are reorganized. Some have argued that this is easy so there is no point in forbidding it, while others have argued that it complicates schema identification and should be forbidden. Feedback on this topic is encouraged. After some discussion, we feel that we need to remove the use of "canonical" in favour of talking about JSON Pointers which reference across schema resource boundaries as undefined or even forbidden behavior (',(0,i.kt)("a",{parentName:"p",href:"https://github.com/json-schema-org/json-schema-spec/issues/937"},"https://github.com/json-schema-org/json-schema-spec/issues/937"),", ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/json-schema-org/json-schema-spec/issues/1183"},"https://github.com/json-schema-org/json-schema-spec/issues/1183"),")"),(0,i.kt)("p",null,"Further examples of such non-canonical URI construction, as well as the appropriate canonical URI-based fragments to use instead, are provided in appendix A.")),(0,i.kt)("p",null,"\u7531\u4e8e JSON \u6307\u9488 URI \u7247\u6bb5\u662f\u57fa\u4e8e\u6a21\u5f0f\u6587\u6863\u7684\u7ed3\u6784\u6784\u5efa\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u901a\u8fc7\u76f8\u5bf9\u4e8e\u5176\u81ea\u8eab\u89c4\u8303 URI \u6216\u76f8\u5bf9\u4e8e\u4efb\u4f55\u5305\u542b\u8d44\u6e90 URI \u7684 JSON \u6307\u9488\u7247\u6bb5\u6765\u6807\u8bc6\u5d4c\u5165\u5f0f\u6a21\u5f0f\u8d44\u6e90\u53ca\u5176\u5b50\u6a21\u5f0f\u3002"),(0,i.kt)("p",null,"\u4ece\u6982\u5ff5\u4e0a\u8bb2\uff0c\u4e00\u7ec4\u94fe\u63a5\u7684\u6a21\u5f0f\u8d44\u6e90\u5728\u6bcf\u4e2a\u8d44\u6e90\u662f\u7528\u6a21\u5f0f\u5f15\u7528\uff08\u7b2c 8.2.3 \u8282\uff09\u8fde\u63a5\u7684\u5355\u72ec\u6587\u6863\u6216\u4f5c\u4e3a\u4e00\u4e2a\u6216\u591a\u4e2a\u6a21\u5f0f\u8d44\u6e90\u5d4c\u5165\u4e3a\u5b50\u6a21\u5f0f\u7684\u5355\u4e2a\u6587\u6863\u7684\u7ed3\u6784\u4e0b\uff0c\u5b83\u4eec\u7684\u884c\u4e3a\u5e94\u8be5\u662f\u76f8\u540c\u7684\u3002"),(0,i.kt)("p",null,"\u7531\u4e8e\u6d89\u53ca\u76f8\u5bf9\u4e8e\u7236\u6a21\u5f0f\u8d44\u6e90 URI \u7684 JSON \u6307\u9488\u7247\u6bb5\u7684 URI \u5728\u5d4c\u5165\u5f0f\u6a21\u5f0f\u88ab\u79fb\u52a8\u5230\u5355\u72ec\u7684\u6587\u6863\u5e76\u5f15\u7528\u65f6\u4e0d\u518d\u6709\u6548\uff0c\u56e0\u6b64\u5e94\u7528\u7a0b\u5e8f\u548c\u6a21\u5f0f\u4e0d\u5e94\uff08SHOULD NOT\uff09\u4f7f\u7528\u6b64\u7c7b URI \u6765\u6807\u8bc6\u5d4c\u5165\u5f0f\u6a21\u5f0f\u8d44\u6e90\u6216\u5176\u4e2d\u7684\u4f4d\u7f6e\u3002"),(0,i.kt)("p",null,"\u8003\u8651\u4ee5\u4e0b\u5305\u542b\u53e6\u4e00\u4e2a\u5d4c\u5165\u5f0f\u6a21\u5f0f\u8d44\u6e90\u7684\u6a21\u5f0f\u6587\u6863\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "$id": "https://example.com/foo",\n    "items": {\n        "$id": "https://example.com/bar",\n        "additionalProperties": { }\n    }\n}\n')),(0,i.kt)("p",null,'URI "',(0,i.kt)("a",{parentName:"p",href:"https://example.com/foo#/items%22"},'https://example.com/foo#/items"'),' \u6307\u5411 "items" \u6a21\u5f0f\uff0c\u5b83\u662f\u4e00\u4e2a\u5d4c\u5165\u5f0f\u8d44\u6e90\u3002\u7136\u800c\uff0c\u8be5\u6a21\u5f0f\u8d44\u6e90\u7684\u89c4\u8303 URI \u662f "',(0,i.kt)("a",{parentName:"p",href:"https://example.com/bar%22%E3%80%82"},'https://example.com/bar"\u3002')),(0,i.kt)("p",null,'\u5bf9\u4e8e\u5d4c\u5165\u5f0f\u8d44\u6e90\u4e2d\u7684 "additionalProperties" \u6a21\u5f0f\uff0cURI "',(0,i.kt)("a",{parentName:"p",href:"https://example.com/foo#/items/additionalProperties%22"},'https://example.com/foo#/items/additionalProperties"'),' \u6307\u5411\u6b63\u786e\u7684\u5bf9\u8c61\uff0c\u4f46\u76f8\u5bf9\u4e8e\u8d44\u6e90\u89c4\u8303 URI \u7684\u5bf9\u8c61 URI \u662f "',(0,i.kt)("a",{parentName:"p",href:"https://example.com/bar#/additionalProperties%22%E3%80%82"},'https://example.com/bar#/additionalProperties"\u3002')),(0,i.kt)("p",null,"\u73b0\u5728\u8003\u8651\u4ee5\u4e0b\u4e24\u4e2a\u6a21\u5f0f\u8d44\u6e90\uff0c\u5b83\u4eec\u901a\u8fc7\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"$ref")," \u7684 URI \u503c\u8fdb\u884c\u5f15\u7528\u94fe\u63a5\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "$id": "https://example.com/foo",\n    "items": {\n        "$ref": "bar"\n    }\n}\n\n{\n    "$id": "https://example.com/bar",\n    "additionalProperties": { }\n}\n')),(0,i.kt)("p",null,'\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u770b\u5230 "',(0,i.kt)("a",{parentName:"p",href:"https://example.com/bar#/additionalProperties%22%EF%BC%8C%E4%BD%BF%E7%94%A8%E9%99%84%E5%8A%A0%E5%88%B0"},'https://example.com/bar#/additionalProperties"\uff0c\u4f7f\u7528\u9644\u52a0\u5230'),' "bar" \u6a21\u5f0f\u8d44\u6e90\u7684\u89c4\u8303 URI \u7684 JSON \u6307\u9488\u7247\u6bb5\u4ecd\u7136\u6709\u6548\uff0c\u800c "',(0,i.kt)("a",{parentName:"p",href:"https://example.com/foo#/items/additionalProperties%22%EF%BC%8C%E5%AE%83%E4%BE%9D%E8%B5%96%E4%BA%8E%E9%99%84%E5%8A%A0%E5%88%B0"},'https://example.com/foo#/items/additionalProperties"\uff0c\u5b83\u4f9d\u8d56\u4e8e\u9644\u52a0\u5230'),' "foo" \u6a21\u5f0f\u8d44\u6e90\u7684\u89c4\u8303 URI \u7684 JSON \u6307\u9488\u7247\u6bb5\uff0c\u4e0d\u518d\u89e3\u6790\u4e3a\u4efb\u4f55\u5185\u5bb9\u3002'),(0,i.kt)("p",null,'\u8fd8\u8981\u6ce8\u610f\uff0c"',(0,i.kt)("a",{parentName:"p",href:"https://example.com/foo#/items%22"},'https://example.com/foo#/items"')," \u5728\u4e24\u79cd\u5b89\u6392\u4e2d\u90fd\u6709\u6548\uff0c\u4f46\u89e3\u6790\u4e3a\u4e0d\u540c\u7684\u503c\u3002\u8fd9\u4e2a URI \u6700\u7ec8\u7c7b\u4f3c\u4e8e\u7528\u4e8e\u68c0\u7d22\u8d44\u6e90\u7684 URI\u3002\u867d\u7136\u8fd9\u4e2a URI \u6709\u6548\uff0c\u4f46\u5728\u7b2c\u4e8c\u79cd\uff08\u975e\u5d4c\u5165\u5f0f\uff09\u5b89\u6392\u4e2d\uff0c\u9664\u975e\u7279\u522b\u9700\u8981\u6807\u8bc6\u5305\u542b ",(0,i.kt)("inlineCode",{parentName:"p"},"$ref")," \u7684\u5bf9\u8c61\uff0c\u5426\u5219\u4f7f\u7528\u5d4c\u5165\u5f0f\u6216\u5f15\u7528\u8d44\u6e90\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"$id")," \u66f4\u4e3a\u7a33\u5065\u3002"),(0,i.kt)("p",null,"\u5b9e\u73b0\u53ef\u4ee5\u9009\u62e9\u4e0d\u652f\u6301\u4f7f\u7528\u9664\u8d44\u6e90\u89c4\u8303 URI \u4e4b\u5916\u7684\u57fa\u7840\u4ee5\u53ca\u76f8\u5bf9\u4e8e\u8be5\u57fa\u7840\u7684 JSON \u6307\u9488\u7247\u6bb5\u6765\u89e3\u6790\u6a21\u5f0f\u8d44\u6e90\u5185\u5bb9\u7684 URI\u3002\u56e0\u6b64\uff0c\u6a21\u5f0f\u4f5c\u8005\u4e0d\u5e94\u4f9d\u8d56\u8fd9\u6837\u7684 URI\uff0c\u56e0\u4e3a\u4f7f\u7528\u5b83\u4eec\u53ef\u80fd\u4f1a\u964d\u4f4e\u4e92\u64cd\u4f5c\u6027\u3002\u8fd9\u662f\u4e3a\u4e86\u907f\u514d\u8981\u6c42\u5b9e\u73b0\u8ddf\u8e2a\u6bcf\u4e2a\u53ef\u80fd\u7684\u57fa\u672c URI \u548c\u6bcf\u4e2a JSON \u6307\u9488\u7247\u6bb5\u7684\u6574\u4e2a\u5806\u6808\uff0c\u56e0\u4e3a\u5728\u6a21\u5f0f\u8d44\u6e90\u91cd\u65b0\u7ec4\u7ec7\u65f6\uff0c\u9664\u4e86\u4e00\u4e2a\u4e4b\u5916\u7684\u6240\u6709\u5185\u5bb9\u90fd\u4f1a\u53d8\u5f97\u8106\u5f31\u3002\u6709\u4e9b\u4eba\u8ba4\u4e3a\u8fd9\u5f88\u5bb9\u6613\uff0c\u6240\u4ee5\u6ca1\u6709\u7981\u6b62\u7684\u5fc5\u8981\uff0c\u800c\u53e6\u4e00\u4e9b\u4eba\u5219\u8ba4\u4e3a\u8fd9\u4f7f\u6a21\u5f0f\u8bc6\u522b\u53d8\u5f97\u590d\u6742\uff0c\u5e94\u8be5\u88ab\u7981\u6b62\u3002\u9f13\u52b1\u5bf9\u8fd9\u4e2a\u4e3b\u9898\u63d0\u4f9b\u53cd\u9988\u3002\u7ecf\u8fc7\u4e00\u4e9b\u8ba8\u8bba\uff0c\u6211\u4eec\u8ba4\u4e3a\u9700\u8981\u53d6\u6d88\u4f7f\u7528\u201c\u89c4\u8303\u201d\u8fd9\u4e2a\u8bcd\uff0c\u800c\u662f\u8c08\u8bba\u8de8\u6a21\u5f0f\u8d44\u6e90\u8fb9\u754c\u5f15\u7528\u7684 JSON \u6307\u9488\uff0c\u5c06\u5176\u89c6\u4e3a\u672a\u5b9a\u4e49\u751a\u81f3\u662f\u7981\u6b62\u7684\u884c\u4e3a\uff08",(0,i.kt)("a",{parentName:"p",href:"https://github.com/json-schema-org/json-schema-spec/issues/937"},"https://github.com/json-schema-org/json-schema-spec/issues/937"),", ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/json-schema-org/json-schema-spec/issues/1183%EF%BC%89"},"https://github.com/json-schema-org/json-schema-spec/issues/1183\uff09")),(0,i.kt)("p",null,"\u9644\u5f55 A \u63d0\u4f9b\u4e86\u6b64\u7c7b\u975e\u89c4\u8303 URI \u6784\u9020\u7684\u8fdb\u4e00\u6b65\u793a\u4f8b\uff0c\u4ee5\u53ca\u76f8\u5e94\u7684\u57fa\u4e8e\u89c4\u8303 URI \u7684\u7247\u6bb5\u66ff\u4ee3\u65b9\u6cd5\u3002"),(0,i.kt)("h3",{id:"93-\u590d\u5408\u6587\u6863compound-documents"},"9.3. \u590d\u5408\u6587\u6863\uff08Compound Documents\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'A Compound Schema Document is defined as a JSON document (sometimes called a "bundled" schema) which has multiple embedded JSON Schema Resources bundled into the same document to ease transportation.'),(0,i.kt)("p",null,"Each embedded Schema Resource MUST be treated as an individual Schema Resource, following standard schema loading and processing requirements, including determining vocabulary support.")),(0,i.kt)("p",null,"\u590d\u5408\u6a21\u5f0f\u6587\u6863\u5b9a\u4e49\u4e3a\u4e00\u4e2a JSON \u6587\u6863\uff08\u6709\u65f6\u79f0\u4e3a\u201c\u6346\u7ed1\u201d\u6a21\u5f0f\uff09\uff0c\u5176\u4e2d\u5305\u542b\u591a\u4e2a\u5d4c\u5165\u5f0f JSON Schema \u8d44\u6e90\uff0c\u6346\u7ed1\u5230\u540c\u4e00\u6587\u6863\u4e2d\u4ee5\u65b9\u4fbf\u4f20\u8f93\u3002"),(0,i.kt)("p",null,"\u6bcf\u4e2a\u5d4c\u5165\u5f0f\u6a21\u5f0f\u8d44\u6e90\u5fc5\u987b\u4f5c\u4e3a\u5355\u72ec\u7684\u6a21\u5f0f\u8d44\u6e90\u8fdb\u884c\u5904\u7406\uff0c\u9075\u5faa\u6807\u51c6\u6a21\u5f0f\u52a0\u8f7d\u548c\u5904\u7406\u8981\u6c42\uff0c\u5305\u62ec\u786e\u5b9a\u8bcd\u6c47\u8868\u652f\u6301\u3002"),(0,i.kt)("h4",{id:"931-\u6253\u5305bundling"},"9.3.1. \u6253\u5305\uff08Bundling\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'The bundling process for creating a Compound Schema Document is defined as taking references (such as "$ref") to an external Schema Resource and embedding the referenced Schema Resources within the referring document. Bundling SHOULD be done in such a way that all URIs (used for referencing) in the base document and any referenced/embedded documents do not require altering.'),(0,i.kt)("p",null,'Each embedded JSON Schema Resource MUST identify itself with a URI using the "$id" keyword, and SHOULD make use of the "$schema" keyword to identify the dialect it is using, in the root of the schema resource. It is RECOMMENDED that the URI identifier value of "$id" be an Absolute URI.'),(0,i.kt)("p",null,'When the Schema Resource referenced by a by-reference applicator is bundled, it is RECOMMENDED that the Schema Resource be located as a value of a "$defs" object at the containing schema\'s root. The key of the "$defs" for the now embedded Schema Resource MAY be the "$id" of the bundled schema or some other form of application defined unique identifer (such as a UUID). This key is not intended to be referenced in JSON Schema, but may be used by an application to aid the bundling process.'),(0,i.kt)("p",null,'A Schema Resource MAY be embedded in a location other than "$defs" where the location is defined as a schema value.'),(0,i.kt)("p",null,"A Bundled Schema Resource MUST NOT be bundled by replacing the schema object from which it was referenced, or by wrapping the Schema Resource in other applicator keywords."),(0,i.kt)("p",null,'In order to produce identical output, references in the containing schema document to the previously external Schema Resources MUST NOT be changed, and now resolve to a schema using the "$id" of an embedded Schema Resource. Such identical output includes validation evaluation and URIs or paths used in resulting annotations or errors.'),(0,i.kt)("p",null,"While the bundling process will often be the main method for creating a Compound Schema Document, it is also possible and expected that some will be created by hand, potentially without individual Schema Resources existing on their own previously.")),(0,i.kt)("p",null,"\u521b\u5efa\u590d\u5408\u6a21\u5f0f\u6587\u6863\u7684\u6253\u5305\u8fc7\u7a0b\u5b9a\u4e49\u4e3a\u83b7\u53d6\u5bf9\u5916\u90e8\u6a21\u5f0f\u8d44\u6e90\u7684\u5f15\u7528\uff08\u5982 ",(0,i.kt)("inlineCode",{parentName:"p"},"$ref"),"\uff09\uff0c\u5e76\u5c06\u5f15\u7528\u7684\u6a21\u5f0f\u8d44\u6e90\u5d4c\u5165\u5230\u5f15\u7528\u6587\u6863\u4e2d\u3002\u6253\u5305\u5e94\u8be5\uff08SHOULD\uff09\u4ee5\u8fd9\u6837\u7684\u65b9\u5f0f\u8fdb\u884c\uff0c\u4ee5\u4fbf\u57fa\u672c\u6587\u6863\u548c\u4efb\u4f55\u5f15\u7528/\u5d4c\u5165\u6587\u6863\u4e2d\u7684\u6240\u6709 URI\uff08\u7528\u4e8e\u5f15\u7528\uff09\u4e0d\u9700\u8981\u66f4\u6539\u3002"),(0,i.kt)("p",null,"\u6bcf\u4e2a\u5d4c\u5165\u5f0f JSON Schema \u8d44\u6e90\u90fd\u5fc5\u987b\uff08MUST\uff09\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"$id")," \u5173\u952e\u5b57\u4ee5 URI \u6807\u8bc6\u81ea\u5df1\uff0c\u5e76\u4e14\u5e94\uff08SHOULD\uff09\u5728\u6a21\u5f0f\u8d44\u6e90\u7684\u6839\u90e8\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"$schema")," \u5173\u952e\u5b57\u6765\u6807\u8bc6\u6240\u4f7f\u7528\u7684\u65b9\u8a00\u3002\u5efa\u8bae\uff08RECOMMENDED\uff09 ",(0,i.kt)("inlineCode",{parentName:"p"},"$id")," \u7684 URI \u6807\u8bc6\u7b26\u503c\u4e3a\u7edd\u5bf9 URI\u3002"),(0,i.kt)("p",null,"\u5f53\u901a\u8fc7\u5f15\u7528\u5e94\u7528\u5668\u5f15\u7528\u7684\u6a21\u5f0f\u8d44\u6e90\u88ab\u6346\u7ed1\u65f6\uff0c\u5efa\u8bae\uff08RECOMMENDED\uff09\u5c06\u6a21\u5f0f\u8d44\u6e90\u4f5c\u4e3a\u5305\u542b\u6a21\u5f0f\u6839\u76ee\u5f55\u4e0b ",(0,i.kt)("inlineCode",{parentName:"p"},"$defs")," \u5bf9\u8c61\u7684\u503c\u3002\u73b0\u5728\u5d4c\u5165\u5f0f\u6a21\u5f0f\u8d44\u6e90\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"$defs")," \u952e\u53ef\u4ee5\uff08MAY\uff09\u662f\u6346\u7ed1\u6a21\u5f0f\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"$id"),"\uff0c\u4e5f\u53ef\u4ee5\u662f\u5176\u5b83\u5f62\u5f0f\u7684\u5e94\u7528\u7a0b\u5e8f\u5b9a\u4e49\u7684\u552f\u4e00\u6807\u8bc6\u7b26\uff08\u5982 UUID\uff09\u3002\u6b64\u952e\u4e0d\u6253\u7b97\u5728 JSON Schema \u4e2d\u5f15\u7528\uff0c\u4f46\u53ef\u4ee5\u7531\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\uff0c\u4ee5\u5e2e\u52a9\u6253\u5305\u8fc7\u7a0b\u3002"),(0,i.kt)("p",null,"\u6a21\u5f0f\u8d44\u6e90\u53ef\u4ee5\uff08MAY\uff09\u5d4c\u5165\u5728\u9664 ",(0,i.kt)("inlineCode",{parentName:"p"},"$defs")," \u4e4b\u5916\u7684\u5176\u5b83\u4f4d\u7f6e\uff0c\u5176\u4e2d\u8be5\u4f4d\u7f6e\u5b9a\u4e49\u4e3a\u6a21\u5f0f\u503c\u3002"),(0,i.kt)("p",null,"\u6346\u7ed1\u7684\u6a21\u5f0f\u8d44\u6e90\u4e0d\u5f97\uff08MUST NOT\uff09\u901a\u8fc7\u66ff\u6362\u4ece\u4e2d\u5f15\u7528\u7684\u6a21\u5f0f\u5bf9\u8c61\u6216\u5c06\u6a21\u5f0f\u8d44\u6e90\u5305\u88c5\u5728\u5176\u5b83\u5e94\u7528\u7a0b\u5e8f\u5173\u952e\u5b57\u4e2d\u6765\u6346\u7ed1\u3002"),(0,i.kt)("p",null,"\u4e3a\u4e86\u4ea7\u751f\u76f8\u540c\u7684\u8f93\u51fa\uff0c\u5305\u542b\u6a21\u5f0f\u6587\u6863\u4e2d\u5bf9\u5148\u524d\u5916\u90e8\u6a21\u5f0f\u8d44\u6e90\u7684\u5f15\u7528\u4e0d\u5f97\uff08MUST NOT\uff09\u66f4\u6539\uff0c\u73b0\u5728\u4f7f\u7528\u5d4c\u5165\u5f0f\u6a21\u5f0f\u8d44\u6e90\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"$id")," \u89e3\u6790\u4e3a\u6a21\u5f0f\u3002\u8fd9\u79cd\u76f8\u540c\u7684\u8f93\u51fa\u5305\u62ec\u9a8c\u8bc1\u8bc4\u4f30\u4ee5\u53ca\u7528\u4e8e\u7ed3\u679c\u6ce8\u91ca\u6216\u9519\u8bef\u7684 URI \u6216\u8def\u5f84\u3002"),(0,i.kt)("p",null,"\u5c3d\u7ba1\u6253\u5305\u8fc7\u7a0b\u901a\u5e38\u662f\u521b\u5efa\u590d\u5408\u6a21\u5f0f\u6587\u6863\u7684\u4e3b\u8981\u65b9\u6cd5\uff0c\u4f46\u9884\u8ba1\u8fd8\u6709\u4e00\u4e9b\u5c06\u901a\u8fc7\u624b\u5de5\u521b\u5efa\uff0c\u53ef\u80fd\u5728\u6b64\u4e4b\u524d\u6ca1\u6709\u5355\u72ec\u7684\u6a21\u5f0f\u8d44\u6e90\u5b58\u5728\u3002"),(0,i.kt)("h4",{id:"932-\u4e0d\u540c\u548c\u9ed8\u8ba4\u65b9\u8a00differing-and-default-dialects"},"9.3.2. \u4e0d\u540c\u548c\u9ed8\u8ba4\u65b9\u8a00\uff08Differing and Default Dialects\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"When multiple schema resources are present in a single document, schema resources which do not define with which dialect they should be processed MUST be processed with the same dialect as the enclosing resource."),(0,i.kt)("p",null,'Since any schema that can be referenced can also be embedded, embedded schema resources MAY specify different processing dialects using the "$schema" values from their enclosing resource.')),(0,i.kt)("p",null,"\u5f53\u4e00\u4e2a\u6587\u6863\u4e2d\u5b58\u5728\u591a\u4e2a\u6a21\u5f0f\u8d44\u6e90\u65f6\uff0c\u6ca1\u6709\u5b9a\u4e49\u5e94\u8be5\u7528\u54ea\u79cd\u65b9\u8a00\u5904\u7406\u7684\u6a21\u5f0f\u8d44\u6e90\u5fc5\u987b\uff08MUST\uff09\u4e0e\u5305\u542b\u5b83\u4eec\u7684\u8d44\u6e90\u4f7f\u7528\u76f8\u540c\u7684\u65b9\u8a00\u8fdb\u884c\u5904\u7406\u3002"),(0,i.kt)("p",null,"\u7531\u4e8e\u4efb\u4f55\u53ef\u4ee5\u88ab\u5f15\u7528\u7684\u6a21\u5f0f\u4e5f\u53ef\u4ee5\u88ab\u5d4c\u5165\uff0c\u5d4c\u5165\u5f0f\u6a21\u5f0f\u8d44\u6e90\u53ef\u4ee5\uff08MAY\uff09\u4f7f\u7528\u6765\u81ea\u5176\u5305\u542b\u8d44\u6e90\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"$schema")," \u503c\u6307\u5b9a\u4e0d\u540c\u7684\u5904\u7406\u65b9\u8a00\u3002"),(0,i.kt)("h4",{id:"933-\u9a8c\u8bc1validating"},"9.3.3. \u9a8c\u8bc1\uff08Validating\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"Given that a Compound Schema Document may have embedded resources which identify as using different dialects, these documents SHOULD NOT be validated by applying a meta-schema to the Compound Schema Document as an instance. It is RECOMMENDED that an alternate validation process be provided in order to validate Schema Documents. Each Schema Resource SHOULD be separately validated against its associated meta-schema. If you know a schema is what's being validated, you can identify if the schemas is a Compound Schema Document or not, by way of use of \"$id\", which identifies an embedded resource when used not at the document's root."),(0,i.kt)("p",null,'A Compound Schema Document in which all embedded resources identify as using the same dialect, or in which "$schema" is omitted and therefore defaults to that of the enclosing resource, MAY be validated by applying the appropriate meta-schema.')),(0,i.kt)("p",null,"\u9274\u4e8e\u590d\u5408\u6a21\u5f0f\u6587\u6863\u53ef\u80fd\u5177\u6709\u4f7f\u7528\u4e0d\u540c\u65b9\u8a00\u7684\u5d4c\u5165\u5f0f\u8d44\u6e90\uff0c\u8fd9\u4e9b\u6587\u6863\u4e0d\u5e94\uff08SHOULD NOT\uff09\u901a\u8fc7\u5c06\u5143\u6a21\u5f0f\u5e94\u7528\u4e8e\u590d\u5408\u6a21\u5f0f\u6587\u6863\u5b9e\u4f8b\u6765\u8fdb\u884c\u9a8c\u8bc1\u3002\u5efa\u8bae\uff08RECOMMENDED\uff09\u63d0\u4f9b\u53e6\u4e00\u79cd\u9a8c\u8bc1\u8fc7\u7a0b\u6765\u9a8c\u8bc1\u6a21\u5f0f\u6587\u6863\u3002\u6bcf\u4e2a\u6a21\u5f0f\u8d44\u6e90\u5e94\uff08SHOULD\uff09\u5206\u522b\u9488\u5bf9\u5176\u5173\u8054\u7684\u5143\u6a21\u5f0f\u8fdb\u884c\u9a8c\u8bc1\u3002\u5982\u679c\u4f60\u77e5\u9053\u6b63\u5728\u9a8c\u8bc1\u7684\u6a21\u5f0f\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"$id")," \u6765\u786e\u5b9a\u6a21\u5f0f\u662f\u5426\u4e3a\u590d\u5408\u6a21\u5f0f\u6587\u6863\uff0c",(0,i.kt)("inlineCode",{parentName:"p"},"$id")," \u5728\u6587\u6863\u6839\u4ee5\u5916\u7684\u5730\u65b9\u4f7f\u7528\u65f6\uff0c\u7528\u4e8e\u6807\u8bc6\u5d4c\u5165\u5f0f\u8d44\u6e90\u3002"),(0,i.kt)("p",null,"\u6240\u6709\u5d4c\u5165\u5f0f\u8d44\u6e90\u90fd\u4f7f\u7528\u76f8\u540c\u65b9\u8a00\u7684\u590d\u5408\u6a21\u5f0f\u6587\u6863\uff0c\u6216\u8005\u7701\u7565\u4e86 ",(0,i.kt)("inlineCode",{parentName:"p"},"$schema"),"\uff0c\u56e0\u6b64\u9ed8\u8ba4\u4e3a\u5305\u542b\u8d44\u6e90\u7684\u65b9\u8a00\uff0c\u53ef\u4ee5\uff08MAY\uff09\u901a\u8fc7\u5e94\u7528\u76f8\u5e94\u7684\u5143\u6a21\u5f0f\u8fdb\u884c\u9a8c\u8bc1\u3002"),(0,i.kt)("h3",{id:"94-\u6ce8\u610f\u4e8b\u9879caveats"},"9.4. \u6ce8\u610f\u4e8b\u9879\uff08Caveats\uff09"),(0,i.kt)("h4",{id:"941-\u9632\u6b62\u65e0\u9650\u9012\u5f52guarding-against-infinite-recursion"},"9.4.1. \u9632\u6b62\u65e0\u9650\u9012\u5f52\uff08Guarding Against Infinite Recursion\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'A schema MUST NOT be run into an infinite loop against an instance. For example, if two schemas "#alice" and "#bob" both have an "allOf" property that refers to the other, a naive validator might get stuck in an infinite recursive loop trying to validate the instance. Schemas SHOULD NOT make use of infinite recursive nesting like this; the behavior is undefined.')),(0,i.kt)("p",null,"\u6a21\u5f0f\u4e0d\u80fd\uff08MUST NOT\uff09\u5728\u5b9e\u4f8b\u4e2d\u9677\u5165\u65e0\u9650\u5faa\u73af\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4e24\u4e2a\u6a21\u5f0f ",(0,i.kt)("inlineCode",{parentName:"p"},"#alice")," \u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"#bob")," \u90fd\u5177\u6709\u6307\u5411\u5bf9\u65b9\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"allOf")," \u5c5e\u6027\uff0c\u4e00\u4e2a\u7b80\u5355\u7684\u9a8c\u8bc1\u5668\u53ef\u80fd\u4f1a\u9677\u5165\u65e0\u9650\u9012\u5f52\u5faa\u73af\uff0c\u8bd5\u56fe\u9a8c\u8bc1\u5b9e\u4f8b\u3002\u6a21\u5f0f\u4e0d\u5e94\uff08SHOULD NOT\uff09\u4f7f\u7528\u8fd9\u79cd\u65e0\u9650\u9012\u5f52\u5d4c\u5957\uff1b\u8fd9\u79cd\u884c\u4e3a\u662f\u672a\u5b9a\u4e49\u7684\u3002"),(0,i.kt)("h4",{id:"942-\u53ef\u80fd\u975e\u6a21\u5f0f\u7684\u5f15\u7528references-to-possible-non-schemas"},"9.4.2. \u53ef\u80fd\u975e\u6a21\u5f0f\u7684\u5f15\u7528\uff08References to Possible Non-Schemas\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'Subschema objects (or booleans) are recognized by their use with known applicator keywords or with location-reserving keywords such as "$defs" (Section 8.2.4) that take one or more subschemas as a value. These keywords may be "$defs" and the standard applicators from this document, or extension keywords from a known vocabulary, or implementation-specific custom keywords.'),(0,i.kt)("p",null,'Multi-level structures of unknown keywords are capable of introducing nested subschemas, which would be subject to the processing rules for "$id". Therefore, having a reference target in such an unrecognized structure cannot be reliably implemented, and the resulting behavior is undefined. Similarly, a reference target under a known keyword, for which the value is known not to be a schema, results in undefined behavior in order to avoid burdening implementations with the need to detect such targets. These scenarios are analogous to fetching a schema over HTTP but receiving a response with a Content-Type other than application/schema+json. An implementation can certainly try to interpret it as a schema, but the origin server offered no guarantee that it actually is any such thing. Therefore, interpreting it as such has security implications and may produce unpredictable results.'),(0,i.kt)("p",null,'Note that single-level custom keywords with identical syntax and semantics to "$defs" do not allow for any intervening "$id" keywords, and therefore will behave correctly under implementations that attempt to use any reference target as a schema. However, this behavior is implementation-specific and MUST NOT be relied upon for interoperability.')),(0,i.kt)("p",null,"\u901a\u8fc7\u4f7f\u7528\u5df2\u77e5\u7684\u5e94\u7528\u5668\u5173\u952e\u5b57\u6216\u91c7\u7528\u4e00\u4e2a\u6216\u591a\u4e2a\u5b50\u6a21\u5f0f\u4f5c\u4e3a\u503c\u7684\u4f4d\u7f6e\u4fdd\u7559\u5173\u952e\u5b57\uff08\u5982 ",(0,i.kt)("inlineCode",{parentName:"p"},"$defs"),"\uff08\u7b2c8.2.4\u8282\uff09\uff09\u6765\u8bc6\u522b\u5b50\u6a21\u5f0f\u5bf9\u8c61\uff08\u6216\u5e03\u5c14\u503c\uff09\u3002\u8fd9\u4e9b\u5173\u952e\u5b57\u53ef\u80fd\u662f\u672c\u6587\u6863\u4e2d\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"$defs")," \u548c\u6807\u51c6\u5e94\u7528\u5668\uff0c\u6216\u5df2\u77e5\u8bcd\u6c47\u8868\u4e2d\u7684\u6269\u5c55\u5173\u952e\u5b57\uff0c\u6216\u7279\u5b9a\u4e8e\u5b9e\u73b0\u7684\u81ea\u5b9a\u4e49\u5173\u952e\u5b57\u3002"),(0,i.kt)("p",null,"\u672a\u77e5\u5173\u952e\u5b57\u7684\u591a\u7ea7\u7ed3\u6784\u80fd\u591f\u5f15\u5165\u5d4c\u5957\u5b50\u6a21\u5f0f\uff0c\u8fd9\u4e9b\u5b50\u6a21\u5f0f\u5c06\u53d7\u5230 ",(0,i.kt)("inlineCode",{parentName:"p"},"$id")," \u5904\u7406\u89c4\u5219\u7684\u7ea6\u675f\u3002\u56e0\u6b64\uff0c\u5728\u8fd9\u6837\u4e00\u4e2a\u65e0\u6cd5\u8bc6\u522b\u7684\u7ed3\u6784\u4e2d\u5177\u6709\u5f15\u7528\u76ee\u6807\u662f\u65e0\u6cd5\u53ef\u9760\u5b9e\u73b0\u7684\uff0c\u5176\u7ed3\u679c\u884c\u4e3a\u662f\u672a\u5b9a\u4e49\u7684\u3002\u7c7b\u4f3c\u5730\uff0c\u5728\u5df2\u77e5\u5173\u952e\u5b57\u4e0b\u7684\u5f15\u7528\u76ee\u6807\uff0c\u5df2\u77e5\u5176\u503c\u4e0d\u662f\u6a21\u5f0f\uff0c\u4f1a\u5bfc\u81f4\u672a\u5b9a\u4e49\u7684\u884c\u4e3a\uff0c\u4ee5\u907f\u514d\u5b9e\u73b0\u9700\u8981\u68c0\u6d4b\u8fd9\u6837\u7684\u76ee\u6807\u7684\u8d1f\u62c5\u3002\u8fd9\u4e9b\u573a\u666f\u7c7b\u4f3c\u4e8e\u901a\u8fc7 HTTP \u83b7\u53d6\u6a21\u5f0f\uff0c\u4f46\u63a5\u6536\u5230\u7684\u54cd\u5e94\u7684 Content-Type \u4e0d\u662f ",(0,i.kt)("inlineCode",{parentName:"p"},"application/schema+json"),"\u3002\u5b9e\u73b0\u5f53\u7136\u53ef\u4ee5\u5c1d\u8bd5\u5c06\u5176\u89e3\u91ca\u4e3a\u6a21\u5f0f\uff0c\u4f46\u539f\u59cb\u670d\u52a1\u5668\u5e76\u672a\u4fdd\u8bc1\u5b83\u5b9e\u9645\u4e0a\u5c31\u662f\u8fd9\u6837\u7684\u4e1c\u897f\u3002\u56e0\u6b64\uff0c\u5c06\u5176\u89e3\u91ca\u4e3a\u6b64\u7c7b\u5177\u6709\u5b89\u5168\u6027\u542b\u4e49\uff0c\u5e76\u53ef\u80fd\u4ea7\u751f\u4e0d\u53ef\u9884\u6d4b\u7684\u7ed3\u679c\u3002"),(0,i.kt)("p",null,"\u8bf7\u6ce8\u610f\uff0c\u5177\u6709\u4e0e ",(0,i.kt)("inlineCode",{parentName:"p"},"$defs")," \u76f8\u540c\u8bed\u6cd5\u548c\u8bed\u4e49\u7684\u5355\u7ea7\u81ea\u5b9a\u4e49\u5173\u952e\u5b57\u4e0d\u5141\u8bb8\u6709\u4efb\u4f55\u4ecb\u5165\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"$id")," \u5173\u952e\u5b57\uff0c\u56e0\u6b64\u5728\u5b9e\u73b0\u4e2d\u5c1d\u8bd5\u5c06\u4efb\u4f55\u5f15\u7528\u76ee\u6807\u7528\u4f5c\u6a21\u5f0f\u65f6\u5c06\u8868\u73b0\u6b63\u786e\u3002\u7136\u800c\uff0c\u8fd9\u79cd\u884c\u4e3a\u662f\u7279\u5b9a\u4e8e\u5b9e\u73b0\u7684\uff0c\u4e0d\u5f97\uff08MUST NOT\uff09\u4f9d\u8d56\u4e8e\u4e92\u64cd\u4f5c\u6027\u3002"),(0,i.kt)("h3",{id:"95-\u5173\u8054\u5b9e\u4f8b\u548c\u6a21\u5f0fassociating-instances-and-schemas"},"9.5. \u5173\u8054\u5b9e\u4f8b\u548c\u6a21\u5f0f\uff08Associating Instances and Schemas\uff09"),(0,i.kt)("h4",{id:"951-\u8d85\u5a92\u4f53\u4f7f\u7528usage-for-hypermedia"},"9.5.1. \u8d85\u5a92\u4f53\u4f7f\u7528\uff08Usage for Hypermedia\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"JSON has been adopted widely by HTTP servers for automated APIs and robots. This section describes how to enhance processing of JSON documents in a more RESTful manner when used with protocols that support media types and Web linking ","[RFC8288]",".")),(0,i.kt)("p",null,"JSON \u5df2\u7ecf\u88ab\u5e7f\u6cdb\u5e94\u7528\u4e8e HTTP \u670d\u52a1\u5668\uff0c\u7528\u4e8e\u81ea\u52a8\u5316 API \u548c\u673a\u5668\u4eba\u3002\u672c\u8282\u4ecb\u7ecd\u5982\u4f55\u5728\u652f\u6301\u5a92\u4f53\u7c7b\u578b\u548c Web \u94fe\u63a5 ","[RFC8288]"," \u7684\u534f\u8bae\u4e2d\u4f7f\u7528 JSON \u6587\u6863\u65f6\uff0c\u4ee5\u66f4\u7b26\u5408 REST \u98ce\u683c\u7684\u65b9\u5f0f\u589e\u5f3a\u5904\u7406\u3002"),(0,i.kt)("h5",{id:"9511-\u94fe\u63a5\u5230\u6a21\u5f0flinking-to-a-schema"},"9.5.1.1. \u94fe\u63a5\u5230\u6a21\u5f0f\uff08Linking to a Schema\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'It is RECOMMENDED that instances described by a schema provide a link to a downloadable JSON Schema using the link relation "describedby", as defined by Linked Data Protocol 1.0, section 8.1 ',(0,i.kt)("a",{parentName:"p",href:"https://www.w3.org/TR/2015/REC-ldp-20150226"},"W3C.REC-ldp-20150226"),"."),(0,i.kt)("p",null,"In HTTP, such links can be attached to any response using the Link header ","[RFC8288]",". An example of such a header would be:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},'Link: <https://example.com/my-hyper-schema>; rel="describedby"\n'))),(0,i.kt)("p",null,"\u5efa\u8bae\uff08RECOMMENDED\uff09\u7531\u6a21\u5f0f\u63cf\u8ff0\u7684\u5b9e\u4f8b\u63d0\u4f9b\u4e00\u4e2a\u94fe\u63a5\uff0c\u94fe\u63a5\u5230\u53ef\u4e0b\u8f7d\u7684 JSON \u6a21\u5f0f\uff0c\u4f7f\u7528\u94fe\u63a5\u5173\u7cfb ",(0,i.kt)("inlineCode",{parentName:"p"},'describedby"'),"\uff0c\u5982 Linked Data Protocol 1.0\u7684\u7b2c8.1\u8282 ",(0,i.kt)("a",{parentName:"p",href:"https://www.w3.org/TR/2015/REC-ldp-20150226"},"W3C.REC-ldp-20150226")," \u6240\u5b9a\u4e49\u3002"),(0,i.kt)("p",null,"\u5728 HTTP \u4e2d\uff0c\u8fd9\u6837\u7684\u94fe\u63a5\u53ef\u4ee5\u4f7f\u7528 Link \u5934 ","[RFC8288]"," \u9644\u52a0\u5230\u4efb\u4f55\u54cd\u5e94\u3002\u8fd9\u6837\u4e00\u4e2a\u5934\u7684\u793a\u4f8b\u662f\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},'Link: <https://example.com/my-hyper-schema>; rel="describedby"\n')),(0,i.kt)("h5",{id:"9512-http\u4f7f\u7528usage-over-http"},"9.5.1.2. HTTP\u4f7f\u7528\uff08Usage Over HTTP\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"When used for hypermedia systems over a network, HTTP ","[RFC7231]"," is frequently the protocol of choice for distributing schemas. Misbehaving clients can pose problems for server maintainers if they pull a schema over the network more frequently than necessary, when it's instead possible to cache a schema for a long period of time."),(0,i.kt)("p",null,"HTTP servers SHOULD set long-lived caching headers on JSON Schemas. HTTP clients SHOULD observe caching headers and not re-request documents within their freshness period. Distributed systems SHOULD make use of a shared cache and/or caching proxy."),(0,i.kt)("p",null,"Clients SHOULD set or prepend a User-Agent header specific to the JSON Schema implementation or software product. Since symbols are listed in decreasing order of significance, the JSON Schema library name/version should precede the more generic HTTP library name (if any). For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"User-Agent: product-name/5.4.1 so-cool-json-schema/1.0.2 curl/7.43.0\n")),(0,i.kt)("p",null,'Clients SHOULD be able to make requests with a "From" header so that server operators can contact the owner of a potentially misbehaving script.')),(0,i.kt)("p",null,"\u5728\u7f51\u7edc\u4e0a\u7684\u8d85\u5a92\u4f53\u7cfb\u7edf\u4e2d\u4f7f\u7528\u65f6\uff0cHTTP ","[RFC7231]"," \u901a\u5e38\u662f\u5206\u53d1\u6a21\u5f0f\u7684\u9996\u9009\u534f\u8bae\u3002\u5982\u679c\u5ba2\u6237\u7aef\u5728\u4e0d\u5fc5\u8981\u7684\u60c5\u51b5\u4e0b\u9891\u7e41\u5730\u4ece\u7f51\u7edc\u4e0a\u83b7\u53d6\u6a21\u5f0f\uff0c\u800c\u4e0d\u662f\u5c06\u6a21\u5f0f\u7f13\u5b58\u5f88\u957f\u65f6\u95f4\uff0c\u8fd9\u53ef\u80fd\u4f1a\u7ed9\u670d\u52a1\u5668\u7ef4\u62a4\u8005\u5e26\u6765\u95ee\u9898\u3002"),(0,i.kt)("p",null,"HTTP \u670d\u52a1\u5668\u5e94\uff08SHOULD\uff09\u5728 JSON \u6a21\u5f0f\u4e0a\u8bbe\u7f6e\u957f\u671f\u7f13\u5b58\u5934\u3002HTTP \u5ba2\u6237\u7aef\u5e94\uff08SHOULD\uff09\u9075\u5b88\u7f13\u5b58\u5934\uff0c\u4e0d\u5728\u5176\u65b0\u9c9c\u5ea6\u671f\u5185\u91cd\u65b0\u8bf7\u6c42\u6587\u6863\u3002\u5206\u5e03\u5f0f\u7cfb\u7edf\u5e94\uff08SHOULD\uff09\u4f7f\u7528\u5171\u4eab\u7f13\u5b58\u548c/\u6216\u7f13\u5b58\u4ee3\u7406\u3002"),(0,i.kt)("p",null,"\u5ba2\u6237\u7aef\u5e94\uff08SHOULD\uff09\u8bbe\u7f6e\u6216\u6dfb\u52a0\u7279\u5b9a\u4e8e JSON \u6a21\u5f0f\u5b9e\u73b0\u6216\u8f6f\u4ef6\u4ea7\u54c1\u7684 User-Agent \u5934\u3002\u7531\u4e8e\u7b26\u53f7\u6309\u7167\u91cd\u8981\u6027\u9012\u51cf\u7684\u987a\u5e8f\u6392\u5217\uff0cJSON \u6a21\u5f0f\u5e93\u540d\u79f0/\u7248\u672c\u5e94\u4f4d\u4e8e\u66f4\u901a\u7528\u7684 HTTP \u5e93\u540d\u79f0\uff08\u5982\u679c\u6709\u7684\u8bdd\uff09\u4e4b\u524d\u3002\u4f8b\u5982\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"User-Agent: product-name/5.4.1 so-cool-json-schema/1.0.2 curl/7.43.0\n")),(0,i.kt)("p",null,"\u5ba2\u6237\u7aef\u5e94\uff08SHOULD\uff09\u80fd\u591f\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"From")," \u5934\u53d1\u9001\u8bf7\u6c42\uff0c\u4ee5\u4fbf\u670d\u52a1\u5668\u64cd\u4f5c\u5458\u53ef\u4ee5\u8054\u7cfb\u5230\u53ef\u80fd\u5b58\u5728\u95ee\u9898\u7684\u811a\u672c\u7684\u6240\u6709\u8005\u3002"),(0,i.kt)("h2",{id:"10-\u5e94\u7528\u5b50\u6a21\u5f0f\u7684\u8bcd\u6c47\u8868a-vocabulary-for-applying-subschemas"},"10. \u5e94\u7528\u5b50\u6a21\u5f0f\u7684\u8bcd\u6c47\u8868\uff08A Vocabulary for Applying Subschemas\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"This section defines a vocabulary of applicator keywords that are RECOMMENDED for use as the basis of other vocabularies."),(0,i.kt)("p",null,'Meta-schemas that do not use "$vocabulary" SHOULD be considered to require this vocabulary as if its URI were present with a value of true.'),(0,i.kt)("p",null,"The current URI for this vocabulary, known as the Applicator vocabulary, is: ",(0,i.kt)("a",{parentName:"p",href:"https://json-schema.org/draft/2020-12/vocab/applicator"},"https://json-schema.org/draft/2020-12/vocab/applicator"),"."),(0,i.kt)("p",null,"The current URI for the corresponding meta-schema is: ",(0,i.kt)("a",{parentName:"p",href:"https://json-schema.org/draft/2020-12/meta/applicator"},"https://json-schema.org/draft/2020-12/meta/applicator"),".")),(0,i.kt)("p",null,"\u672c\u8282\u5b9a\u4e49\u4e86\u4e00\u4e2a\u5e94\u7528\u5668\u5173\u952e\u5b57\u8bcd\u6c47\u8868\uff0c\u5efa\u8bae\uff08RECOMMENDED\uff09\u5c06\u5176\u4f5c\u4e3a\u5176\u5b83\u8bcd\u6c47\u8868\u7684\u57fa\u7840\u3002\n\u4e0d\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"$vocabulary")," \u7684\u5143\u6a21\u5f0f\u5e94\uff08SHOULD\uff09\u88ab\u89c6\u4e3a\u9700\u8981\u8fd9\u4e2a\u8bcd\u6c47\u8868\uff0c\u5c31\u50cf\u5176 URI \u5b58\u5728\u4e14\u503c\u4e3a true \u4e00\u6837\u3002"),(0,i.kt)("p",null,"\u8be5\u8bcd\u6c47\u8868\u7684\u5f53\u524d URI\uff0c\u79f0\u4e3a\u5e94\u7528\u5668\u8bcd\u6c47\u8868\uff0c\u662f\uff1a",(0,i.kt)("a",{parentName:"p",href:"https://json-schema.org/draft/2020-12/vocab/applicator%E3%80%82"},"https://json-schema.org/draft/2020-12/vocab/applicator\u3002")),(0,i.kt)("p",null,"\u76f8\u5e94\u5143\u6a21\u5f0f\u7684\u5f53\u524d URI \u662f\uff1a",(0,i.kt)("a",{parentName:"p",href:"https://json-schema.org/draft/2020-12/meta/applicator%E3%80%82"},"https://json-schema.org/draft/2020-12/meta/applicator\u3002")),(0,i.kt)("h3",{id:"101-\u5173\u952e\u5b57\u72ec\u7acb\u6027keyword-independence"},"10.1. \u5173\u952e\u5b57\u72ec\u7acb\u6027\uff08Keyword Independence\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"Schema keywords typically operate independently, without affecting each other's outcomes."),(0,i.kt)("p",null,"For schema author convenience, there are some exceptions among the keywords in this vocabulary:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},'"additionalProperties", whose behavior is defined in terms of "properties" and "patternProperties"'),(0,i.kt)("li",{parentName:"ul"},'"items", whose behavior is defined in terms of "prefixItems"'),(0,i.kt)("li",{parentName:"ul"},'"contains", whose behavior is affected by the presence and value of "minContains", in the Validation vocabulary'))),(0,i.kt)("p",null,"\u6a21\u5f0f\u5173\u952e\u5b57\u901a\u5e38\u72ec\u7acb\u64cd\u4f5c\uff0c\u4e0d\u4f1a\u5f71\u54cd\u5f7c\u6b64\u7684\u7ed3\u679c\u3002"),(0,i.kt)("p",null,"\u4e3a\u65b9\u4fbf\u6a21\u5f0f\u4f5c\u8005\uff0c\u8fd9\u4e2a\u8bcd\u6c47\u8868\u4e2d\u7684\u5173\u952e\u5b57\u5b58\u5728\u4e00\u4e9b\u4f8b\u5916\uff1a"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"additionalProperties"),"\uff0c\u5176\u884c\u4e3a\u662f\u57fa\u4e8e ",(0,i.kt)("inlineCode",{parentName:"li"},"properties")," \u548c ",(0,i.kt)("inlineCode",{parentName:"li"},"patternProperties")," \u5b9a\u4e49\u7684"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"items"),"\uff0c\u5176\u884c\u4e3a\u662f\u57fa\u4e8e ",(0,i.kt)("inlineCode",{parentName:"li"},"prefixItems")," \u5b9a\u4e49\u7684"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"contains"),"\uff0c\u5176\u884c\u4e3a\u53d7\u5230\u9a8c\u8bc1\u8bcd\u6c47\u8868\u4e2d ",(0,i.kt)("inlineCode",{parentName:"li"},"minContains")," \u5b58\u5728\u53ca\u5176\u503c\u7684\u5f71\u54cd")),(0,i.kt)("h3",{id:"102-\u5e94\u7528\u5b50\u6a21\u5f0f\u7684\u5173\u952e\u5b57keywords-for-applying-subschemas-in-place"},"10.2. \u5e94\u7528\u5b50\u6a21\u5f0f\u7684\u5173\u952e\u5b57\uff08Keywords for Applying Subschemas in Place\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"These keywords apply subschemas to the same location in the instance as the parent schema is being applied. They allow combining or modifying the subschema results in various ways."),(0,i.kt)("p",null,"Subschemas of these keywords evaluate the instance completely independently such that the results of one such subschema MUST NOT impact the results of sibling subschemas. Therefore subschemas may be applied in any order.")),(0,i.kt)("p",null,"\u8fd9\u4e9b\u5173\u952e\u5b57\u5c06\u5b50\u6a21\u5f0f\u5e94\u7528\u5230\u5b9e\u4f8b\u4e2d\u4e0e\u7236\u6a21\u5f0f\u76f8\u540c\u7684\u4f4d\u7f6e\u3002\u5b83\u4eec\u5141\u8bb8\u4ee5\u5404\u79cd\u65b9\u5f0f\u7ec4\u5408\u6216\u4fee\u6539\u5b50\u6a21\u5f0f\u7ed3\u679c\u3002"),(0,i.kt)("p",null,"\u8fd9\u4e9b\u5173\u952e\u5b57\u7684\u5b50\u6a21\u5f0f\u72ec\u7acb\u8bc4\u4f30\u5b9e\u4f8b\uff0c\u4ee5\u81f4\u4e00\u4e2a\u8fd9\u6837\u7684\u5b50\u6a21\u5f0f\u7684\u7ed3\u679c\u4e0d\u5f97\uff08MUST NOT\uff09\u5f71\u54cd\u540c\u7ea7\u5b50\u6a21\u5f0f\u7684\u7ed3\u679c\u3002\u56e0\u6b64\uff0c\u5b50\u6a21\u5f0f\u53ef\u4ee5\u6309\u4efb\u610f\u987a\u5e8f\u5e94\u7528\u3002"),(0,i.kt)("h4",{id:"1021-\u903b\u8f91\u5e94\u7528\u5b50\u6a21\u5f0f\u7684\u5173\u952e\u5b57keywords-for-applying-subschemas-with-logic"},"10.2.1. \u903b\u8f91\u5e94\u7528\u5b50\u6a21\u5f0f\u7684\u5173\u952e\u5b57\uff08Keywords for Applying Subschemas With Logic\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"These keywords correspond to logical operators for combining or modifying the boolean assertion results of the subschemas. They have no direct impact on annotation collection, although they enable the same annotation keyword to be applied to an instance location with different values. Annotation keywords define their own rules for combining such values.")),(0,i.kt)("p",null,"\u8fd9\u4e9b\u5173\u952e\u5b57\u5bf9\u5e94\u4e8e\u7ec4\u5408\u6216\u4fee\u6539\u5b50\u6a21\u5f0f\u7684\u5e03\u5c14\u65ad\u8a00\u7ed3\u679c\u7684\u903b\u8f91\u8fd0\u7b97\u7b26\u3002\u5b83\u4eec\u5bf9\u6ce8\u91ca\u6536\u96c6\u6ca1\u6709\u76f4\u63a5\u5f71\u54cd\uff0c\u5c3d\u7ba1\u5b83\u4eec\u5141\u8bb8\u5c06\u76f8\u540c\u7684\u6ce8\u91ca\u5173\u952e\u5b57\u5e94\u7528\u4e8e\u5177\u6709\u4e0d\u540c\u503c\u7684\u5b9e\u4f8b\u4f4d\u7f6e\u3002\u6ce8\u91ca\u5173\u952e\u5b57\u4e3a\u7ec4\u5408\u8fd9\u4e9b\u503c\u5b9a\u4e49\u4e86\u5b83\u4eec\u81ea\u5df1\u7684\u89c4\u5219\u3002"),(0,i.kt)("h5",{id:"10211-allof"},"10.2.1.1. allOf"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"This keyword's value MUST be a non-empty array. Each item of the array MUST be a valid JSON Schema."),(0,i.kt)("p",null,"An instance validates successfully against this keyword if it validates successfully against all schemas defined by this keyword's value.")),(0,i.kt)("p",null,"\u6b64\u5173\u952e\u5b57\u7684\u503c\u5fc5\u987b\uff08MUST\uff09\u662f\u975e\u7a7a\u6570\u7ec4\u3002\u6570\u7ec4\u7684\u6bcf\u4e2a\u9879\u76ee\u5fc5\u987b\uff08MUST\uff09\u662f\u6709\u6548\u7684 JSON \u6a21\u5f0f\u3002"),(0,i.kt)("p",null,"\u5982\u679c\u4e00\u4e2a\u5b9e\u4f8b\u6210\u529f\u5730\u9a8c\u8bc1\u4e86\u6b64\u5173\u952e\u5b57\u7684\u503c\u6240\u5b9a\u4e49\u7684\u6240\u6709\u6a21\u5f0f\uff0c\u5219\u5b83\u6210\u529f\u5730\u9a8c\u8bc1\u4e86\u6b64\u5173\u952e\u5b57\u3002"),(0,i.kt)("h5",{id:"10212-anyof"},"10.2.1.2. anyOf"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"This keyword's value MUST be a non-empty array. Each item of the array MUST be a valid JSON Schema."),(0,i.kt)("p",null,"An instance validates successfully against this keyword if it validates successfully against at least one schema defined by this keyword's value. Note that when annotations are being collected, all subschemas MUST be examined so that annotations are collected from each subschema that validates successfully.")),(0,i.kt)("p",null,"\u6b64\u5173\u952e\u5b57\u7684\u503c\u5fc5\u987b\uff08MUST\uff09\u662f\u975e\u7a7a\u6570\u7ec4\u3002\u6570\u7ec4\u7684\u6bcf\u4e2a\u9879\u76ee\u5fc5\u987b\uff08MUST\uff09\u662f\u6709\u6548\u7684 JSON \u6a21\u5f0f\u3002"),(0,i.kt)("p",null,"\u5982\u679c\u4e00\u4e2a\u5b9e\u4f8b\u6210\u529f\u5730\u9a8c\u8bc1\u4e86\u6b64\u5173\u952e\u5b57\u7684\u503c\u6240\u5b9a\u4e49\u7684\u81f3\u5c11\u4e00\u4e2a\u6a21\u5f0f\uff0c\u5219\u5b83\u6210\u529f\u5730\u9a8c\u8bc1\u4e86\u6b64\u5173\u952e\u5b57\u3002\u8bf7\u6ce8\u610f\uff0c\u5f53\u6b63\u5728\u6536\u96c6\u6ce8\u91ca\u65f6\uff0c\u5fc5\u987b\u68c0\u67e5\u6240\u6709\u5b50\u6a21\u5f0f\uff0c\u4ee5\u4fbf\u4ece\u6bcf\u4e2a\u6210\u529f\u9a8c\u8bc1\u7684\u5b50\u6a21\u5f0f\u4e2d\u6536\u96c6\u6ce8\u91ca\u3002"),(0,i.kt)("h5",{id:"10213-oneof"},"10.2.1.3. oneOf"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"This keyword's value MUST be a non-empty array. Each item of the array MUST be a valid JSON Schema."),(0,i.kt)("p",null,"An instance validates successfully against this keyword if it validates successfully against exactly one schema defined by this keyword's value.")),(0,i.kt)("p",null,"\u6b64\u5173\u952e\u5b57\u7684\u503c\u5fc5\u987b\uff08MUST\uff09\u662f\u975e\u7a7a\u6570\u7ec4\u3002\u6570\u7ec4\u7684\u6bcf\u4e2a\u9879\u76ee\u5fc5\u987b\uff08MUST\uff09\u662f\u6709\u6548\u7684 JSON \u6a21\u5f0f\u3002"),(0,i.kt)("p",null,"\u5982\u679c\u4e00\u4e2a\u5b9e\u4f8b\u6210\u529f\u5730\u9a8c\u8bc1\u4e86\u6b64\u5173\u952e\u5b57\u7684\u503c\u6240\u5b9a\u4e49\u7684\u6070\u597d\u4e00\u4e2a\u6a21\u5f0f\uff0c\u5219\u5b83\u6210\u529f\u5730\u9a8c\u8bc1\u4e86\u6b64\u5173\u952e\u5b57\u3002"),(0,i.kt)("h5",{id:"10214-not"},"10.2.1.4. not"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"This keyword's value MUST be a valid JSON Schema."),(0,i.kt)("p",null,"An instance is valid against this keyword if it fails to validate successfully against the schema defined by this keyword.")),(0,i.kt)("p",null,"\u6b64\u5173\u952e\u5b57\u7684\u503c\u5fc5\u987b\uff08MUST\uff09\u662f\u6709\u6548\u7684 JSON \u6a21\u5f0f\u3002"),(0,i.kt)("p",null,"\u5982\u679c\u4e00\u4e2a\u5b9e\u4f8b\u672a\u80fd\u6210\u529f\u5730\u9a8c\u8bc1\u6b64\u5173\u952e\u5b57\u6240\u5b9a\u4e49\u7684\u6a21\u5f0f\uff0c\u5219\u5b83\u5bf9\u6b64\u5173\u952e\u5b57\u6709\u6548\u3002"),(0,i.kt)("h4",{id:"1022-\u6839\u636e\u6761\u4ef6\u5e94\u7528\u5b50\u6a21\u5f0f\u7684\u5173\u952e\u5b57keywords-for-applying-subschemas-conditionally"},"10.2.2. \u6839\u636e\u6761\u4ef6\u5e94\u7528\u5b50\u6a21\u5f0f\u7684\u5173\u952e\u5b57\uff08Keywords for Applying Subschemas Conditionally\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"Three of these keywords work together to implement conditional application of a subschema based on the outcome of another subschema. The fourth is a shortcut for a specific conditional case."),(0,i.kt)("p",null,'"if", "then", and "else" MUST NOT interact with each other across subschema boundaries. In other words, an "if" in one branch of an "allOf" MUST NOT have an impact on a "then" or "else" in another branch.'),(0,i.kt)("p",null,'There is no default behavior for "if", "then", or "else" when they are not present. In particular, they MUST NOT be treated as if present with an empty schema, and when "if" is not present, both "then" and "else" MUST be entirely ignored.')),(0,i.kt)("p",null,"\u8fd9\u4e09\u4e2a\u5173\u952e\u5b57\u5171\u540c\u5b9e\u73b0\u4e86\u57fa\u4e8e\u53e6\u4e00\u4e2a\u5b50\u6a21\u5f0f\u7684\u7ed3\u679c\u6709\u6761\u4ef6\u5730\u5e94\u7528\u5b50\u6a21\u5f0f\u3002\u7b2c\u56db\u4e2a\u662f\u7279\u5b9a\u6761\u4ef6\u60c5\u51b5\u7684\u5feb\u6377\u65b9\u5f0f\u3002"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"if"),"\u3001",(0,i.kt)("inlineCode",{parentName:"p"},"then")," \u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"else")," \u5fc5\u987b\u4e0d\uff08MUST NOT\uff09\u5728\u5b50\u6a21\u5f0f\u8fb9\u754c\u4e4b\u95f4\u76f8\u4e92\u4f5c\u7528\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c",(0,i.kt)("inlineCode",{parentName:"p"},"allOf")," \u4e2d\u7684\u4e00\u4e2a\u5206\u652f\u4e2d\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"if")," \u4e0d\u5f97\uff08MUST NOT\uff09\u5bf9\u53e6\u4e00\u4e2a\u5206\u652f\u4e2d\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"then")," \u6216 ",(0,i.kt)("inlineCode",{parentName:"p"},"else")," \u4ea7\u751f\u5f71\u54cd\u3002"),(0,i.kt)("p",null,"\u5f53 ",(0,i.kt)("inlineCode",{parentName:"p"},"if"),"\u3001",(0,i.kt)("inlineCode",{parentName:"p"},"then")," \u6216 ",(0,i.kt)("inlineCode",{parentName:"p"},"else")," \u4e0d\u51fa\u73b0\u65f6\uff0c\u6ca1\u6709\u9ed8\u8ba4\u884c\u4e3a\u3002\u7279\u522b\u5730\uff0c\u5b83\u4eec\u5fc5\u987b\u4e0d\uff08MUST NOT\uff09\u88ab\u89c6\u4e3a\u5e26\u6709\u7a7a\u6a21\u5f0f\u7684\u5b58\u5728\uff0c\u5f53 ",(0,i.kt)("inlineCode",{parentName:"p"},"if")," \u4e0d\u51fa\u73b0\u65f6\uff0c ",(0,i.kt)("inlineCode",{parentName:"p"},"then")," \u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"else")," \u5fc5\u987b\uff08MUST\uff09\u5b8c\u5168\u88ab\u5ffd\u7565\u3002"),(0,i.kt)("h5",{id:"10221-if"},"10.2.2.1. if"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"This keyword's value MUST be a valid JSON Schema."),(0,i.kt)("p",null,'This validation outcome of this keyword\'s subschema has no direct effect on the overall validation result. Rather, it controls which of the "then" or "else" keywords are evaluated.'),(0,i.kt)("p",null,'Instances that successfully validate against this keyword\'s subschema MUST also be valid against the subschema value of the "then" keyword, if present.'),(0,i.kt)("p",null,'Instances that fail to validate against this keyword\'s subschema MUST also be valid against the subschema value of the "else" keyword, if present.'),(0,i.kt)("p",null,'If annotations (Section 7.7) are being collected, they are collected from this keyword\'s subschema in the usual way, including when the keyword is present without either "then" or "else".')),(0,i.kt)("p",null,"\u6b64\u5173\u952e\u5b57\u7684\u503c\u5fc5\u987b\uff08MUST\uff09\u662f\u6709\u6548\u7684 JSON \u6a21\u5f0f\u3002"),(0,i.kt)("p",null,"\u6b64\u5173\u952e\u5b57\u5b50\u6a21\u5f0f\u7684\u9a8c\u8bc1\u7ed3\u679c\u5bf9\u6574\u4f53\u9a8c\u8bc1\u7ed3\u679c\u6ca1\u6709\u76f4\u63a5\u5f71\u54cd\u3002\u76f8\u53cd\uff0c\u5b83\u63a7\u5236\u8bc4\u4f30 ",(0,i.kt)("inlineCode",{parentName:"p"},"then")," \u6216 ",(0,i.kt)("inlineCode",{parentName:"p"},"else")," \u5173\u952e\u5b57\u4e2d\u7684\u54ea\u4e00\u4e2a\u3002"),(0,i.kt)("p",null,"\u6210\u529f\u9a8c\u8bc1\u6b64\u5173\u952e\u5b57\u5b50\u6a21\u5f0f\u7684\u5b9e\u4f8b\u4e5f\u5fc5\u987b\uff08MUST\uff09\u5bf9 ",(0,i.kt)("inlineCode",{parentName:"p"},"then")," \u5173\u952e\u5b57\u7684\u5b50\u6a21\u5f0f\u503c\uff08\u5982\u679c\u5b58\u5728\uff09\u6709\u6548\u3002"),(0,i.kt)("p",null,"\u672a\u80fd\u9a8c\u8bc1\u6b64\u5173\u952e\u5b57\u5b50\u6a21\u5f0f\u7684\u5b9e\u4f8b\u4e5f\u5fc5\u987b\uff08MUST\uff09\u5bf9 ",(0,i.kt)("inlineCode",{parentName:"p"},"else")," \u5173\u952e\u5b57\u7684\u5b50\u6a21\u5f0f\u503c\uff08\u5982\u679c\u5b58\u5728\uff09\u6709\u6548\u3002"),(0,i.kt)("p",null,"\u5982\u679c\u6b63\u5728\u6536\u96c6\u6ce8\u91ca\uff08\u7b2c 7.7 \u8282\uff09\uff0c\u5219\u4ee5\u901a\u5e38\u7684\u65b9\u5f0f\u4ece\u8be5\u5173\u952e\u5b57\u7684\u5b50\u6a21\u5f0f\u4e2d\u6536\u96c6\uff0c\u5305\u62ec\u5728\u6ca1\u6709 ",(0,i.kt)("inlineCode",{parentName:"p"},"then")," \u6216 ",(0,i.kt)("inlineCode",{parentName:"p"},"else")," \u7684\u60c5\u51b5\u4e0b\u51fa\u73b0\u8be5\u5173\u952e\u5b57\u3002"),(0,i.kt)("h5",{id:"10222-then"},"10.2.2.2. then"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"This keyword's value MUST be a valid JSON Schema."),(0,i.kt)("p",null,'When "if" is present, and the instance successfully validates against its subschema, then validation succeeds against this keyword if the instance also successfully validates against this keyword\'s subschema.'),(0,i.kt)("p",null,'This keyword has no effect when "if" is absent, or when the instance fails to validate against its subschema. Implementations MUST NOT evaluate the instance against this keyword, for either validation or annotation collection purposes, in such cases.')),(0,i.kt)("p",null,"\u6b64\u5173\u952e\u5b57\u7684\u503c\u5fc5\u987b\uff08MUST\uff09\u662f\u6709\u6548\u7684 JSON \u6a21\u5f0f\u3002"),(0,i.kt)("p",null,"\u5f53 ",(0,i.kt)("inlineCode",{parentName:"p"},"if")," \u5b58\u5728\u4e14\u5b9e\u4f8b\u6210\u529f\u9a8c\u8bc1\u5176\u5b50\u6a21\u5f0f\u65f6\uff0c\u5982\u679c\u5b9e\u4f8b\u8fd8\u6210\u529f\u9a8c\u8bc1\u6b64\u5173\u952e\u5b57\u7684\u5b50\u6a21\u5f0f\uff0c\u5219\u9a8c\u8bc1\u6210\u529f\u3002"),(0,i.kt)("p",null,"\u5f53 ",(0,i.kt)("inlineCode",{parentName:"p"},"if")," \u4e0d\u5b58\u5728\uff0c\u6216\u8005\u5b9e\u4f8b\u672a\u80fd\u9a8c\u8bc1\u5176\u5b50\u6a21\u5f0f\u65f6\uff0c\u6b64\u5173\u952e\u5b57\u65e0\u6548\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b9e\u73b0\u5fc5\u987b\u4e0d\uff08MUST NOT\uff09\u9488\u5bf9\u6b64\u5173\u952e\u5b57\u8bc4\u4f30\u5b9e\u4f8b\uff0c\u65e0\u8bba\u662f\u7528\u4e8e\u9a8c\u8bc1\u8fd8\u662f\u6ce8\u91ca\u6536\u96c6\u3002"),(0,i.kt)("h5",{id:"10223-else"},"10.2.2.3. else"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"This keyword's value MUST be a valid JSON Schema."),(0,i.kt)("p",null,'When "if" is present, and the instance fails to validate against its subschema, then validation succeeds against this keyword if the instance successfully validates against this keyword\'s subschema.'),(0,i.kt)("p",null,'This keyword has no effect when "if" is absent, or when the instance successfully validates against its subschema. Implementations MUST NOT evaluate the instance against this keyword, for either validation or annotation collection purposes, in such cases.')),(0,i.kt)("p",null,"\u6b64\u5173\u952e\u5b57\u7684\u503c\u5fc5\u987b\uff08MUST\uff09\u662f\u6709\u6548\u7684 JSON \u6a21\u5f0f\u3002"),(0,i.kt)("p",null,"\u5f53 ",(0,i.kt)("inlineCode",{parentName:"p"},"if")," \u5b58\u5728\u4e14\u5b9e\u4f8b\u672a\u80fd\u9a8c\u8bc1\u5176\u5b50\u6a21\u5f0f\u65f6\uff0c\u5982\u679c\u5b9e\u4f8b\u6210\u529f\u9a8c\u8bc1\u6b64\u5173\u952e\u5b57\u7684\u5b50\u6a21\u5f0f\uff0c\u5219\u9a8c\u8bc1\u6210\u529f\u3002"),(0,i.kt)("p",null,"\u5f53 ",(0,i.kt)("inlineCode",{parentName:"p"},"if")," \u4e0d\u5b58\u5728\uff0c\u6216\u8005\u5b9e\u4f8b\u6210\u529f\u9a8c\u8bc1\u5176\u5b50\u6a21\u5f0f\u65f6\uff0c\u6b64\u5173\u952e\u5b57\u65e0\u6548\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b9e\u73b0\u5fc5\u987b\u4e0d\uff08MUST NOT\uff09\u9488\u5bf9\u6b64\u5173\u952e\u5b57\u8bc4\u4f30\u5b9e\u4f8b\uff0c\u65e0\u8bba\u662f\u7528\u4e8e\u9a8c\u8bc1\u8fd8\u662f\u6ce8\u91ca\u6536\u96c6\u3002"),(0,i.kt)("h5",{id:"10224-dependentschemas"},"10.2.2.4. dependentSchemas"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"This keyword specifies subschemas that are evaluated if the instance is an object and contains a certain property."),(0,i.kt)("p",null,"This keyword's value MUST be an object. Each value in the object MUST be a valid JSON Schema."),(0,i.kt)("p",null,"If the object key is a property in the instance, the entire instance must validate against the subschema. Its use is dependent on the presence of the property."),(0,i.kt)("p",null,"Omitting this keyword has the same behavior as an empty object.")),(0,i.kt)("p",null,"\u6b64\u5173\u952e\u5b57\u6307\u5b9a\u4e86\u5982\u679c\u5b9e\u4f8b\u662f\u5bf9\u8c61\u5e76\u5305\u542b\u67d0\u4e2a\u5c5e\u6027\uff0c\u5219\u5bf9\u5176\u8fdb\u884c\u8bc4\u4f30\u7684\u5b50\u6a21\u5f0f\u3002"),(0,i.kt)("p",null,"\u6b64\u5173\u952e\u5b57\u7684\u503c\u5fc5\u987b\uff08MUST\uff09\u662f\u4e00\u4e2a\u5bf9\u8c61\u3002\u5bf9\u8c61\u4e2d\u7684\u6bcf\u4e2a\u503c\u5fc5\u987b\uff08MUST\uff09\u662f\u6709\u6548\u7684 JSON \u6a21\u5f0f\u3002"),(0,i.kt)("p",null,"\u5982\u679c\u5bf9\u8c61\u952e\u662f\u5b9e\u4f8b\u4e2d\u7684\u5c5e\u6027\uff0c\u5219\u6574\u4e2a\u5b9e\u4f8b\u5fc5\u987b\u9a8c\u8bc1\u8be5\u5b50\u6a21\u5f0f\u3002\u5b83\u7684\u4f7f\u7528\u53d6\u51b3\u4e8e\u5c5e\u6027\u7684\u5b58\u5728\u3002"),(0,i.kt)("p",null,"\u7701\u7565\u6b64\u5173\u952e\u5b57\u7684\u884c\u4e3a\u4e0e\u7a7a\u5bf9\u8c61\u76f8\u540c\u3002"),(0,i.kt)("h3",{id:"103-\u5c06\u5b50\u6a21\u5f0f\u5e94\u7528\u4e8e\u5b50\u5b9e\u4f8b\u7684\u5173\u952e\u5b57keywords-for-applying-subschemas-to-child-instances"},"10.3. \u5c06\u5b50\u6a21\u5f0f\u5e94\u7528\u4e8e\u5b50\u5b9e\u4f8b\u7684\u5173\u952e\u5b57\uff08Keywords for Applying Subschemas to Child Instances\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"Each of these keywords defines a rule for applying its subschema(s) to child instances, specifically object properties and array items, and combining their results.")),(0,i.kt)("p",null,"\u8fd9\u4e9b\u5173\u952e\u5b57\u4e2d\u7684\u6bcf\u4e00\u4e2a\u90fd\u5b9a\u4e49\u4e86\u4e00\u4e2a\u5c06\u5176\u5b50\u6a21\u5f0f\u5e94\u7528\u4e8e\u5b50\u5b9e\u4f8b\u7684\u89c4\u5219\uff0c\u5177\u4f53\u6765\u8bf4\u662f\u5bf9\u8c61\u5c5e\u6027\u548c\u6570\u7ec4\u9879\uff0c\u5e76\u5408\u5e76\u5b83\u4eec\u7684\u7ed3\u679c\u3002"),(0,i.kt)("h4",{id:"1031-\u5c06\u5b50\u6a21\u5f0f\u5e94\u7528\u4e8e\u6570\u7ec4\u7684\u5173\u952e\u5b57keywords-for-applying-subschemas-to-arrays"},"10.3.1. \u5c06\u5b50\u6a21\u5f0f\u5e94\u7528\u4e8e\u6570\u7ec4\u7684\u5173\u952e\u5b57\uff08Keywords for Applying Subschemas to Arrays\uff09"),(0,i.kt)("h5",{id:"10311-prefixitems"},"10.3.1.1. prefixItems"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'The value of "prefixItems" MUST be a non-empty array of valid JSON Schemas.'),(0,i.kt)("p",null,"Validation succeeds if each element of the instance validates against the schema at the same position, if any. This keyword does not constrain the length of the array. If the array is longer than this keyword's value, this keyword validates only the prefix of matching length."),(0,i.kt)("p",null,'This keyword produces an annotation value which is the largest index to which this keyword applied a subschema. The value MAY be a boolean true if a subschema was applied to every index of the instance, such as is produced by the "items" keyword. This annotation affects the behavior of "items" and "unevaluatedItems".'),(0,i.kt)("p",null,"Omitting this keyword has the same assertion behavior as an empty array.")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"prefixItems")," \u7684\u503c\u5fc5\u987b\uff08MUST\uff09\u662f\u6709\u6548 JSON \u6a21\u5f0f\u7684\u975e\u7a7a\u6570\u7ec4\u3002"),(0,i.kt)("p",null,"\u5982\u679c\u5b9e\u4f8b\u7684\u6bcf\u4e2a\u5143\u7d20\u4e0e\u76f8\u540c\u4f4d\u7f6e\u7684\u6a21\u5f0f\uff08\u5982\u679c\u6709\u7684\u8bdd\uff09\u90fd\u9a8c\u8bc1\u6210\u529f\uff0c\u5219\u9a8c\u8bc1\u6210\u529f\u3002\u6b64\u5173\u952e\u5b57\u4e0d\u9650\u5236\u6570\u7ec4\u7684\u957f\u5ea6\u3002\u5982\u679c\u6570\u7ec4\u957f\u5ea6\u5927\u4e8e\u6b64\u5173\u952e\u5b57\u7684\u503c\uff0c\u6b64\u5173\u952e\u5b57\u4ec5\u9a8c\u8bc1\u5339\u914d\u957f\u5ea6\u7684\u524d\u7f00\u3002"),(0,i.kt)("p",null,"\u6b64\u5173\u952e\u5b57\u4ea7\u751f\u4e00\u4e2a\u6ce8\u91ca\u503c\uff0c\u8be5\u503c\u662f\u5e94\u7528\u4e86\u5b50\u6a21\u5f0f\u7684\u6700\u5927\u7d22\u5f15\u3002\u5982\u679c\u5e94\u7528\u4e86\u4e00\u4e2a\u5b50\u6a21\u5f0f\u5230\u5b9e\u4f8b\u7684\u6bcf\u4e2a\u7d22\u5f15\uff0c\u4f8b\u5982\u901a\u8fc7 ",(0,i.kt)("inlineCode",{parentName:"p"},"items")," \u5173\u952e\u5b57\u4ea7\u751f\u7684\uff0c\u90a3\u4e48\u8be5\u503c\u53ef\u4ee5\u662f\u5e03\u5c14\u503c ",(0,i.kt)("inlineCode",{parentName:"p"},"true"),"\u3002\u6b64\u6ce8\u91ca\u4f1a\u5f71\u54cd ",(0,i.kt)("inlineCode",{parentName:"p"},"items")," \u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"unevaluatedItems")," \u7684\u884c\u4e3a\u3002"),(0,i.kt)("p",null,"\u7701\u7565\u6b64\u5173\u952e\u5b57\u5177\u6709\u4e0e\u7a7a\u6570\u7ec4\u76f8\u540c\u7684\u65ad\u8a00\u884c\u4e3a\u3002"),(0,i.kt)("h5",{id:"10312-items"},"10.3.1.2. items"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'The value of "items" MUST be a valid JSON Schema.'),(0,i.kt)("p",null,'This keyword applies its subschema to all instance elements at indexes greater than the length of the "prefixItems" array in the same schema object, as reported by the annotation result of that "prefixItems" keyword. If no such annotation result exists, "items" applies its subschema to all instance array elements. Note that the behavior of "items" without "prefixItems" is identical to that of the schema form of "items" in prior drafts. When "prefixItems" is present, the behavior of "items" is identical to the former "additionalItems" keyword.'),(0,i.kt)("p",null,'If the "items" subschema is applied to any positions within the instance array, it produces an annotation result of boolean true, indicating that all remaining array elements have been evaluated against this keyword\'s subschema. This annotation affects the behavior of "unevaluatedItems" in the Unevaluated vocabulary.'),(0,i.kt)("p",null,"Omitting this keyword has the same assertion behavior as an empty schema."),(0,i.kt)("p",null,'Implementations MAY choose to implement or optimize this keyword in another way that produces the same effect, such as by directly checking for the presence and size of a "prefixItems" array. Implementations that do not support annotation collection MUST do so.')),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"items")," \u7684\u503c\u5fc5\u987b\uff08MUST\uff09\u662f\u4e00\u4e2a\u6709\u6548\u7684 JSON \u6a21\u5f0f\u3002"),(0,i.kt)("p",null,"\u6b64\u5173\u952e\u5b57\u5c06\u5176\u5b50\u6a21\u5f0f\u5e94\u7528\u4e8e\u5b9e\u4f8b\u5143\u7d20\u5728\u5927\u4e8e\u76f8\u540c\u6a21\u5f0f\u5bf9\u8c61\u4e2d\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"prefixItems")," \u6570\u7ec4\u957f\u5ea6\u7684\u7d22\u5f15\u5904\uff0c\u5982\u8be5 ",(0,i.kt)("inlineCode",{parentName:"p"},"prefixItems")," \u5173\u952e\u5b57\u7684\u6ce8\u91ca\u7ed3\u679c\u6240\u62a5\u544a\u3002\u5982\u679c\u6ca1\u6709\u8fd9\u6837\u7684\u6ce8\u91ca\u7ed3\u679c\uff0c ",(0,i.kt)("inlineCode",{parentName:"p"},"items")," \u5c06\u5176\u5b50\u6a21\u5f0f\u5e94\u7528\u4e8e\u6240\u6709\u5b9e\u4f8b\u6570\u7ec4\u5143\u7d20\u3002\u8bf7\u6ce8\u610f\uff0c\u6ca1\u6709 ",(0,i.kt)("inlineCode",{parentName:"p"},"prefixItems")," \u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"items")," \u7684\u884c\u4e3a\u4e0e\u5148\u524d\u8349\u6848\u4e2d\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"items")," \u7684\u6a21\u5f0f\u5f62\u5f0f\u76f8\u540c\u3002\u5f53\u5b58\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"prefixItems")," \u65f6\uff0c ",(0,i.kt)("inlineCode",{parentName:"p"},"items")," \u7684\u884c\u4e3a\u4e0e\u4ee5\u524d\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"additionalItems")," \u5173\u952e\u5b57\u76f8\u540c\u3002"),(0,i.kt)("p",null,"\u5982\u679c ",(0,i.kt)("inlineCode",{parentName:"p"},"items")," \u5b50\u6a21\u5f0f\u5e94\u7528\u4e8e\u5b9e\u4f8b\u6570\u7ec4\u5185\u7684\u4efb\u4f55\u4f4d\u7f6e\uff0c\u5b83\u4f1a\u4ea7\u751f\u4e00\u4e2a\u5e03\u5c14\u503c ",(0,i.kt)("inlineCode",{parentName:"p"},"true")," \u7684\u6ce8\u91ca\u7ed3\u679c\uff0c\u8868\u793a\u5df2\u9488\u5bf9\u6b64\u5173\u952e\u5b57\u7684\u5b50\u6a21\u5f0f\u8bc4\u4f30\u4e86\u6240\u6709\u5269\u4f59\u7684\u6570\u7ec4\u5143\u7d20\u3002\u8fd9\u4e2a\u6ce8\u91ca\u5f71\u54cd\u4e86\u672a\u8bc4\u4f30\u8bcd\u6c47\u8868\u4e2d ",(0,i.kt)("inlineCode",{parentName:"p"},"unevaluatedItems")," \u7684\u884c\u4e3a\u3002"),(0,i.kt)("p",null,"\u7701\u7565\u6b64\u5173\u952e\u5b57\u5177\u6709\u4e0e\u7a7a\u6a21\u5f0f\u76f8\u540c\u7684\u65ad\u8a00\u884c\u4e3a\u3002"),(0,i.kt)("p",null,"\u5b9e\u73b0\u53ef\u4ee5\uff08MAY\uff09\u9009\u62e9\u4ee5\u53e6\u4e00\u79cd\u65b9\u5f0f\u5b9e\u73b0\u6216\u4f18\u5316\u6b64\u5173\u952e\u5b57\u4ee5\u4ea7\u751f\u76f8\u540c\u7684\u6548\u679c\uff0c\u4f8b\u5982\u901a\u8fc7\u76f4\u63a5\u68c0\u67e5 ",(0,i.kt)("inlineCode",{parentName:"p"},"prefixItems")," \u6570\u7ec4\u7684\u5b58\u5728\u548c\u5927\u5c0f\u3002\u4e0d\u652f\u6301\u6ce8\u91ca\u6536\u96c6\u7684\u5b9e\u73b0\u5fc5\u987b\uff08MUST\uff09\u8fd9\u6837\u505a\u3002"),(0,i.kt)("h5",{id:"10313-contains"},"10.3.1.3. contains"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"The value of this keyword MUST be a valid JSON Schema."),(0,i.kt)("p",null,'An array instance is valid against "contains" if at least one of its elements is valid against the given schema, except when "minContains" is present and has a value of 0, in which case an array instance MUST be considered valid against the "contains" keyword, even if none of its elements is valid against the given schema.'),(0,i.kt)("p",null,'This keyword produces an annotation value which is an array of the indexes to which this keyword validates successfully when applying its subschema, in ascending order. The value MAY be a boolean "true" if the subschema validates successfully when applied to every index of the instance. The annotation MUST be present if the instance array to which this keyword\'s schema applies is empty.'),(0,i.kt)("p",null,'This annotation affects the behavior of "unevaluatedItems" in the Unevaluated vocabulary, and MAY also be used to implement the "minContains" and "maxContains" keywords in the Validation vocabulary.'),(0,i.kt)("p",null,"The subschema MUST be applied to every array element even after the first match has been found, in order to collect annotations for use by other keywords. This is to ensure that all possible annotations are collected.")),(0,i.kt)("p",null,"\u6b64\u5173\u952e\u5b57\u7684\u503c\u5fc5\u987b\uff08MUST\uff09\u662f\u6709\u6548\u7684 JSON \u6a21\u5f0f\u3002"),(0,i.kt)("p",null,"\u5982\u679c\u6570\u7ec4\u5b9e\u4f8b\u4e2d\u81f3\u5c11\u6709\u4e00\u4e2a\u5143\u7d20\u6839\u636e\u7ed9\u5b9a\u7684\u6a21\u5f0f\u9a8c\u8bc1\u6210\u529f\uff0c\u5219\u8be5\u5b9e\u4f8b\u5bf9 ",(0,i.kt)("inlineCode",{parentName:"p"},"contains")," \u6709\u6548\uff0c\u4f46\u5f53 ",(0,i.kt)("inlineCode",{parentName:"p"},"minContains")," \u5b58\u5728\u5e76\u4e14\u503c\u4e3a0\u65f6\uff0c\u6570\u7ec4\u5b9e\u4f8b\u5fc5\u987b\u88ab\u8ba4\u4e3a\u5bf9 ",(0,i.kt)("inlineCode",{parentName:"p"},"contains")," \u5173\u952e\u5b57\u6709\u6548\uff0c\u5373\u4f7f\u5b83\u7684\u6240\u6709\u5143\u7d20\u90fd\u6ca1\u6709\u6839\u636e\u7ed9\u5b9a\u7684\u6a21\u5f0f\u9a8c\u8bc1\u6210\u529f\u3002"),(0,i.kt)("p",null,"\u6b64\u5173\u952e\u5b57\u4ea7\u751f\u4e00\u4e2a\u6ce8\u91ca\u503c\uff0c\u8be5\u503c\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u5176\u4e2d\u5305\u542b\u5e94\u7528\u5176\u5b50\u6a21\u5f0f\u65f6\u6b64\u5173\u952e\u5b57\u6210\u529f\u9a8c\u8bc1\u7684\u7d22\u5f15\uff0c\u6309\u5347\u5e8f\u6392\u5217\u3002\u5982\u679c\u5b50\u6a21\u5f0f\u5728\u5e94\u7528\u5230\u5b9e\u4f8b\u7684\u6bcf\u4e2a\u7d22\u5f15\u65f6\u90fd\u9a8c\u8bc1\u6210\u529f\uff0c\u90a3\u4e48\u8be5\u503c\u53ef\u4ee5\uff08MAY\uff09\u662f\u5e03\u5c14\u503c ",(0,i.kt)("inlineCode",{parentName:"p"},"true"),"\u3002\u5982\u679c\u6b64\u5173\u952e\u5b57\u7684\u6a21\u5f0f\u5e94\u7528\u7684\u5b9e\u4f8b\u6570\u7ec4\u4e3a\u7a7a\uff0c\u5219\u6ce8\u91ca\u5fc5\u987b\uff08MUST\uff09\u5b58\u5728\u3002"),(0,i.kt)("p",null,"\u6b64\u6ce8\u91ca\u5f71\u54cd\u4e86\u672a\u8bc4\u4f30\u8bcd\u6c47\u8868\u4e2d ",(0,i.kt)("inlineCode",{parentName:"p"},"unevaluatedItems")," \u7684\u884c\u4e3a\uff0c\u5e76\u4e14\u8fd8\u53ef\u4ee5\u7528\u4e8e\u5b9e\u73b0\u9a8c\u8bc1\u8bcd\u6c47\u8868\u4e2d\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"minContains")," \u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"maxContains")," \u5173\u952e\u5b57\u3002"),(0,i.kt)("p",null,"\u5728\u627e\u5230\u7b2c\u4e00\u4e2a\u5339\u914d\u4e4b\u540e\uff0c\u5b50\u6a21\u5f0f\u5fc5\u987b\uff08MUST\uff09\u5e94\u7528\u4e8e\u6bcf\u4e2a\u6570\u7ec4\u5143\u7d20\uff0c\u4ee5\u4fbf\u4e3a\u5176\u5b83\u5173\u952e\u5b57\u6536\u96c6\u6ce8\u91ca\u3002\u8fd9\u662f\u4e3a\u4e86\u786e\u4fdd\u6536\u96c6\u5230\u6240\u6709\u53ef\u80fd\u7684\u6ce8\u91ca\u3002"),(0,i.kt)("h4",{id:"1032-\u5e94\u7528\u5b50\u6a21\u5f0f\u5230\u5bf9\u8c61\u7684\u5173\u952e\u5b57keywords-for-applying-subschemas-to-objects"},"10.3.2. \u5e94\u7528\u5b50\u6a21\u5f0f\u5230\u5bf9\u8c61\u7684\u5173\u952e\u5b57\uff08Keywords for Applying Subschemas to Objects\uff09"),(0,i.kt)("h5",{id:"10321-properties"},"10.3.2.1. properties"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'The value of "properties" MUST be an object. Each value of this object MUST be a valid JSON Schema.'),(0,i.kt)("p",null,"Validation succeeds if, for each name that appears in both the instance and as a name within this keyword's value, the child instance for that name successfully validates against the corresponding schema."),(0,i.kt)("p",null,'The annotation result of this keyword is the set of instance property names matched by this keyword. This annotation affects the behavior of "additionalProperties" (in this vocabulary) and "unevaluatedProperties" in the Unevaluated vocabulary.'),(0,i.kt)("p",null,"Omitting this keyword has the same assertion behavior as an empty object.")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"properties")," \u7684\u503c\u5fc5\u987b\uff08MUST\uff09\u662f\u4e00\u4e2a\u5bf9\u8c61\u3002\u6b64\u5bf9\u8c61\u7684\u6bcf\u4e2a\u503c\u5fc5\u987b\u662f\u4e00\u4e2a\u6709\u6548\u7684 JSON \u6a21\u5f0f\u3002"),(0,i.kt)("p",null,"\u5982\u679c\u5728\u5b9e\u4f8b\u548c\u6b64\u5173\u952e\u5b57\u503c\u5185\u7684\u540d\u79f0\u4e2d\u540c\u65f6\u51fa\u73b0\u7684\u6bcf\u4e2a\u540d\u79f0\uff0c\u8be5\u540d\u79f0\u7684\u5b50\u5b9e\u4f8b\u90fd\u80fd\u6210\u529f\u9a8c\u8bc1\u5bf9\u5e94\u7684\u6a21\u5f0f\uff0c\u5219\u9a8c\u8bc1\u6210\u529f\u3002"),(0,i.kt)("p",null,"\u6b64\u5173\u952e\u5b57\u7684\u6ce8\u91ca\u7ed3\u679c\u662f\u7531\u6b64\u5173\u952e\u5b57\u5339\u914d\u7684\u5b9e\u4f8b\u5c5e\u6027\u540d\u79f0\u96c6\u5408\u3002\u6b64\u6ce8\u91ca\u5f71\u54cd\u4e86\u6b64\u8bcd\u6c47\u8868\u4e2d ",(0,i.kt)("inlineCode",{parentName:"p"},"additionalProperties")," \u7684\u884c\u4e3a\u548c\u672a\u8bc4\u4f30\u8bcd\u6c47\u8868\u4e2d ",(0,i.kt)("inlineCode",{parentName:"p"},"unevaluatedProperties")," \u7684\u884c\u4e3a\u3002"),(0,i.kt)("p",null,"\u7701\u7565\u6b64\u5173\u952e\u5b57\u5177\u6709\u4e0e\u7a7a\u5bf9\u8c61\u76f8\u540c\u7684\u65ad\u8a00\u884c\u4e3a\u3002"),(0,i.kt)("h5",{id:"10322-patternproperties"},"10.3.2.2. patternProperties"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'The value of "patternProperties" MUST be an object. Each property name of this object SHOULD be a valid regular expression, according to the ECMA-262 regular expression dialect. Each property value of this object MUST be a valid JSON Schema.'),(0,i.kt)("p",null,"Validation succeeds if, for each instance name that matches any regular expressions that appear as a property name in this keyword's value, the child instance for that name successfully validates against each schema that corresponds to a matching regular expression."),(0,i.kt)("p",null,'The annotation result of this keyword is the set of instance property names matched by this keyword. This annotation affects the behavior of "additionalProperties" (in this vocabulary) and "unevaluatedProperties" (in the Unevaluated vocabulary).'),(0,i.kt)("p",null,"Omitting this keyword has the same assertion behavior as an empty object.")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"patternProperties")," \u7684\u503c\u5fc5\u987b\uff08MUST\uff09\u662f\u4e00\u4e2a\u5bf9\u8c61\u3002\u6b64\u5bf9\u8c61\u7684\u6bcf\u4e2a\u5c5e\u6027\u540d\u5e94\u8be5\u662f\u4e00\u4e2a\u6709\u6548\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u6839\u636e ECMA-262 \u6b63\u5219\u8868\u8fbe\u5f0f\u65b9\u8a00\u3002\u6b64\u5bf9\u8c61\u7684\u6bcf\u4e2a\u5c5e\u6027\u503c\u5fc5\u987b\u662f\u4e00\u4e2a\u6709\u6548\u7684 JSON \u6a21\u5f0f\u3002"),(0,i.kt)("p",null,"\u5982\u679c\u5b9e\u4f8b\u540d\u79f0\u4e0e\u51fa\u73b0\u5728\u6b64\u5173\u952e\u5b57\u503c\u7684\u5c5e\u6027\u540d\u4e2d\u7684\u4efb\u4f55\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\uff0c\u90a3\u4e48\u8be5\u540d\u79f0\u7684\u5b50\u5b9e\u4f8b\u6210\u529f\u9a8c\u8bc1\u4e0e\u5339\u914d\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u76f8\u5bf9\u5e94\u7684\u6bcf\u4e2a\u6a21\u5f0f\uff0c\u5219\u9a8c\u8bc1\u6210\u529f\u3002"),(0,i.kt)("p",null,"\u6b64\u5173\u952e\u5b57\u7684\u6ce8\u91ca\u7ed3\u679c\u662f\u7531\u6b64\u5173\u952e\u5b57\u5339\u914d\u7684\u5b9e\u4f8b\u5c5e\u6027\u540d\u79f0\u96c6\u5408\u3002\u6b64\u6ce8\u91ca\u5f71\u54cd\u4e86\u6b64\u8bcd\u6c47\u8868\u4e2d ",(0,i.kt)("inlineCode",{parentName:"p"},"additionalProperties")," \u7684\u884c\u4e3a\u548c\u672a\u8bc4\u4f30\u8bcd\u6c47\u8868\u4e2d ",(0,i.kt)("inlineCode",{parentName:"p"},"unevaluatedProperties")," \u7684\u884c\u4e3a\u3002"),(0,i.kt)("p",null,"\u7701\u7565\u6b64\u5173\u952e\u5b57\u5177\u6709\u4e0e\u7a7a\u5bf9\u8c61\u76f8\u540c\u7684\u65ad\u8a00\u884c\u4e3a\u3002"),(0,i.kt)("h5",{id:"10323-additionalproperties"},"10.3.2.3. additionalProperties"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'The value of "additionalProperties" MUST be a valid JSON Schema.'),(0,i.kt)("p",null,'The behavior of this keyword depends on the presence and annotation results of "properties" and "patternProperties" within the same schema object. Validation with "additionalProperties" applies only to the child values of instance names that do not appear in the annotation results of either "properties" or "patternProperties".'),(0,i.kt)("p",null,'For all such properties, validation succeeds if the child instance validates against the "additionalProperties" schema.'),(0,i.kt)("p",null,'The annotation result of this keyword is the set of instance property names validated by this keyword\'s subschema. This annotation affects the behavior of "unevaluatedProperties" in the Unevaluated vocabulary.'),(0,i.kt)("p",null,"Omitting this keyword has the same assertion behavior as an empty schema."),(0,i.kt)("p",null,'Implementations MAY choose to implement or optimize this keyword in another way that produces the same effect, such as by directly checking the names in "properties" and the patterns in "patternProperties" against the instance property set. Implementations that do not support annotation collection MUST do so. In defining this option, it seems there is the potential for ambiguity in the output format. The ambiguity does not affect validation results, but it does affect the resulting output format. The ambiguity allows for multiple valid output results depending on whether annotations are used or a solution that "produces the same effect" as draft-07. It is understood that annotations from failing schemas are dropped. See our ',(0,i.kt)("a",{parentName:"p",href:"https://github.com/json-schema-org/json-schema-spec/tree/HEAD/adr/2022-04-08-cref-for-ambiguity-and-fix-later-gh-spec-issue-1172.md"},"Decision Record")," for further details.")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"additionalProperties")," \u7684\u503c\u5fc5\u987b\uff08MUST\uff09\u662f\u4e00\u4e2a\u6709\u6548\u7684 JSON \u6a21\u5f0f\u3002"),(0,i.kt)("p",null,"\u6b64\u5173\u952e\u5b57\u7684\u884c\u4e3a\u53d6\u51b3\u4e8e\u540c\u4e00\u6a21\u5f0f\u5bf9\u8c61\u4e2d ",(0,i.kt)("inlineCode",{parentName:"p"},"properties")," \u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"patternProperties")," \u7684\u5b58\u5728\u548c\u6ce8\u91ca\u7ed3\u679c\u3002\u5e26\u6709 ",(0,i.kt)("inlineCode",{parentName:"p"},"additionalProperties")," \u7684\u9a8c\u8bc1\u4ec5\u9002\u7528\u4e8e\u5b9e\u4f8b\u540d\u79f0\u7684\u5b50\u503c\uff0c\u8fd9\u4e9b\u540d\u79f0\u4e0d\u51fa\u73b0\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"properties")," \u6216 ",(0,i.kt)("inlineCode",{parentName:"p"},"patternProperties")," \u7684\u6ce8\u91ca\u7ed3\u679c\u4e2d\u3002"),(0,i.kt)("p",null,"\u5bf9\u4e8e\u6240\u6709\u8fd9\u6837\u7684\u5c5e\u6027\uff0c\u5982\u679c\u5b50\u5b9e\u4f8b\u901a\u8fc7 ",(0,i.kt)("inlineCode",{parentName:"p"},"additionalProperties")," \u6a21\u5f0f\u9a8c\u8bc1\uff0c\u5219\u9a8c\u8bc1\u6210\u529f\u3002"),(0,i.kt)("p",null,"\u6b64\u5173\u952e\u5b57\u7684\u6ce8\u91ca\u7ed3\u679c\u662f\u7531\u6b64\u5173\u952e\u5b57\u7684\u5b50\u6a21\u5f0f\u9a8c\u8bc1\u7684\u5b9e\u4f8b\u5c5e\u6027\u540d\u79f0\u96c6\u5408\u3002\u6b64\u6ce8\u91ca\u5f71\u54cd\u4e86\u672a\u8bc4\u4f30\u8bcd\u6c47\u8868\u4e2d ",(0,i.kt)("inlineCode",{parentName:"p"},"unevaluatedProperties")," \u7684\u884c\u4e3a\u3002"),(0,i.kt)("p",null,"\u7701\u7565\u6b64\u5173\u952e\u5b57\u5177\u6709\u4e0e\u7a7a\u6a21\u5f0f\u76f8\u540c\u7684\u65ad\u8a00\u884c\u4e3a\u3002"),(0,i.kt)("p",null,"\u5b9e\u73b0\u53ef\u4ee5\uff08MAY\uff09\u9009\u62e9\u4ee5\u4ea7\u751f\u76f8\u540c\u6548\u679c\u7684\u53e6\u4e00\u79cd\u65b9\u5f0f\u6765\u5b9e\u73b0\u6216\u4f18\u5316\u6b64\u5173\u952e\u5b57\uff0c\u4f8b\u5982\u76f4\u63a5\u5c06 ",(0,i.kt)("inlineCode",{parentName:"p"},"properties")," \u4e2d\u7684\u540d\u79f0\u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"patternProperties")," \u4e2d\u7684\u6a21\u5f0f\u4e0e\u5b9e\u4f8b\u5c5e\u6027\u96c6\u5408\u8fdb\u884c\u6bd4\u8f83\u3002\u4e0d\u652f\u6301\u6ce8\u91ca\u6536\u96c6\u7684\u5b9e\u73b0\u5fc5\u987b\uff08MUST\uff09\u8fd9\u6837\u505a\u3002\u5728\u5b9a\u4e49\u6b64\u9009\u9879\u65f6\uff0c\u4f3c\u4e4e\u8f93\u51fa\u683c\u5f0f\u5b58\u5728\u6f5c\u5728\u7684\u6a21\u7cca\u6027\u3002\u8fd9\u79cd\u6a21\u7cca\u6027\u4e0d\u5f71\u54cd\u9a8c\u8bc1\u7ed3\u679c\uff0c\u4f46\u4f1a\u5f71\u54cd\u751f\u6210\u7684\u8f93\u51fa\u683c\u5f0f\u3002\u8fd9\u79cd\u6a21\u7cca\u6027\u5141\u8bb8\u6839\u636e\u662f\u5426\u4f7f\u7528\u6ce8\u91ca\u6216\u4ea7\u751f\u4e0e\u8349\u6848-07\u76f8\u540c\u6548\u679c\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u4ea7\u751f\u591a\u4e2a\u6709\u6548\u7684\u8f93\u51fa\u7ed3\u679c\u3002\u5df2\u77e5\u6765\u81ea\u5931\u8d25\u6a21\u5f0f\u7684\u6ce8\u91ca\u88ab\u4e22\u5f03\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6211\u4eec\u7684",(0,i.kt)("a",{parentName:"p",href:"https://github.com/json-schema-org/json-schema-spec/tree/HEAD/adr/2022-04-08-cref-for-ambiguity-and-fix-later-gh-spec-issue-1172.md"},"\u51b3\u7b56\u8bb0\u5f55"),"\u3002"),(0,i.kt)("h5",{id:"10324-propertynames"},"10.3.2.4. propertyNames"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'The value of "propertyNames" MUST be a valid JSON Schema.'),(0,i.kt)("p",null,"If the instance is an object, this keyword validates if every property name in the instance validates against the provided schema. Note the property name that the schema is testing will always be a string."),(0,i.kt)("p",null,"Omitting this keyword has the same behavior as an empty schema.")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"propertyNames")," \u7684\u503c\u5fc5\u987b\uff08MUST\uff09\u662f\u4e00\u4e2a\u6709\u6548\u7684 JSON \u6a21\u5f0f\u3002"),(0,i.kt)("p",null,"\u5982\u679c\u5b9e\u4f8b\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5f53\u5b9e\u4f8b\u4e2d\u7684\u6bcf\u4e2a\u5c5e\u6027\u540d\u79f0\u90fd\u7b26\u5408\u63d0\u4f9b\u7684\u6a21\u5f0f\u65f6\uff0c\u6b64\u5173\u952e\u5b57\u9a8c\u8bc1\u901a\u8fc7\u3002\u8bf7\u6ce8\u610f\uff0c\u6a21\u5f0f\u6b63\u5728\u6d4b\u8bd5\u7684\u5c5e\u6027\u540d\u79f0\u5c06\u59cb\u7ec8\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u3002"),(0,i.kt)("p",null,"\u7701\u7565\u6b64\u5173\u952e\u5b57\u5177\u6709\u4e0e\u7a7a\u6a21\u5f0f\u76f8\u540c\u7684\u884c\u4e3a\u3002"),(0,i.kt)("h2",{id:"11-\u7528\u4e8e\u672a\u8bc4\u4f30\u4f4d\u7f6e\u7684\u8bcd\u6c47\u8868a-vocabulary-for-unevaluated-locations"},"11. \u7528\u4e8e\u672a\u8bc4\u4f30\u4f4d\u7f6e\u7684\u8bcd\u6c47\u8868\uff08A Vocabulary for Unevaluated Locations\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"The purpose of these keywords is to enable schema authors to apply subschemas to array items or object properties that have not been successfully evaluated against any dynamic-scope subschema of any adjacent keywords."),(0,i.kt)("p",null,'These instance items or properties may have been unsuccessfully evaluated against one or more adjacent keyword subschemas, such as when an assertion in a branch of an "anyOf" fails. Such failed evaluations are not considered to contribute to whether or not the item or property has been evaluated. Only successful evaluations are considered.'),(0,i.kt)("p",null,'If an item in an array or an object property is "successfully evaluated", it is logically considered to be valid in terms of the representation of the object or array that\'s expected. For example if a subschema represents a car, which requires between 2-4 wheels, and the value of "wheels" is 6, the instance object is not "evaluated" to be a car, and the "wheels" property is considered "unevaluated (successfully as a known thing)", and does not retain any annotations.'),(0,i.kt)("p",null,"Recall that adjacent keywords are keywords within the same schema object, and that the dynamic-scope subschemas include reference targets as well as lexical subschemas."),(0,i.kt)("p",null,"The behavior of these keywords depend on the annotation results of adjacent keywords that apply to the instance location being validated."),(0,i.kt)("p",null,'Meta-schemas that do not use "$vocabulary" SHOULD be considered to require this vocabulary as if its URI were present with a value of true.'),(0,i.kt)("p",null,"The current URI for this vocabulary, known as the Unevaluated Applicator vocabulary, is: ",(0,i.kt)("a",{parentName:"p",href:"https://json-schema.org/draft/2020-12/vocab/unevaluated"},"https://json-schema.org/draft/2020-12/vocab/unevaluated"),"."),(0,i.kt)("p",null,"The current URI for the corresponding meta-schema is: ",(0,i.kt)("a",{parentName:"p",href:"https://json-schema.org/draft/2020-12/meta/unevaluated"},"https://json-schema.org/draft/2020-12/meta/unevaluated"),".")),(0,i.kt)("p",null,"\u8fd9\u4e9b\u5173\u952e\u5b57\u7684\u76ee\u7684\u662f\u4f7f\u6a21\u5f0f\u4f5c\u8005\u80fd\u591f\u5c06\u5b50\u6a21\u5f0f\u5e94\u7528\u4e8e\u672a\u6210\u529f\u9488\u5bf9\u4efb\u4f55\u76f8\u90bb\u5173\u952e\u5b57\u7684\u4efb\u4f55\u52a8\u6001\u4f5c\u7528\u57df\u5b50\u6a21\u5f0f\u8fdb\u884c\u8bc4\u4f30\u7684\u6570\u7ec4\u9879\u6216\u5bf9\u8c61\u5c5e\u6027\u3002"),(0,i.kt)("p",null,"\u8fd9\u4e9b\u5b9e\u4f8b\u9879\u6216\u5c5e\u6027\u53ef\u80fd\u5df2\u7ecf\u9488\u5bf9\u4e00\u4e2a\u6216\u591a\u4e2a\u76f8\u90bb\u5173\u952e\u5b57\u5b50\u6a21\u5f0f\u8fdb\u884c\u4e86\u4e0d\u6210\u529f\u7684\u8bc4\u4f30\uff0c\u4f8b\u5982\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"anyOf")," \u7684\u4e00\u4e2a\u5206\u652f\u4e2d\u7684\u65ad\u8a00\u5931\u8d25\u65f6\u3002\u8fd9\u6837\u7684\u5931\u8d25\u8bc4\u4f30\u4e0d\u88ab\u8ba4\u4e3a\u6709\u52a9\u4e8e\u5224\u65ad\u9879\u76ee\u6216\u5c5e\u6027\u662f\u5426\u88ab\u8bc4\u4f30\u3002\u53ea\u6709\u6210\u529f\u7684\u8bc4\u4f30\u624d\u88ab\u8003\u8651\u3002"),(0,i.kt)("p",null,"\u5982\u679c\u6570\u7ec4\u4e2d\u7684\u4e00\u4e2a\u9879\u76ee\u6216\u5bf9\u8c61\u5c5e\u6027\u662f\u201c\u6210\u529f\u8bc4\u4f30\u201d\uff08successfully evaluated\uff09\u7684\uff0c\u5219\u5728\u903b\u8f91\u4e0a\u8ba4\u4e3a\u5b83\u5728\u8868\u793a\u6240\u671f\u671b\u7684\u5bf9\u8c61\u6216\u6570\u7ec4\u65b9\u9762\u662f\u6709\u6548\u7684\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4e00\u4e2a\u5b50\u6a21\u5f0f\u8868\u793a\u4e00\u8f86\u6c7d\u8f66\uff0c\u9700\u8981 2-4 \u4e2a\u8f6e\u5b50\uff0c\u800c\u201c\u8f6e\u5b50\u201d\u7684\u503c\u662f 6\uff0c\u90a3\u4e48\u5b9e\u4f8b\u5bf9\u8c61\u4e0d\u4f1a\u88ab\u201c\u8bc4\u4f30\u201d\u4e3a\u4e00\u8f86\u6c7d\u8f66\uff0c\u201c\u8f6e\u5b50\u201d\u5c5e\u6027\u88ab\u8ba4\u4e3a\u662f\u201c\u672a\u8bc4\u4f30\uff08\u4f5c\u4e3a\u5df2\u77e5\u4e8b\u7269\u6210\u529f\uff09\u201d\uff08unevaluated (successfully as a known thing)\uff09\uff0c\u5e76\u4e14\u4e0d\u4fdd\u7559\u4efb\u4f55\u6ce8\u91ca\u3002"),(0,i.kt)("p",null,"\u8bf7\u56de\u5fc6\u4e00\u4e0b\uff0c\u76f8\u90bb\u5173\u952e\u5b57\u662f\u5728\u540c\u4e00\u6a21\u5f0f\u5bf9\u8c61\u4e2d\u7684\u5173\u952e\u5b57\uff0c\u52a8\u6001\u4f5c\u7528\u57df\u5b50\u6a21\u5f0f\u5305\u62ec\u5f15\u7528\u76ee\u6807\u4ee5\u53ca\u8bcd\u6cd5\u5b50\u6a21\u5f0f\u3002"),(0,i.kt)("p",null,"\u8fd9\u4e9b\u5173\u952e\u5b57\u7684\u884c\u4e3a\u53d6\u51b3\u4e8e\u5e94\u7528\u4e8e\u6b63\u5728\u9a8c\u8bc1\u7684\u5b9e\u4f8b\u4f4d\u7f6e\u7684\u76f8\u90bb\u5173\u952e\u5b57\u7684\u6ce8\u91ca\u7ed3\u679c\u3002"),(0,i.kt)("p",null,"\u4e0d\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"$vocabulary")," \u7684\u5143\u6a21\u5f0f\u5e94\u8be5\uff08SHOULD\uff09\u88ab\u8ba4\u4e3a\u9700\u8981\u6b64\u8bcd\u6c47\u8868\uff0c\u5c31\u50cf\u5176 URI \u5b58\u5728\u5e76\u5177\u6709 true \u503c\u4e00\u6837\u3002"),(0,i.kt)("p",null,"\u6b64\u8bcd\u6c47\u8868\u7684\u5f53\u524d URI\uff0c\u79f0\u4e3a Unevaluated Applicator \u8bcd\u6c47\u8868\uff0c\u662f\uff1a",(0,i.kt)("a",{parentName:"p",href:"https://json-schema.org/draft/2020-12/vocab/unevaluated"},"https://json-schema.org/draft/2020-12/vocab/unevaluated"),"\u3002"),(0,i.kt)("p",null,"\u76f8\u5e94\u5143\u6a21\u5f0f\u7684\u5f53\u524d URI \u662f\uff1a",(0,i.kt)("a",{parentName:"p",href:"https://json-schema.org/draft/2020-12/meta/unevaluated%E3%80%82"},"https://json-schema.org/draft/2020-12/meta/unevaluated\u3002")),(0,i.kt)("h3",{id:"111-\u5173\u952e\u5b57\u72ec\u7acb\u6027keyword-independence"},"11.1. \u5173\u952e\u5b57\u72ec\u7acb\u6027\uff08Keyword Independence\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"Schema keywords typically operate independently, without affecting each other's outcomes. However, the keywords in this vocabulary are notable exceptions:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},'"unevaluatedItems", whose behavior is defined in terms of annotations from "prefixItems", "items", "contains", and itself'),(0,i.kt)("li",{parentName:"ul"},'"unevaluatedProperties", whose behavior is defined in terms of annotations from "properties", "patternProperties", "additionalProperties" and itself'))),(0,i.kt)("p",null,"\u6a21\u5f0f\u5173\u952e\u5b57\u901a\u5e38\u72ec\u7acb\u64cd\u4f5c\uff0c\u4e0d\u5f71\u54cd\u5f7c\u6b64\u7684\u7ed3\u679c\u3002\u7136\u800c\uff0c\u672c\u8bcd\u6c47\u8868\u4e2d\u7684\u5173\u952e\u5b57\u662f\u503c\u5f97\u6ce8\u610f\u7684\u4f8b\u5916\uff1a"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"unevaluatedItems"),"\uff0c\u5176\u884c\u4e3a\u662f\u6839\u636e\u6765\u81ea ",(0,i.kt)("inlineCode",{parentName:"li"},"prefixItems"),"\u3001",(0,i.kt)("inlineCode",{parentName:"li"},"items"),"\u3001",(0,i.kt)("inlineCode",{parentName:"li"},"contains")," \u4ee5\u53ca\u5176\u672c\u8eab\u7684\u6ce8\u91ca\u5b9a\u4e49\u7684"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"unevaluatedProperties"),"\uff0c\u5176\u884c\u4e3a\u662f\u6839\u636e\u6765\u81ea ",(0,i.kt)("inlineCode",{parentName:"li"},"properties"),"\u3001",(0,i.kt)("inlineCode",{parentName:"li"},"patternProperties"),"\u3001",(0,i.kt)("inlineCode",{parentName:"li"},"additionalProperties")," \u548c\u5176\u672c\u8eab\u7684\u6ce8\u91ca\u5b9a\u4e49\u7684")),(0,i.kt)("h3",{id:"112-unevaluateditems"},"11.2. unevaluatedItems"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'The value of "unevaluatedItems" MUST be a valid JSON Schema.'),(0,i.kt)("p",null,'The behavior of this keyword depends on the annotation results of adjacent keywords that apply to the instance location being validated. Specifically, the annotations from "prefixItems", "items", and "contains", which can come from those keywords when they are adjacent to the "unevaluatedItems" keyword. Those three annotations, as well as "unevaluatedItems", can also result from any and all adjacent in-place applicator (Section 10.2) keywords. This includes but is not limited to the in-place applicators defined in this document.'),(0,i.kt)("p",null,'If no relevant annotations are present, the "unevaluatedItems" subschema MUST be applied to all locations in the array. If a boolean true value is present from any of the relevant annotations, "unevaluatedItems" MUST be ignored. Otherwise, the subschema MUST be applied to any index greater than the largest annotation value for "prefixItems", which does not appear in any annotation value for "contains".'),(0,i.kt)("p",null,'This means that "prefixItems", "items", "contains", and all in-place applicators MUST be evaluated before this keyword can be evaluated. Authors of extension keywords MUST NOT define an in-place applicator that would need to be evaluated after this keyword.'),(0,i.kt)("p",null,'If the "unevaluatedItems" subschema is applied to any positions within the instance array, it produces an annotation result of boolean true, analogous to the behavior of "items". This annotation affects the behavior of "unevaluatedItems" in parent schemas.'),(0,i.kt)("p",null,"Omitting this keyword has the same assertion behavior as an empty schema.")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"unevaluatedItems")," \u7684\u503c\u5fc5\u987b\uff08MUST\uff09\u662f\u6709\u6548\u7684 JSON \u6a21\u5f0f\u3002"),(0,i.kt)("p",null,"\u8fd9\u4e2a\u5173\u952e\u5b57\u7684\u884c\u4e3a\u53d6\u51b3\u4e8e\u5e94\u7528\u4e8e\u6b63\u5728\u9a8c\u8bc1\u7684\u5b9e\u4f8b\u4f4d\u7f6e\u7684\u76f8\u90bb\u5173\u952e\u5b57\u7684\u6ce8\u91ca\u7ed3\u679c\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u6765\u81ea ",(0,i.kt)("inlineCode",{parentName:"p"},"prefixItems"),"\u3001",(0,i.kt)("inlineCode",{parentName:"p"},"items")," \u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"contains")," \u7684\u6ce8\u91ca\uff0c\u5b83\u4eec\u53ef\u4ee5\u5728\u4e0e ",(0,i.kt)("inlineCode",{parentName:"p"},"unevaluatedItems")," \u5173\u952e\u5b57\u76f8\u90bb\u65f6\u6765\u81ea\u8fd9\u4e9b\u5173\u952e\u5b57\u3002\u8fd9\u4e09\u4e2a\u6ce8\u91ca\u4ee5\u53ca ",(0,i.kt)("inlineCode",{parentName:"p"},"unevaluatedItems")," \u8fd8\u53ef\u4ee5\u6765\u81ea\u4efb\u4f55\u548c\u6240\u6709\u76f8\u90bb\u7684\u5c31\u5730\u5e94\u7528\u5668\uff08\u7b2c10.2\u8282\uff09\u5173\u952e\u5b57\u3002\u8fd9\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u672c\u6587\u6863\u4e2d\u5b9a\u4e49\u7684\u5c31\u5730\u5e94\u7528\u5668\u3002"),(0,i.kt)("p",null,"\u5982\u679c\u6ca1\u6709\u76f8\u5173\u6ce8\u91ca\u5b58\u5728\uff0c\u90a3\u4e48 ",(0,i.kt)("inlineCode",{parentName:"p"},"unevaluatedItems")," \u5b50\u6a21\u5f0f\u5fc5\u987b\uff08MUST\uff09\u5e94\u7528\u4e8e\u6570\u7ec4\u4e2d\u7684\u6240\u6709\u4f4d\u7f6e\u3002\u5982\u679c\u4ece\u4efb\u4f55\u76f8\u5173\u6ce8\u91ca\u4e2d\u51fa\u73b0\u5e03\u5c14\u771f\u503c\uff0c",(0,i.kt)("inlineCode",{parentName:"p"},"unevaluatedItems")," \u5fc5\u987b\uff08MUST\uff09\u88ab\u5ffd\u7565\u3002\u5426\u5219\uff0c\u5b50\u6a21\u5f0f\u5fc5\u987b\uff08MUST\uff09\u5e94\u7528\u4e8e\u5927\u4e8e ",(0,i.kt)("inlineCode",{parentName:"p"},"prefixItems")," \u7684\u6700\u5927\u6ce8\u91ca\u503c\u7684\u4efb\u4f55\u7d22\u5f15\uff0c\u8fd9\u4e9b\u7d22\u5f15\u4e0d\u51fa\u73b0\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"contains")," \u7684\u4efb\u4f55\u6ce8\u91ca\u503c\u4e2d\u3002"),(0,i.kt)("p",null,"\u8fd9\u610f\u5473\u7740\u5728\u8bc4\u4f30\u8fd9\u4e2a\u5173\u952e\u5b57\u4e4b\u524d\uff0c\u5fc5\u987b\uff08MUST\uff09\u8bc4\u4f30 ",(0,i.kt)("inlineCode",{parentName:"p"},"prefixItems"),"\u3001",(0,i.kt)("inlineCode",{parentName:"p"},"items"),"\u3001",(0,i.kt)("inlineCode",{parentName:"p"},"contains")," \u548c\u6240\u6709\u5c31\u5730\u5e94\u7528\u5668\u3002\u6269\u5c55\u5173\u952e\u5b57\u7684\u4f5c\u8005\u5fc5\u987b\u4e0d\uff08MUST NOT\uff09\u5b9a\u4e49\u4e00\u4e2a\u9700\u8981\u5728\u8fd9\u4e2a\u5173\u952e\u5b57\u4e4b\u540e\u8bc4\u4f30\u7684\u5c31\u5730\u5e94\u7528\u5668\u3002"),(0,i.kt)("p",null,"\u5982\u679c ",(0,i.kt)("inlineCode",{parentName:"p"},"unevaluatedItems")," \u5b50\u6a21\u5f0f\u5e94\u7528\u4e8e\u5b9e\u4f8b\u6570\u7ec4\u4e2d\u7684\u4efb\u4f55\u4f4d\u7f6e\uff0c\u5b83\u4f1a\u4ea7\u751f\u4e00\u4e2a\u5e03\u5c14\u771f\u503c\u7684\u6ce8\u91ca\u7ed3\u679c\uff0c\u7c7b\u4f3c\u4e8e ",(0,i.kt)("inlineCode",{parentName:"p"},"items")," \u7684\u884c\u4e3a\u3002\u8fd9\u4e2a\u6ce8\u91ca\u5f71\u54cd\u4e86\u7236\u6a21\u5f0f\u4e2d ",(0,i.kt)("inlineCode",{parentName:"p"},"unevaluatedItems")," \u7684\u884c\u4e3a\u3002"),(0,i.kt)("p",null,"\u7701\u7565\u8fd9\u4e2a\u5173\u952e\u5b57\u4e0e\u7a7a\u6a21\u5f0f\u5177\u6709\u76f8\u540c\u7684\u65ad\u8a00\u884c\u4e3a\u3002"),(0,i.kt)("h3",{id:"113-unevaluatedproperties"},"11.3. unevaluatedProperties"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'The value of "unevaluatedProperties" MUST be a valid JSON Schema.'),(0,i.kt)("p",null,'The behavior of this keyword depends on the annotation results of adjacent keywords that apply to the instance location being validated. Specifically, the annotations from "properties", "patternProperties", and "additionalProperties", which can come from those keywords when they are adjacent to the "unevaluatedProperties" keyword. Those three annotations, as well as "unevaluatedProperties", can also result from any and all adjacent in-place applicator (Section 10.2) keywords. This includes but is not limited to the in-place applicators defined in this document.'),(0,i.kt)("p",null,'Validation with "unevaluatedProperties" applies only to the child values of instance names that do not appear in the "properties", "patternProperties", "additionalProperties", or "unevaluatedProperties" annotation results that apply to the instance location being validated.'),(0,i.kt)("p",null,'For all such properties, validation succeeds if the child instance validates against the "unevaluatedProperties" schema.'),(0,i.kt)("p",null,'This means that "properties", "patternProperties", "additionalProperties", and all in-place applicators MUST be evaluated before this keyword can be evaluated. Authors of extension keywords MUST NOT define an in-place applicator that would need to be evaluated after this keyword.'),(0,i.kt)("p",null,'The annotation result of this keyword is the set of instance property names validated by this keyword\'s subschema. This annotation affects the behavior of "unevaluatedProperties" in parent schemas.'),(0,i.kt)("p",null,"Omitting this keyword has the same assertion behavior as an empty schema.")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"unevaluatedProperties")," \u7684\u503c\u5fc5\u987b\uff08MUST\uff09\u662f\u6709\u6548\u7684 JSON \u6a21\u5f0f\u3002"),(0,i.kt)("p",null,"\u8fd9\u4e2a\u5173\u952e\u5b57\u7684\u884c\u4e3a\u53d6\u51b3\u4e8e\u5e94\u7528\u4e8e\u6b63\u5728\u9a8c\u8bc1\u7684\u5b9e\u4f8b\u4f4d\u7f6e\u7684\u76f8\u90bb\u5173\u952e\u5b57\u7684\u6ce8\u91ca\u7ed3\u679c\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u6765\u81ea ",(0,i.kt)("inlineCode",{parentName:"p"},"properties"),"\u3001",(0,i.kt)("inlineCode",{parentName:"p"},"patternProperties")," \u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"additionalProperties")," \u7684\u6ce8\u91ca\uff0c\u5b83\u4eec\u53ef\u4ee5\u5728\u4e0e ",(0,i.kt)("inlineCode",{parentName:"p"},"unevaluatedProperties")," \u5173\u952e\u5b57\u76f8\u90bb\u65f6\u6765\u81ea\u8fd9\u4e9b\u5173\u952e\u5b57\u3002\u8fd9\u4e09\u4e2a\u6ce8\u91ca\u4ee5\u53ca ",(0,i.kt)("inlineCode",{parentName:"p"},"unevaluatedProperties")," \u8fd8\u53ef\u4ee5\u6765\u81ea\u4efb\u4f55\u548c\u6240\u6709\u76f8\u90bb\u7684\u5c31\u5730\u5e94\u7528\u5668\uff08\u7b2c10.2\u8282\uff09\u5173\u952e\u5b57\u3002\u8fd9\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u672c\u6587\u6863\u4e2d\u5b9a\u4e49\u7684\u5c31\u5730\u5e94\u7528\u5668\u3002"),(0,i.kt)("p",null,"\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"unevaluatedProperties")," \u8fdb\u884c\u9a8c\u8bc1\u4ec5\u9002\u7528\u4e8e\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"properties"),"\u3001",(0,i.kt)("inlineCode",{parentName:"p"},"patternProperties"),"\u3001",(0,i.kt)("inlineCode",{parentName:"p"},"additionalProperties")," \u6216 ",(0,i.kt)("inlineCode",{parentName:"p"},"unevaluatedProperties")," \u6ce8\u91ca\u7ed3\u679c\u4e2d\u672a\u51fa\u73b0\u7684\u5b9e\u4f8b\u540d\u79f0\u7684\u5b50\u503c\uff0c\u8fd9\u4e9b\u6ce8\u91ca\u7ed3\u679c\u9002\u7528\u4e8e\u6b63\u5728\u9a8c\u8bc1\u7684\u5b9e\u4f8b\u4f4d\u7f6e\u3002"),(0,i.kt)("p",null,"\u5bf9\u4e8e\u6240\u6709\u8fd9\u6837\u7684\u5c5e\u6027\uff0c\u5982\u679c\u5b50\u5b9e\u4f8b\u901a\u8fc7 ",(0,i.kt)("inlineCode",{parentName:"p"},"unevaluatedProperties")," \u6a21\u5f0f\u9a8c\u8bc1\uff0c\u5219\u9a8c\u8bc1\u6210\u529f\u3002"),(0,i.kt)("p",null,"\u8fd9\u610f\u5473\u7740\u5728\u8bc4\u4f30\u8fd9\u4e2a\u5173\u952e\u5b57\u4e4b\u524d\uff0c\u5fc5\u987b\uff08MUST\uff09\u8bc4\u4f30 ",(0,i.kt)("inlineCode",{parentName:"p"},"properties"),"\u3001",(0,i.kt)("inlineCode",{parentName:"p"},"patternProperties"),"\u3001",(0,i.kt)("inlineCode",{parentName:"p"},"additionalProperties")," \u548c\u6240\u6709\u5c31\u5730\u5e94\u7528\u5668\u3002\u6269\u5c55\u5173\u952e\u5b57\u7684\u4f5c\u8005\u5fc5\u987b\u4e0d\uff08MUST NOT\uff09\u5b9a\u4e49\u4e00\u4e2a\u9700\u8981\u5728\u8fd9\u4e2a\u5173\u952e\u5b57\u4e4b\u540e\u8bc4\u4f30\u7684\u5c31\u5730\u5e94\u7528\u5668\u3002"),(0,i.kt)("p",null,"\u8fd9\u4e2a\u5173\u952e\u5b57\u7684\u6ce8\u91ca\u7ed3\u679c\u662f\u7531\u8fd9\u4e2a\u5173\u952e\u5b57\u7684\u5b50\u6a21\u5f0f\u9a8c\u8bc1\u7684\u5b9e\u4f8b\u5c5e\u6027\u540d\u79f0\u96c6\u5408\u3002\u8fd9\u4e2a\u6ce8\u91ca\u5f71\u54cd\u4e86\u7236\u6a21\u5f0f\u4e2d ",(0,i.kt)("inlineCode",{parentName:"p"},"unevaluatedProperties")," \u7684\u884c\u4e3a\u3002"),(0,i.kt)("p",null,"\u7701\u7565\u8fd9\u4e2a\u5173\u952e\u5b57\u4e0e\u7a7a\u6a21\u5f0f\u5177\u6709\u76f8\u540c\u7684\u65ad\u8a00\u884c\u4e3a\u3002"),(0,i.kt)("h2",{id:"12-\u8f93\u51fa\u683c\u5f0f\u5316output-formatting"},"12. \u8f93\u51fa\u683c\u5f0f\u5316\uff08Output Formatting\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"JSON Schema is defined to be platform-independent. As such, to increase compatibility across platforms, implementations SHOULD conform to a standard validation output format. This section describes the minimum requirements that consumers will need to properly interpret validation results.")),(0,i.kt)("p",null,"JSON Schema \u88ab\u5b9a\u4e49\u4e3a\u5e73\u53f0\u65e0\u5173\u7684\u3002\u4e3a\u4e86\u63d0\u9ad8\u5404\u4e2a\u5e73\u53f0\u4e4b\u95f4\u7684\u517c\u5bb9\u6027\uff0c\u5b9e\u73b0\u5e94\u8be5\u9075\u5faa\u6807\u51c6\u7684\u9a8c\u8bc1\u8f93\u51fa\u683c\u5f0f\u3002\u672c\u8282\u63cf\u8ff0\u4e86\u6d88\u8d39\u8005\u4e3a\u4e86\u6b63\u786e\u89e3\u91ca\u9a8c\u8bc1\u7ed3\u679c\u6240\u9700\u7684\u6700\u4f4e\u8981\u6c42\u3002"),(0,i.kt)("h3",{id:"121-\u683c\u5f0fformat"},"12.1. \u683c\u5f0f\uff08Format\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"JSON Schema output is defined using the JSON Schema data instance model as described in section 4.2.1. Implementations MAY deviate from this as supported by their specific languages and platforms, however it is RECOMMENDED that the output be convertible to the JSON format defined herein via serialization or other means.")),(0,i.kt)("p",null,"JSON Schema \u8f93\u51fa\u662f\u4f7f\u7528 JSON Schema \u6570\u636e\u5b9e\u4f8b\u6a21\u578b\u5b9a\u4e49\u7684\uff0c\u5982\u7b2c4.2.1\u8282\u6240\u8ff0\u3002\u5b9e\u73b0\u53ef\u4ee5\uff08MAY\uff09\u6839\u636e\u5176\u7279\u5b9a\u8bed\u8a00\u548c\u5e73\u53f0\u7684\u652f\u6301\u504f\u79bb\u8fd9\u4e00\u70b9\uff0c\u4f46\u5efa\u8bae\uff08RECOMMENDED\uff09\u8f93\u51fa\u53ef\u4ee5\u901a\u8fc7\u5e8f\u5217\u5316\u6216\u5176\u5b83\u65b9\u5f0f\u8f6c\u6362\u4e3a\u672c\u6587\u4e2d\u5b9a\u4e49\u7684 JSON \u683c\u5f0f\u3002"),(0,i.kt)("h3",{id:"122-\u8f93\u51fa\u683c\u5f0foutput-formats"},"12.2. \u8f93\u51fa\u683c\u5f0f\uff08Output Formats\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'This specification defines four output formats. See the "Output Structure" section for the requirements of each format.'),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Flag - A boolean which simply indicates the overall validation result with no further details."),(0,i.kt)("li",{parentName:"ul"},"Basic - Provides validation information in a flat list structure."),(0,i.kt)("li",{parentName:"ul"},"Detailed - Provides validation information in a condensed hierarchical structure based on the structure of the schema."),(0,i.kt)("li",{parentName:"ul"},"Verbose - Provides validation information in an uncondensed hierarchical structure that matches the exact structure of the schema.")),(0,i.kt)("p",null,'An implementation SHOULD provide at least one of the "flag", "basic", or "detailed" format and MAY provide the "verbose" format. If it provides one or more of the "detailed" or "verbose" formats, it MUST also provide the "flag" format. Implementations SHOULD specify in their documentation which formats they support.')),(0,i.kt)("p",null,"\u672c\u89c4\u8303\u5b9a\u4e49\u4e86\u56db\u79cd\u8f93\u51fa\u683c\u5f0f\u3002\u8bf7\u53c2\u9605\u201c\u8f93\u51fa\u7ed3\u6784\u201d\u90e8\u5206\u4e86\u89e3\u6bcf\u79cd\u683c\u5f0f\u7684\u8981\u6c42\u3002"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u6807\u5fd7\uff08Flag\uff09\uff1a\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u7b80\u5355\u5730\u8868\u793a\u603b\u4f53\u9a8c\u8bc1\u7ed3\u679c\uff0c\u6ca1\u6709\u8fdb\u4e00\u6b65\u7684\u7ec6\u8282\u3002"),(0,i.kt)("li",{parentName:"ul"},"\u57fa\u672c\uff08Basic\uff09\uff1a\u4ee5\u5e73\u9762\u5217\u8868\u7ed3\u6784\u63d0\u4f9b\u9a8c\u8bc1\u4fe1\u606f\u3002"),(0,i.kt)("li",{parentName:"ul"},"\u8be6\u7ec6\uff08Detailed\uff09\uff1a\u6839\u636e\u6a21\u5f0f\u7684\u7ed3\u6784\uff0c\u4ee5\u7b80\u5316\u7684\u5c42\u6b21\u7ed3\u6784\u63d0\u4f9b\u9a8c\u8bc1\u4fe1\u606f\u3002"),(0,i.kt)("li",{parentName:"ul"},"\u5197\u957f\uff08Verbose\uff09\uff1a\u4ee5\u4e0e\u6a21\u5f0f\u7684\u786e\u5207\u7ed3\u6784\u76f8\u5339\u914d\u7684\u672a\u538b\u7f29\u5c42\u6b21\u7ed3\u6784\u63d0\u4f9b\u9a8c\u8bc1\u4fe1\u606f\u3002")),(0,i.kt)("p",null,'\u5b9e\u73b0\u5e94\uff08SHOULD\uff09\u81f3\u5c11\u63d0\u4f9b "Flag"\u3001"Basic" \u6216 "Detailed" \u683c\u5f0f\u4e2d\u7684\u4e00\u4e2a\uff0c\u5e76\u4e14\u53ef\u4ee5\uff08MAY\uff09\u63d0\u4f9b "Verbose" \u683c\u5f0f\u3002\u5982\u679c\u63d0\u4f9b "Detailed" \u6216 "Verbose" \u683c\u5f0f\u4e2d\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\uff0c\u90a3\u4e48\u4e5f\u5fc5\u987b\uff08MUST\uff09\u63d0\u4f9b "Flag" \u683c\u5f0f\u3002\u5b9e\u73b0\u5e94\uff08SHOULD\uff09\u5728\u5176\u6587\u6863\u4e2d\u6307\u5b9a\u5b83\u4eec\u652f\u6301\u54ea\u4e9b\u683c\u5f0f\u3002'),(0,i.kt)("h3",{id:"123-\u6700\u4f4e\u4fe1\u606fminimum-information"},"12.3. \u6700\u4f4e\u4fe1\u606f\uff08Minimum Information\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'Beyond the simplistic "flag" output, additional information is useful to aid in debugging a schema or instance. Each sub-result SHOULD contain the information contained within this section at a minimum.'),(0,i.kt)("p",null,"A single object that contains all of these components is considered an output unit."),(0,i.kt)("p",null,"Implementations MAY elect to provide additional information.")),(0,i.kt)("p",null,'\u9664\u4e86\u7b80\u5355\u7684 "Flag" \u8f93\u51fa\u4e4b\u5916\uff0c\u5176\u5b83\u4fe1\u606f\u5bf9\u4e8e\u8c03\u8bd5\u6a21\u5f0f\u6216\u5b9e\u4f8b\u4e5f\u662f\u6709\u7528\u7684\u3002\u6bcf\u4e2a\u5b50\u7ed3\u679c\u81f3\u5c11\u5e94\uff08SHOULD\uff09\u5305\u542b\u672c\u8282\u4e2d\u5305\u542b\u7684\u4fe1\u606f\u3002'),(0,i.kt)("p",null,"\u5305\u542b\u6240\u6709\u8fd9\u4e9b\u7ec4\u4ef6\u7684\u5355\u4e2a\u5bf9\u8c61\u88ab\u89c6\u4e3a\u4e00\u4e2a\u8f93\u51fa\u5355\u5143\u3002"),(0,i.kt)("p",null,"\u5b9e\u73b0\u53ef\u4ee5\uff08MAY\uff09\u9009\u62e9\u63d0\u4f9b\u5176\u5b83\u4fe1\u606f\u3002"),(0,i.kt)("h4",{id:"1231-\u5173\u952e\u5b57\u76f8\u5bf9\u4f4d\u7f6ekeyword-relative-location"},"12.3.1. \u5173\u952e\u5b57\u76f8\u5bf9\u4f4d\u7f6e\uff08Keyword Relative Location\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'The relative location of the validating keyword that follows the validation path. The value MUST be expressed as a JSON Pointer, and it MUST include any by-reference applicators such as "$ref" or "$dynamicRef".'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"/properties/width/$ref/minimum\n")),(0,i.kt)("p",null,"Note that this pointer may not be resolvable by the normal JSON Pointer process due to the inclusion of these by-reference applicator keywords."),(0,i.kt)("p",null,'The JSON key for this information is "keywordLocation".')),(0,i.kt)("p",null,"\u9a8c\u8bc1\u5173\u952e\u5b57\u7684\u76f8\u5bf9\u4f4d\u7f6e\uff0c\u9075\u5faa\u9a8c\u8bc1\u8def\u5f84\u3002\u8be5\u503c\u5fc5\u987b\uff08MUST\uff09\u8868\u793a\u4e3a JSON Pointer\uff0c\u5e76\u4e14\u5fc5\u987b\uff08MUST\uff09\u5305\u62ec ",(0,i.kt)("inlineCode",{parentName:"p"},"$ref")," \u6216 ",(0,i.kt)("inlineCode",{parentName:"p"},"$dynamicRef")," \u7b49\u5f15\u7528\u5b9a\u4f4d\u5668\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"/properties/width/$ref/minimum\n")),(0,i.kt)("p",null,"\u8bf7\u6ce8\u610f\uff0c\u7531\u4e8e\u5305\u542b\u8fd9\u4e9b\u5f15\u7528\u5b9a\u4f4d\u5668\u5173\u952e\u5b57\uff0c\u8be5\u6307\u9488\u53ef\u80fd\u65e0\u6cd5\u901a\u8fc7\u6b63\u5e38\u7684 JSON Pointer \u8fc7\u7a0b\u89e3\u6790\u3002"),(0,i.kt)("p",null,"\u6b64\u4fe1\u606f\u7684 JSON \u952e\u540d\u4e3a ",(0,i.kt)("inlineCode",{parentName:"p"},"keywordLocation"),"\u3002"),(0,i.kt)("h4",{id:"1232-\u5173\u952e\u5b57\u7edd\u5bf9\u4f4d\u7f6ekeyword-absolute-location"},"12.3.2. \u5173\u952e\u5b57\u7edd\u5bf9\u4f4d\u7f6e\uff08Keyword Absolute Location\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'The absolute, dereferenced location of the validating keyword. The value MUST be expressed as a full URI using the canonical URI of the relevant schema resource with a JSON Pointer fragment, and it MUST NOT include by-reference applicators such as "$ref" or "$dynamicRef" as non-terminal path components. It MAY end in such keywords if the error or annotation is for that keyword, such as an unresolvable reference. Note that "absolute" here is in the sense of "absolute filesystem path" (meaning the complete location) rather than the "absolute-URI" terminology from RFC 3986 (meaning with scheme but without fragment). Keyword absolute locations will have a fragment in order to identify the keyword.'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"https://example.com/schemas/common#/$defs/count/minimum\n")),(0,i.kt)("p",null,'This information MAY be omitted only if either the dynamic scope did not pass over a reference or if the schema does not declare an absolute URI as its "$id".'),(0,i.kt)("p",null,'The JSON key for this information is "absoluteKeywordLocation".')),(0,i.kt)("p",null,"\u9a8c\u8bc1\u5173\u952e\u5b57\u7684\u7edd\u5bf9\u3001\u53d6\u6d88\u5f15\u7528\u7684\u4f4d\u7f6e\u3002\u8be5\u503c\u5fc5\u987b\uff08MUST\uff09\u8868\u793a\u4e3a\u4e00\u4e2a\u5b8c\u6574\u7684 URI\uff0c\u4f7f\u7528\u76f8\u5173\u6a21\u5f0f\u8d44\u6e90\u7684\u89c4\u8303 URI \u548c\u4e00\u4e2a JSON Pointer \u7247\u6bb5\u8868\u793a\uff0c\u4e14\u4e0d\u5f97\uff08MUST NOT\uff09\u5c06 ",(0,i.kt)("inlineCode",{parentName:"p"},"$ref")," \u6216 ",(0,i.kt)("inlineCode",{parentName:"p"},"$dynamicRef")," \u7b49\u5f15\u7528\u5b9a\u4f4d\u5668\u4f5c\u4e3a\u975e\u7ec8\u7aef\u8def\u5f84\u7ec4\u4ef6\u5305\u62ec\u5728\u5185\u3002\u5982\u679c\u9519\u8bef\u6216\u6ce8\u91ca\u9488\u5bf9\u7684\u662f\u8be5\u5173\u952e\u5b57\uff0c\u4f8b\u5982\u65e0\u6cd5\u89e3\u6790\u7684\u5f15\u7528\uff0c\u5219\u53ef\u80fd\uff08MAY\uff09\u4ee5\u8fd9\u6837\u7684\u5173\u952e\u5b57\u7ed3\u675f\u3002\u8bf7\u6ce8\u610f\uff0c\u8fd9\u91cc\u7684\u201c\u7edd\u5bf9\u201d\u662f\u6307\u201c\u7edd\u5bf9\u6587\u4ef6\u7cfb\u7edf\u8def\u5f84\u201d\uff08absolute filesystem path\uff09\uff08\u610f\u5473\u7740\u5b8c\u6574\u4f4d\u7f6e\uff09\uff0c\u800c\u4e0d\u662f RFC 3986 \u4e2d\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"absolute-URI")," \u672f\u8bed\uff08\u610f\u5473\u7740\u5e26\u6709\u65b9\u6848\u4f46\u6ca1\u6709\u7247\u6bb5\uff09\u3002\u5173\u952e\u5b57\u7edd\u5bf9\u4f4d\u7f6e\u5c06\u5177\u6709\u4e00\u4e2a\u7247\u6bb5\u4ee5\u4fbf\u8bc6\u522b\u5173\u952e\u5b57\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"https://example.com/schemas/common#/$defs/count/minimum\n")),(0,i.kt)("p",null,"\u4ec5\u5f53\u52a8\u6001\u8303\u56f4\u6ca1\u6709\u8de8\u8d8a\u5f15\u7528\u6216\u6a21\u5f0f\u6ca1\u6709\u58f0\u660e\u4e00\u4e2a\u7edd\u5bf9 URI \u4f5c\u4e3a\u5176 ",(0,i.kt)("inlineCode",{parentName:"p"},"$id")," \u65f6\uff0c\u624d\u53ef\u4ee5\uff08MAY\uff09\u7701\u7565\u6b64\u4fe1\u606f\u3002"),(0,i.kt)("p",null,"\u6b64\u4fe1\u606f\u7684 JSON \u952e\u540d\u4e3a ",(0,i.kt)("inlineCode",{parentName:"p"},"absoluteKeywordLocation"),"\u3002"),(0,i.kt)("h4",{id:"1233-\u5b9e\u4f8b\u4f4d\u7f6einstance-location"},"12.3.3. \u5b9e\u4f8b\u4f4d\u7f6e\uff08Instance Location\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"The location of the JSON value within the instance being validated. The value MUST be expressed as a JSON Pointer."),(0,i.kt)("p",null,'The JSON key for this information is "instanceLocation".')),(0,i.kt)("p",null,"\u6b63\u5728\u9a8c\u8bc1\u7684\u5b9e\u4f8b\u4e2d JSON \u503c\u7684\u4f4d\u7f6e\u3002\u8be5\u503c\u5fc5\u987b\uff08MUST\uff09\u8868\u793a\u4e3a JSON Pointer\u3002"),(0,i.kt)("p",null,"\u6b64\u4fe1\u606f\u7684 JSON \u952e\u540d\u4e3a ",(0,i.kt)("inlineCode",{parentName:"p"},"instanceLocation"),"\u3002"),(0,i.kt)("h4",{id:"1234-\u9519\u8bef\u6216\u6ce8\u89e3error-or-annotation"},"12.3.4. \u9519\u8bef\u6216\u6ce8\u89e3\uff08Error or Annotation\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"The error or annotation that is produced by the validation."),(0,i.kt)("p",null,"For errors, the specific wording for the message is not defined by this specification. Implementations will need to provide this."),(0,i.kt)("p",null,"For annotations, each keyword that produces an annotation specifies its format. By default, it is the keyword's value."),(0,i.kt)("p",null,'The JSON key for failed validations is "error"; for successful validations it is "annotation".')),(0,i.kt)("p",null,"\u7531\u9a8c\u8bc1\u4ea7\u751f\u7684\u9519\u8bef\u6216\u6ce8\u89e3\u3002"),(0,i.kt)("p",null,"\u5bf9\u4e8e\u9519\u8bef\uff0c\u672c\u89c4\u8303\u6ca1\u6709\u5b9a\u4e49\u6d88\u606f\u7684\u5177\u4f53\u63aa\u8f9e\u3002\u5b9e\u73b0\u5c06\u9700\u8981\u63d0\u4f9b\u6b64\u4fe1\u606f\u3002"),(0,i.kt)("p",null,"\u5bf9\u4e8e\u6ce8\u89e3\uff0c\u4ea7\u751f\u6ce8\u89e3\u7684\u6bcf\u4e2a\u5173\u952e\u5b57\u90fd\u6307\u5b9a\u5176\u683c\u5f0f\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5b83\u662f\u5173\u952e\u5b57\u7684\u503c\u3002"),(0,i.kt)("p",null,"\u5931\u8d25\u9a8c\u8bc1\u7684 JSON \u952e\u540d\u4e3a ",(0,i.kt)("inlineCode",{parentName:"p"},"error"),"\uff1b\u6210\u529f\u9a8c\u8bc1\u7684\u952e\u540d\u4e3a ",(0,i.kt)("inlineCode",{parentName:"p"},"annotation"),"\u3002"),(0,i.kt)("h4",{id:"1235-\u5d4c\u5957\u7ed3\u679cnested-results"},"12.3.5. \u5d4c\u5957\u7ed3\u679c\uff08Nested Results\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"For the two hierarchical structures, this property will hold nested errors and annotations."),(0,i.kt)("p",null,'The JSON key for nested results in failed validations is "errors"; for successful validations it is "annotations". Note the plural forms, as a keyword with nested results can also have a local error or annotation.')),(0,i.kt)("p",null,"\u5bf9\u4e8e\u4e24\u79cd\u5c42\u6b21\u7ed3\u6784\uff0c\u6b64\u5c5e\u6027\u5c06\u5305\u542b\u5d4c\u5957\u7684\u9519\u8bef\u548c\u6ce8\u89e3\u3002"),(0,i.kt)("p",null,"\u5931\u8d25\u9a8c\u8bc1\u4e2d\u5d4c\u5957\u7ed3\u679c\u7684 JSON \u952e\u540d\u4e3a ",(0,i.kt)("inlineCode",{parentName:"p"},"errors"),"\uff1b\u6210\u529f\u9a8c\u8bc1\u7684\u952e\u540d\u4e3a ",(0,i.kt)("inlineCode",{parentName:"p"},"annotations"),"\u3002\u6ce8\u610f\u590d\u6570\u5f62\u5f0f\uff0c\u56e0\u4e3a\u5177\u6709\u5d4c\u5957\u7ed3\u679c\u7684\u5173\u952e\u5b57\u4e5f\u53ef\u4ee5\u5177\u6709\u672c\u5730\u9519\u8bef\u6216\u6ce8\u89e3\u3002"),(0,i.kt)("h3",{id:"124-\u8f93\u51fa\u7ed3\u6784output-structure"},"12.4. \u8f93\u51fa\u7ed3\u6784\uff08Output Structure\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'The output MUST be an object containing a boolean property named "valid". When additional information about the result is required, the output MUST also contain "errors" or "annotations" as described below.'),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},'"valid" - a boolean value indicating the overall validation success or failure'),(0,i.kt)("li",{parentName:"ul"},'"errors" - the collection of errors or annotations produced by a failed validation'),(0,i.kt)("li",{parentName:"ul"},'"annotations" - the collection of errors or annotations produced by a successful validation')),(0,i.kt)("p",null,"For these examples, the following schema and instance will be used."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "$id": "https://example.com/polygon",\n  "$schema": "https://json-schema.org/draft/2020-12/schema",\n  "$defs": {\n    "point": {\n      "type": "object",\n      "properties": {\n        "x": { "type": "number" },\n        "y": { "type": "number" }\n      },\n      "additionalProperties": false,\n      "required": [ "x", "y" ]\n    }\n  },\n  "type": "array",\n  "items": { "$ref": "#/$defs/point" },\n  "minItems": 3\n}\n\n[\n  {\n    "x": 2.5,\n    "y": 1.3\n  },\n  {\n    "x": 1,\n    "z": 6.7\n  }\n]\n')),(0,i.kt)("p",null,"This instance will fail validation and produce errors, but it's trivial to deduce examples for passing schemas that produce annotations."),(0,i.kt)("p",null,"Specifically, the errors it will produce are:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},'The second object is missing a "y" property.'),(0,i.kt)("li",{parentName:"ul"},'The second object has a disallowed "z" property.'),(0,i.kt)("li",{parentName:"ul"},"There are only two objects, but three are required.")),(0,i.kt)("p",null,"Note that the error message wording as depicted in these examples is not a requirement of this specification. Implementations SHOULD craft error messages tailored for their audience or provide a templating mechanism that allows their users to craft their own messages.")),(0,i.kt)("p",null,"\u8f93\u51fa\u5fc5\u987b\uff08MUST\uff09\u662f\u4e00\u4e2a\u5305\u542b\u540d\u4e3a ",(0,i.kt)("inlineCode",{parentName:"p"},"valid")," \u7684\u5e03\u5c14\u5c5e\u6027\u7684\u5bf9\u8c61\u3002\u5f53\u9700\u8981\u5173\u4e8e\u7ed3\u679c\u7684\u5176\u5b83\u4fe1\u606f\u65f6\uff0c\u8f93\u51fa\u8fd8\u5fc5\u987b\uff08MUST\uff09\u5305\u542b\u4e0b\u6587\u6240\u8ff0\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"errors")," \u6216 ",(0,i.kt)("inlineCode",{parentName:"p"},"annotations"),"\u3002"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"valid")," - \u8868\u793a\u6574\u4f53\u9a8c\u8bc1\u6210\u529f\u6216\u5931\u8d25\u7684\u5e03\u5c14\u503c"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"errors")," - \u5931\u8d25\u9a8c\u8bc1\u4ea7\u751f\u7684\u9519\u8bef\u6216\u6ce8\u89e3\u96c6\u5408"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"annotations")," - \u6210\u529f\u9a8c\u8bc1\u4ea7\u751f\u7684\u9519\u8bef\u6216\u6ce8\u89e3\u96c6\u5408")),(0,i.kt)("p",null,"\u5bf9\u4e8e\u8fd9\u4e9b\u793a\u4f8b\uff0c\u5c06\u4f7f\u7528\u4ee5\u4e0b\u6a21\u5f0f\u548c\u5b9e\u4f8b\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "$id": "https://example.com/polygon",\n  "$schema": "https://json-schema.org/draft/2020-12/schema",\n  "$defs": {\n    "point": {\n      "type": "object",\n      "properties": {\n        "x": { "type": "number" },\n        "y": { "type": "number" }\n      },\n      "additionalProperties": false,\n      "required": [ "x", "y" ]\n    }\n  },\n  "type": "array",\n  "items": { "$ref": "#/$defs/point" },\n  "minItems": 3\n}\n\n[\n  {\n    "x": 2.5,\n    "y": 1.3\n  },\n  {\n    "x": 1,\n    "z": 6.7\n  }\n]\n')),(0,i.kt)("p",null,"\u6b64\u5b9e\u4f8b\u5c06\u65e0\u6cd5\u901a\u8fc7\u9a8c\u8bc1\u5e76\u4ea7\u751f\u9519\u8bef\uff0c\u4f46\u53ef\u4ee5\u8f7b\u677e\u63a8\u65ad\u51fa\u901a\u8fc7\u6a21\u5f0f\u751f\u6210\u6ce8\u89e3\u7684\u793a\u4f8b\u3002"),(0,i.kt)("p",null,"\u5177\u4f53\u6765\u8bf4\uff0c\u5b83\u5c06\u4ea7\u751f\u7684\u9519\u8bef\u5305\u62ec\uff1a"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},'\u7b2c\u4e8c\u4e2a\u5bf9\u8c61\u7f3a\u5c11 "y" \u5c5e\u6027\u3002'),(0,i.kt)("li",{parentName:"ul"},'\u7b2c\u4e8c\u4e2a\u5bf9\u8c61\u5177\u6709\u4e0d\u5141\u8bb8\u7684 "z" \u5c5e\u6027\u3002'),(0,i.kt)("li",{parentName:"ul"},"\u53ea\u6709\u4e24\u4e2a\u5bf9\u8c61\uff0c\u4f46\u9700\u8981\u4e09\u4e2a\u3002")),(0,i.kt)("p",null,"\u8bf7\u6ce8\u610f\uff0c\u8fd9\u4e9b\u793a\u4f8b\u4e2d\u63cf\u7ed8\u7684\u9519\u8bef\u6d88\u606f\u63aa\u8f9e\u4e0d\u662f\u672c\u89c4\u8303\u7684\u8981\u6c42\u3002\u5b9e\u73b0\u5e94\u4e3a\uff08SHOULD\uff09\u5176\u53d7\u4f17\u5b9a\u5236\u9519\u8bef\u6d88\u606f\uff0c\u6216\u63d0\u4f9b\u4e00\u4e2a\u6a21\u677f\u673a\u5236\uff0c\u5141\u8bb8\u7528\u6237\u5b9a\u5236\u81ea\u5df1\u7684\u6d88\u606f\u3002"),(0,i.kt)("h4",{id:"1241-\u6807\u5fd7flag"},"12.4.1. \u6807\u5fd7\uff08Flag\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'In the simplest case, merely the boolean result for the "valid" valid property needs to be fulfilled.'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "valid": false\n}\n')),(0,i.kt)("p",null,'Because no errors or annotations are returned with this format, it is RECOMMENDED that implementations use short-circuiting logic to return failure or success as soon as the outcome can be determined. For example, if an "anyOf" keyword contains five sub-schemas, and the second one passes, there is no need to check the other three. The logic can simply return with success.')),(0,i.kt)("p",null,"\u5728\u6700\u7b80\u5355\u7684\u60c5\u51b5\u4e0b\uff0c\u53ea\u9700\u6ee1\u8db3 ",(0,i.kt)("inlineCode",{parentName:"p"},"valid")," \u5c5e\u6027\u7684\u5e03\u5c14\u7ed3\u679c\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "valid": false\n}\n')),(0,i.kt)("p",null,"\u56e0\u4e3a\u8fd9\u79cd\u683c\u5f0f\u4e0d\u4f1a\u8fd4\u56de\u9519\u8bef\u6216\u6ce8\u89e3\uff0c\u6240\u4ee5\u5efa\u8bae\uff08RECOMMENDED\uff09\u5b9e\u73b0\u4f7f\u7528\u77ed\u8def\u903b\u8f91\u5728\u53ef\u4ee5\u786e\u5b9a\u7ed3\u679c\u7684\u60c5\u51b5\u4e0b\u5c3d\u5feb\u8fd4\u56de\u5931\u8d25\u6216\u6210\u529f\u3002\u4f8b\u5982\uff0c\u5982\u679c ",(0,i.kt)("inlineCode",{parentName:"p"},"anyOf")," \u5173\u952e\u5b57\u5305\u542b\u4e94\u4e2a\u5b50\u6a21\u5f0f\uff0c\u5e76\u4e14\u7b2c\u4e8c\u4e2a\u901a\u8fc7\u4e86\uff0c\u90a3\u4e48\u5c31\u6ca1\u6709\u5fc5\u8981\u68c0\u67e5\u5176\u5b83\u4e09\u4e2a\u3002\u903b\u8f91\u53ef\u4ee5\u7b80\u5355\u5730\u8fd4\u56de\u6210\u529f\u3002"),(0,i.kt)("h4",{id:"1242-\u57fa\u672cbasic"},"12.4.2. \u57fa\u672c\uff08Basic\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'The "Basic" structure is a flat list of output units.'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "valid": false,\n  "errors": [\n    {\n      "keywordLocation": "",\n      "instanceLocation": "",\n      "error": "A subschema had errors."\n    },\n    {\n      "keywordLocation": "/items/$ref",\n      "absoluteKeywordLocation":\n        "https://example.com/polygon#/$defs/point",\n      "instanceLocation": "/1",\n      "error": "A subschema had errors."\n    },\n    {\n      "keywordLocation": "/items/$ref/required",\n      "absoluteKeywordLocation":\n        "https://example.com/polygon#/$defs/point/required",\n      "instanceLocation": "/1",\n      "error": "Required property \'y\' not found."\n    },\n    {\n      "keywordLocation": "/items/$ref/additionalProperties",\n      "absoluteKeywordLocation":\n        "https://example.com/polygon#/$defs/point/additionalProperties",\n      "instanceLocation": "/1/z",\n      "error": "Additional property \'z\' found but was invalid."\n    },\n    {\n      "keywordLocation": "/minItems",\n      "instanceLocation": "",\n      "error": "Expected at least 3 items but found 2"\n    }\n  ]\n}\n'))),(0,i.kt)("p",null,'"Basic" \u7ed3\u6784\u662f\u8f93\u51fa\u5355\u5143\u7684\u6241\u5e73\u5217\u8868\u3002'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "valid": false,\n  "errors": [\n    {\n      "keywordLocation": "",\n      "instanceLocation": "",\n      "error": "A subschema had errors."\n    },\n    {\n      "keywordLocation": "/items/$ref",\n      "absoluteKeywordLocation":\n        "https://example.com/polygon#/$defs/point",\n      "instanceLocation": "/1",\n      "error": "A subschema had errors."\n    },\n    {\n      "keywordLocation": "/items/$ref/required",\n      "absoluteKeywordLocation":\n        "https://example.com/polygon#/$defs/point/required",\n      "instanceLocation": "/1",\n      "error": "Required property \'y\' not found."\n    },\n    {\n      "keywordLocation": "/items/$ref/additionalProperties",\n      "absoluteKeywordLocation":\n        "https://example.com/polygon#/$defs/point/additionalProperties",\n      "instanceLocation": "/1/z",\n      "error": "Additional property \'z\' found but was invalid."\n    },\n    {\n      "keywordLocation": "/minItems",\n      "instanceLocation": "",\n      "error": "Expected at least 3 items but found 2"\n    }\n  ]\n}\n')),(0,i.kt)("h4",{id:"1243-\u8be6\u7ec6detailed"},"12.4.3. \u8be6\u7ec6\uff08Detailed\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'The "Detailed" structure is based on the schema and can be more readable for both humans and machines. Having the structure organized this way makes associations between the errors more apparent. For example, the fact that the missing "y" property and the extra "z" property both stem from the same location in the instance is not immediately obvious in the "Basic" structure. In a hierarchy, the correlation is more easily identified.'),(0,i.kt)("p",null,"The following rules govern the construction of the results object:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},'All applicator keywords ("*Of", "$ref", "if"/"then"/"else", etc.) require a node.'),(0,i.kt)("li",{parentName:"ul"},"Nodes that have no children are removed."),(0,i.kt)("li",{parentName:"ul"},"Nodes that have a single child are replaced by the child.")),(0,i.kt)("p",null,"Branch nodes do not require an error message or an annotation."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "valid": false,\n  "keywordLocation": "",\n  "instanceLocation": "",\n  "errors": [\n    {\n      "valid": false,\n      "keywordLocation": "/items/$ref",\n      "absoluteKeywordLocation":\n        "https://example.com/polygon#/$defs/point",\n      "instanceLocation": "/1",\n      "errors": [\n        {\n          "valid": false,\n          "keywordLocation": "/items/$ref/required",\n          "absoluteKeywordLocation":\n            "https://example.com/polygon#/$defs/point/required",\n          "instanceLocation": "/1",\n          "error": "Required property \'y\' not found."\n        },\n        {\n          "valid": false,\n          "keywordLocation": "/items/$ref/additionalProperties",\n          "absoluteKeywordLocation":\n            "https://example.com/polygon#/$defs/point/additionalProperties",\n          "instanceLocation": "/1/z",\n          "error": "Additional property \'z\' found but was invalid."\n        }\n      ]\n    },\n    {\n      "valid": false,\n      "keywordLocation": "/minItems",\n      "instanceLocation": "",\n      "error": "Expected at least 3 items but found 2"\n    }\n  ]\n}\n'))),(0,i.kt)("p",null,'"Detailed" \u7ed3\u6784\u57fa\u4e8e\u6a21\u5f0f\uff0c\u5bf9\u4eba\u548c\u673a\u5668\u90fd\u66f4\u5177\u53ef\u8bfb\u6027\u3002\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u7ec4\u7ec7\u7ed3\u6784\u4f7f\u5f97\u9519\u8bef\u4e4b\u95f4\u7684\u5173\u8054\u66f4\u52a0\u660e\u663e\u3002\u4f8b\u5982\uff0c\u5728 "Basic" \u7ed3\u6784\u4e2d\uff0c\u7f3a\u5c11\u7684 "y" \u5c5e\u6027\u548c\u989d\u5916\u7684 "z" \u5c5e\u6027\u90fd\u6765\u81ea\u5b9e\u4f8b\u4e2d\u7684\u76f8\u540c\u4f4d\u7f6e\uff0c\u8fd9\u4e00\u70b9\u5e76\u4e0d\u662f\u4e00\u76ee\u4e86\u7136\u3002\u5728\u5c42\u6b21\u7ed3\u6784\u4e2d\uff0c\u5173\u8054\u66f4\u5bb9\u6613\u8bc6\u522b\u3002'),(0,i.kt)("p",null,"\u4ee5\u4e0b\u89c4\u5219\u51b3\u5b9a\u4e86\u7ed3\u679c\u5bf9\u8c61\u7684\u6784\u5efa\uff1a"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u6240\u6709\u5e94\u7528\u5668\u5173\u952e\u5b57\uff08",(0,i.kt)("inlineCode",{parentName:"li"},"*Of"),"\u3001",(0,i.kt)("inlineCode",{parentName:"li"},"$ref"),"\u3001",(0,i.kt)("inlineCode",{parentName:"li"},"if"),"/",(0,i.kt)("inlineCode",{parentName:"li"},"then"),"/",(0,i.kt)("inlineCode",{parentName:"li"},"else")," \u7b49\uff09\u90fd\u9700\u8981\u4e00\u4e2a\u8282\u70b9\u3002"),(0,i.kt)("li",{parentName:"ul"},"\u6ca1\u6709\u5b50\u8282\u70b9\u7684\u8282\u70b9\u4f1a\u88ab\u5220\u9664\u3002"),(0,i.kt)("li",{parentName:"ul"},"\u53ea\u6709\u4e00\u4e2a\u5b50\u8282\u70b9\u7684\u8282\u70b9\u5c06\u88ab\u5b50\u8282\u70b9\u66ff\u6362\u3002")),(0,i.kt)("p",null,"\u5206\u652f\u8282\u70b9\u4e0d\u9700\u8981\u9519\u8bef\u6d88\u606f\u6216\u6ce8\u89e3\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "valid": false,\n  "keywordLocation": "",\n  "instanceLocation": "",\n  "errors": [\n    {\n      "valid": false,\n      "keywordLocation": "/items/$ref",\n      "absoluteKeywordLocation":\n        "https://example.com/polygon#/$defs/point",\n      "instanceLocation": "/1",\n      "errors": [\n        {\n          "valid": false,\n          "keywordLocation": "/items/$ref/required",\n          "absoluteKeywordLocation":\n            "https://example.com/polygon#/$defs/point/required",\n          "instanceLocation": "/1",\n          "error": "Required property \'y\' not found."\n        },\n        {\n          "valid": false,\n          "keywordLocation": "/items/$ref/additionalProperties",\n          "absoluteKeywordLocation":\n            "https://example.com/polygon#/$defs/point/additionalProperties",\n          "instanceLocation": "/1/z",\n          "error": "Additional property \'z\' found but was invalid."\n        }\n      ]\n    },\n    {\n      "valid": false,\n      "keywordLocation": "/minItems",\n      "instanceLocation": "",\n      "error": "Expected at least 3 items but found 2"\n    }\n  ]\n}\n')),(0,i.kt)("h4",{id:"1244-\u8be6\u7ec6verbose"},"12.4.4. \u8be6\u7ec6\uff08Verbose\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,'The "Verbose" structure is a fully realized hierarchy that exactly matches that of the schema. This structure has applications in form generation and validation where the error\'s location is important.'),(0,i.kt)("p",null,'The primary difference between this and the "Detailed" structure is that all results are returned. This includes sub-schema validation results that would otherwise be removed (e.g. annotations for failed validations, successful validations inside a ',(0,i.kt)("inlineCode",{parentName:"p"},"not")," keyword, etc.). Because of this, it is RECOMMENDED that each node also carry a ",(0,i.kt)("inlineCode",{parentName:"p"},"valid")," property to indicate the validation result for that node."),(0,i.kt)("p",null,"Because this output structure can be quite large, a smaller example is given here for brevity. The URI of the full output structure of the example above is: ",(0,i.kt)("a",{parentName:"p",href:"https://json-schema.org/draft/2020-12/output/verbose-example"},"https://json-schema.org/draft/2020-12/output/verbose-example"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'// schema\n{\n  "$id": "https://example.com/polygon",\n  "$schema": "https://json-schema.org/draft/2020-12/schema",\n  "type": "object",\n  "properties": {\n    "validProp": true,\n  },\n  "additionalProperties": false\n}\n\n// instance\n{\n  "validProp": 5,\n  "disallowedProp": "value"\n}\n\n// result\n{\n  "valid": false,\n  "keywordLocation": "",\n  "instanceLocation": "",\n  "errors": [\n    {\n      "valid": true,\n      "keywordLocation": "/type",\n      "instanceLocation": ""\n    },\n    {\n      "valid": true,\n      "keywordLocation": "/properties",\n      "instanceLocation": ""\n    },\n    {\n      "valid": false,\n      "keywordLocation": "/additionalProperties",\n      "instanceLocation": "",\n      "errors": [\n        {\n          "valid": false,\n          "keywordLocation": "/additionalProperties",\n          "instanceLocation": "/disallowedProp",\n          "error": "Additional property \'disallowedProp\' found but was invalid."\n        }\n      ]\n    }\n  ]\n}\n'))),(0,i.kt)("p",null,'"Verbose" \u7ed3\u6784\u662f\u4e00\u4e2a\u5b8c\u5168\u5b9e\u73b0\u7684\u5c42\u6b21\u7ed3\u6784\uff0c\u4e0e\u6a21\u5f0f\u5b8c\u5168\u5339\u914d\u3002\u8fd9\u79cd\u7ed3\u6784\u5728\u8868\u5355\u751f\u6210\u548c\u9a8c\u8bc1\u4e2d\u6709\u5e94\u7528\uff0c\u5176\u4e2d\u9519\u8bef\u7684\u4f4d\u7f6e\u5f88\u91cd\u8981\u3002'),(0,i.kt)("p",null,'\u5b83\u4e0e "Detailed" \u7ed3\u6784\u7684\u4e3b\u8981\u533a\u522b\u5728\u4e8e\u8fd4\u56de\u6240\u6709\u7ed3\u679c\u3002\u8fd9\u5305\u62ec\u5176\u5b83\u60c5\u51b5\u4e0b\u5c06\u88ab\u5220\u9664\u7684\u5b50\u6a21\u5f0f\u9a8c\u8bc1\u7ed3\u679c\uff08\u4f8b\u5982\uff0c\u5931\u8d25\u9a8c\u8bc1\u7684\u6ce8\u91ca\uff0c',(0,i.kt)("inlineCode",{parentName:"p"},"not")," \u5173\u952e\u5b57\u5185\u7684\u6210\u529f\u9a8c\u8bc1\u7b49\uff09\u3002\u56e0\u6b64\uff0c\u5efa\u8bae\uff08RECOMMENDED\uff09\u6bcf\u4e2a\u8282\u70b9\u8fd8\u643a\u5e26\u4e00\u4e2a ",(0,i.kt)("inlineCode",{parentName:"p"},"valid")," \u5c5e\u6027\uff0c\u4ee5\u6307\u793a\u8be5\u8282\u70b9\u7684\u9a8c\u8bc1\u7ed3\u679c\u3002"),(0,i.kt)("p",null,"\u56e0\u4e3a\u8fd9\u4e2a\u8f93\u51fa\u7ed3\u6784\u53ef\u80fd\u76f8\u5f53\u5927\uff0c\u6240\u4ee5\u5728\u8fd9\u91cc\u7ed9\u51fa\u4e00\u4e2a\u8f83\u5c0f\u7684\u4f8b\u5b50\uff0c\u4ee5\u7b80\u6d01\u4e3a\u4e3b\u3002\u4e0a\u8ff0\u793a\u4f8b\u7684\u5b8c\u6574\u8f93\u51fa\u7ed3\u6784\u7684URI\u662f\uff1a",(0,i.kt)("a",{parentName:"p",href:"https://json-schema.org/draft/2020-12/output/verbose-example%E3%80%82"},"https://json-schema.org/draft/2020-12/output/verbose-example\u3002")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'// schema\n{\n  "$id": "https://example.com/polygon",\n  "$schema": "https://json-schema.org/draft/2020-12/schema",\n  "type": "object",\n  "properties": {\n    "validProp": true,\n  },\n  "additionalProperties": false\n}\n\n// instance\n{\n  "validProp": 5,\n  "disallowedProp": "value"\n}\n\n// result\n{\n  "valid": false,\n  "keywordLocation": "",\n  "instanceLocation": "",\n  "errors": [\n    {\n      "valid": true,\n      "keywordLocation": "/type",\n      "instanceLocation": ""\n    },\n    {\n      "valid": true,\n      "keywordLocation": "/properties",\n      "instanceLocation": ""\n    },\n    {\n      "valid": false,\n      "keywordLocation": "/additionalProperties",\n      "instanceLocation": "",\n      "errors": [\n        {\n          "valid": false,\n          "keywordLocation": "/additionalProperties",\n          "instanceLocation": "/disallowedProp",\n          "error": "Additional property \'disallowedProp\' found but was invalid."\n        }\n      ]\n    }\n  ]\n}\n')),(0,i.kt)("h4",{id:"1245-\u8f93\u51fa\u9a8c\u8bc1\u6a21\u5f0foutput-validation-schemas"},"12.4.5. \u8f93\u51fa\u9a8c\u8bc1\u6a21\u5f0f\uff08Output validation schemas\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"For convenience, JSON Schema has been provided to validate output generated by implementations. Its URI is: ",(0,i.kt)("a",{parentName:"p",href:"https://json-schema.org/draft/2020-12/output/schema"},"https://json-schema.org/draft/2020-12/output/schema"),".")),(0,i.kt)("p",null,"\u4e3a\u65b9\u4fbf\u8d77\u89c1\uff0c\u63d0\u4f9b\u4e86 JSON Schema \u6765\u9a8c\u8bc1\u5b9e\u73b0\u751f\u6210\u7684\u8f93\u51fa\u3002\u5b83\u7684 URI \u662f\uff1a",(0,i.kt)("a",{parentName:"p",href:"https://json-schema.org/draft/2020-12/output/schema%E3%80%82"},"https://json-schema.org/draft/2020-12/output/schema\u3002")),(0,i.kt)("h2",{id:"13-\u5b89\u5168\u6027\u8003\u8651security-considerations"},"13. \u5b89\u5168\u6027\u8003\u8651\uff08Security Considerations\uff09"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Expand original text"),(0,i.kt)("p",null,"Both schemas and instances are JSON values. As such, all security considerations defined in RFC 8259 ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc8259"},"RFC8259")," apply."),(0,i.kt)("p",null,"Instances and schemas are both frequently written by untrusted third parties, to be deployed on public Internet servers. Validators should take care that the parsing and validating against schemas does not consume excessive system resources. Validators MUST NOT fall into an infinite loop."),(0,i.kt)("p",null,"A malicious party could cause an implementation to repeatedly collect a copy of a very large value as an annotation. Implementations SHOULD guard against excessive consumption of system resources in such a scenario."),(0,i.kt)("p",null,'Servers MUST ensure that malicious parties cannot change the functionality of existing schemas by uploading a schema with a pre-existing or very similar "$id".'),(0,i.kt)("p",null,"Individual JSON Schema vocabularies are liable to also have their own security considerations. Consult the respective specifications for more information."),(0,i.kt)("p",null,'Schema authors should take care with "$comment" contents, as a malicious implementation can display them to end-users in violation of a spec, or fail to strip them if such behavior is expected.'),(0,i.kt)("p",null,'A malicious schema author could place executable code or other dangerous material within a "$comment". Implementations MUST NOT parse or otherwise take action based on "$comment" contents.')),(0,i.kt)("p",null,"\u6a21\u5f0f\u548c\u5b9e\u4f8b\u90fd\u662f JSON \u503c\u3002\u56e0\u6b64\uff0cRFC 8259 ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc8259"},"RFC8259")," \u4e2d\u5b9a\u4e49\u7684\u6240\u6709\u5b89\u5168\u6027\u8003\u8651\u90fd\u9002\u7528\u3002"),(0,i.kt)("p",null,"\u5b9e\u4f8b\u548c\u6a21\u5f0f\u901a\u5e38\u7531\u4e0d\u53d7\u4fe1\u4efb\u7684\u7b2c\u4e09\u65b9\u7f16\u5199\uff0c\u90e8\u7f72\u5728\u516c\u5171\u4e92\u8054\u7f51\u670d\u52a1\u5668\u4e0a\u3002\u9a8c\u8bc1\u5668\u5e94\u786e\u4fdd\u89e3\u6790\u548c\u6839\u636e\u6a21\u5f0f\u9a8c\u8bc1\u4e0d\u4f1a\u6d88\u8017\u8fc7\u591a\u7684\u7cfb\u7edf\u8d44\u6e90\u3002\u9a8c\u8bc1\u5668\u5fc5\u987b\u4e0d\uff08MUST NOT\uff09\u9677\u5165\u65e0\u9650\u5faa\u73af\u3002"),(0,i.kt)("p",null,"\u6076\u610f\u65b9\u53ef\u80fd\u5bfc\u81f4\u5b9e\u73b0\u53cd\u590d\u6536\u96c6\u4e00\u4e2a\u975e\u5e38\u5927\u7684\u503c\u4f5c\u4e3a\u6ce8\u91ca\u7684\u526f\u672c\u3002\u5b9e\u73b0\u5e94\u8be5\uff08SHOULD\uff09\u9632\u8303\u8fd9\u79cd\u60c5\u51b5\u4e0b\u8fc7\u5ea6\u6d88\u8017\u7cfb\u7edf\u8d44\u6e90\u3002"),(0,i.kt)("p",null,"\u670d\u52a1\u5668\u5fc5\u987b\uff08MUST\uff09\u786e\u4fdd\u6076\u610f\u65b9\u65e0\u6cd5\u901a\u8fc7\u4e0a\u4f20\u5177\u6709\u9884\u5148\u5b58\u5728\u6216\u975e\u5e38\u76f8\u4f3c\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"$id")," \u7684\u6a21\u5f0f\u6765\u66f4\u6539\u73b0\u6709\u6a21\u5f0f\u7684\u529f\u80fd\u3002"),(0,i.kt)("p",null,"\u5404\u4e2a JSON Schema \u8bcd\u6c47\u8868\u4e5f\u53ef\u80fd\u6709\u81ea\u5df1\u7684\u5b89\u5168\u6027\u8003\u8651\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u5404\u81ea\u7684\u89c4\u8303\u3002"),(0,i.kt)("p",null,"\u6a21\u5f0f\u4f5c\u8005\u5e94\u6ce8\u610f ",(0,i.kt)("inlineCode",{parentName:"p"},"$comment")," \u7684\u5185\u5bb9\uff0c\u56e0\u4e3a\u6076\u610f\u5b9e\u73b0\u53ef\u80fd\u4f1a\u8fdd\u53cd\u89c4\u8303\u5411\u6700\u7ec8\u7528\u6237\u663e\u793a\u5b83\u4eec\uff0c\u6216\u8005\u5728\u9884\u671f\u6b64\u7c7b\u884c\u4e3a\u65f6\u672a\u80fd\u5c06\u5b83\u4eec\u5254\u9664\u3002"),(0,i.kt)("p",null,"\u6076\u610f\u6a21\u5f0f\u4f5c\u8005\u53ef\u80fd\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"$comment")," \u4e2d\u653e\u7f6e\u53ef\u6267\u884c\u4ee3\u7801\u6216\u5176\u5b83\u5371\u9669\u6750\u6599\u3002\u5b9e\u73b0\u5fc5\u987b\u4e0d\uff08MUST NOT\uff09\u89e3\u6790\u6216\u6839\u636e ",(0,i.kt)("inlineCode",{parentName:"p"},"$comment")," \u5185\u5bb9\u91c7\u53d6\u5176\u5b83\u884c\u52a8\u3002"),(0,i.kt)("h2",{id:"14-iana-considerations\u7565\u89c1\u539f\u6587"},"14. IANA Considerations\uff08\u7565\uff0c\u89c1\u539f\u6587\uff09"),(0,i.kt)("h2",{id:"15-references\u7565\u89c1\u539f\u6587"},"15. References\uff08\u7565\uff0c\u89c1\u539f\u6587\uff09"),(0,i.kt)("h2",{id:"appendix\u7565\u89c1\u539f\u6587"},"Appendix\uff08\u7565\uff0c\u89c1\u539f\u6587\uff09"),(0,i.kt)("p",null,"\u539f\u6587\uff1a",(0,i.kt)("a",{parentName:"p",href:"https://json-schema.org/draft/2020-12/json-schema-core.html"},"JSON Schema: A Media Type for Describing JSON Documents")))}h.isMDXComponent=!0}}]);